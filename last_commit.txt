Repository: Products.CMFPlone


Branch: refs/heads/5.2.x
Date: 2020-01-03T17:21:11+01:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/da7db3926168dcdc487b023d445102a6d1be5932

Fix TTW Bundle compilation broken.
Fixes #2969
Fixes https://github.com/plone/plone.staticresources/issues/58

Files changed:
A news/2969.bugfix
M Products/CMFPlone/controlpanel/browser/resourceregistry.py

b"diff --git a/Products/CMFPlone/controlpanel/browser/resourceregistry.py b/Products/CMFPlone/controlpanel/browser/resourceregistry.py\nindex 9d502889cc..8b070c2919 100644\n--- a/Products/CMFPlone/controlpanel/browser/resourceregistry.py\n+++ b/Products/CMFPlone/controlpanel/browser/resourceregistry.py\n@@ -409,14 +409,8 @@ def config(self):\n         base_url = self.context.absolute_url()\n         resources = self.get_resources()\n \n-        try:\n-            less_url = self.registry['plone.resources.lessc']\n-        except KeyError:\n-            less_url = '++plone++static/components/less/dist/less-1.7.4.min.js'\n-        try:\n-            rjs_url = resources['rjs'].js\n-        except KeyError:\n-            rjs_url = '++plone++static/components/r.js/dist/r.js'\n+        less_url = self.registry['plone.resources.lessc']\n+        rjs_url = self.registry['plone.resources.rjs']\n \n         data = {\n             'development': self.registry['plone.resources.development'],\ndiff --git a/news/2969.bugfix b/news/2969.bugfix\nnew file mode 100644\nindex 0000000000..42a9f9353b\n--- /dev/null\n+++ b/news/2969.bugfix\n@@ -0,0 +1,2 @@\n+Fix TTW Bundle compilation broken.\n+[thet]\n"

Repository: Products.CMFPlone


Branch: refs/heads/5.2.x
Date: 2020-01-04T14:59:29+01:00
Author: Davi Lima (davilima6) <davilima6@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/5fd285e37ba3676af07190742a72c99c088b98af

Merge pull request #3011 from plone/thet-2969-5.2.x

Fix TTW Bundle compilation broken.

Files changed:
A news/2969.bugfix
M Products/CMFPlone/controlpanel/browser/resourceregistry.py

b"diff --git a/Products/CMFPlone/controlpanel/browser/resourceregistry.py b/Products/CMFPlone/controlpanel/browser/resourceregistry.py\nindex 9d502889cc..8b070c2919 100644\n--- a/Products/CMFPlone/controlpanel/browser/resourceregistry.py\n+++ b/Products/CMFPlone/controlpanel/browser/resourceregistry.py\n@@ -409,14 +409,8 @@ def config(self):\n         base_url = self.context.absolute_url()\n         resources = self.get_resources()\n \n-        try:\n-            less_url = self.registry['plone.resources.lessc']\n-        except KeyError:\n-            less_url = '++plone++static/components/less/dist/less-1.7.4.min.js'\n-        try:\n-            rjs_url = resources['rjs'].js\n-        except KeyError:\n-            rjs_url = '++plone++static/components/r.js/dist/r.js'\n+        less_url = self.registry['plone.resources.lessc']\n+        rjs_url = self.registry['plone.resources.rjs']\n \n         data = {\n             'development': self.registry['plone.resources.development'],\ndiff --git a/news/2969.bugfix b/news/2969.bugfix\nnew file mode 100644\nindex 0000000000..42a9f9353b\n--- /dev/null\n+++ b/news/2969.bugfix\n@@ -0,0 +1,2 @@\n+Fix TTW Bundle compilation broken.\n+[thet]\n"

