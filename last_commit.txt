Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2019-02-19T01:07:27+01:00
Author: Davi Lima (davilima6) <davilima6@gmail.com>
Commit: https://github.com/plone/plone.app.upgrade/commit/4869bab375c19888e177c9776c647b2933f5a987

Initiate Upgrade profile for Plone 5.2beta2

Files changed:
M plone/app/upgrade/v52/betas.py
M plone/app/upgrade/v52/configure.zcml
M plone/app/upgrade/v52/profiles.zcml

b'diff --git a/plone/app/upgrade/v52/betas.py b/plone/app/upgrade/v52/betas.py\nindex 925ef0e9..a7ac0210 100644\n--- a/plone/app/upgrade/v52/betas.py\n+++ b/plone/app/upgrade/v52/betas.py\n@@ -101,3 +101,7 @@ def to52beta1(context):\n     add_exclude_from_nav_index(context)\n     remove_legacy_resource_registries(context)\n     remove_interface_indexes_from_relations_catalog()\n+\n+\n+def to52beta2(context):\n+    loadMigrationProfile(context, \'profile-plone.app.upgrade.v52:to52beta2\')\ndiff --git a/plone/app/upgrade/v52/configure.zcml b/plone/app/upgrade/v52/configure.zcml\nindex 09880bfa..befd1a35 100644\n--- a/plone/app/upgrade/v52/configure.zcml\n+++ b/plone/app/upgrade/v52/configure.zcml\n@@ -43,6 +43,11 @@\n            handler=".betas.to52beta1"\n            />\n \n+      <gs:upgradeStep\n+           title="Run to52beta2 upgrade profile."\n+           description=""\n+           handler=".betas.to52beta2"\n+           />\n     </gs:upgradeSteps>\n \n </configure>\ndiff --git a/plone/app/upgrade/v52/profiles.zcml b/plone/app/upgrade/v52/profiles.zcml\nindex 7726c8e2..58e73510 100644\n--- a/plone/app/upgrade/v52/profiles.zcml\n+++ b/plone/app/upgrade/v52/profiles.zcml\n@@ -21,4 +21,12 @@\n       provides="Products.GenericSetup.interfaces.EXTENSION"\n       />\n \n+  <genericsetup:registerProfile\n+      name="to52beta2"\n+      title="Upgrade profile for Plone 5.2beta1 to Plone 5.2beta2"\n+      description=""\n+      directory="profiles/to_beta2"\n+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      />\n </configure>\n'

Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2019-02-19T01:08:32+01:00
Author: Davi Lima (davilima6) <davilima6@gmail.com>
Commit: https://github.com/plone/plone.app.upgrade/commit/9b89d381d46d5d975b7d0c8869018e3dc1a792ee

Add new registry/resources upgrade step to update 'moment' resource to use version without locales, which are now lazy loaded

Files changed:
A plone/app/upgrade/v52/profiles/to_beta2/registry/resources.xml

b'diff --git a/plone/app/upgrade/v52/profiles/to_beta2/registry/resources.xml b/plone/app/upgrade/v52/profiles/to_beta2/registry/resources.xml\nnew file mode 100644\nindex 00000000..195076b3\n--- /dev/null\n+++ b/plone/app/upgrade/v52/profiles/to_beta2/registry/resources.xml\n@@ -0,0 +1,10 @@\n+<?xml version="1.0"?>\n+<registry>\n+\n+  <records prefix="plone.resources/moment"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/moment/min/moment.min.js</value>\n+      <value key="url">++plone++static/components/moment/locale</value>\n+  </records>\n+\n+</registry>\n'

Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2019-02-19T01:13:01+01:00
Author: Davi Lima (davilima6) <davilima6@gmail.com>
Commit: https://github.com/plone/plone.app.upgrade/commit/03321003eb87934dfde156317dbdebf8ab272755

Add towncrier entry (changelog)

Files changed:
A news/199.news

b'diff --git a/news/199.news b/news/199.news\nnew file mode 100644\nindex 00000000..7aefd132\n--- /dev/null\n+++ b/news/199.news\n@@ -0,0 +1,5 @@\n+Add upgrade profile for Plone 5.2beta2\n+[davilima6]\n+\n+Add upgrade step for loading Moments.js without locales, which are now lazy loaded\n+[davilima6]\n'

Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2019-02-20T22:11:13+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.upgrade/commit/fea9f3fc9fb99fcdf2681b734ec11201df08835c

Merge pull request #199 from plone/momentjsLazyLoadLocales

Add profile for Plone 5.2b2; Start with new resources stepâ€¦

Files changed:
A news/199.news
A plone/app/upgrade/v52/profiles/to_beta2/registry/resources.xml
M plone/app/upgrade/v52/betas.py
M plone/app/upgrade/v52/configure.zcml
M plone/app/upgrade/v52/profiles.zcml

b'diff --git a/news/199.news b/news/199.news\nnew file mode 100644\nindex 00000000..7aefd132\n--- /dev/null\n+++ b/news/199.news\n@@ -0,0 +1,5 @@\n+Add upgrade profile for Plone 5.2beta2\n+[davilima6]\n+\n+Add upgrade step for loading Moments.js without locales, which are now lazy loaded\n+[davilima6]\ndiff --git a/plone/app/upgrade/v52/betas.py b/plone/app/upgrade/v52/betas.py\nindex 8ba2c9fc..ad108059 100644\n--- a/plone/app/upgrade/v52/betas.py\n+++ b/plone/app/upgrade/v52/betas.py\n@@ -102,3 +102,7 @@ def to52beta1(context):\n     add_exclude_from_nav_index(context)\n     remove_legacy_resource_registries(context)\n     remove_interface_indexes_from_relations_catalog()\n+\n+\n+def to52beta2(context):\n+    loadMigrationProfile(context, \'profile-plone.app.upgrade.v52:to52beta2\')\ndiff --git a/plone/app/upgrade/v52/configure.zcml b/plone/app/upgrade/v52/configure.zcml\nindex 09880bfa..befd1a35 100644\n--- a/plone/app/upgrade/v52/configure.zcml\n+++ b/plone/app/upgrade/v52/configure.zcml\n@@ -43,6 +43,11 @@\n            handler=".betas.to52beta1"\n            />\n \n+      <gs:upgradeStep\n+           title="Run to52beta2 upgrade profile."\n+           description=""\n+           handler=".betas.to52beta2"\n+           />\n     </gs:upgradeSteps>\n \n </configure>\ndiff --git a/plone/app/upgrade/v52/profiles.zcml b/plone/app/upgrade/v52/profiles.zcml\nindex 7726c8e2..58e73510 100644\n--- a/plone/app/upgrade/v52/profiles.zcml\n+++ b/plone/app/upgrade/v52/profiles.zcml\n@@ -21,4 +21,12 @@\n       provides="Products.GenericSetup.interfaces.EXTENSION"\n       />\n \n+  <genericsetup:registerProfile\n+      name="to52beta2"\n+      title="Upgrade profile for Plone 5.2beta1 to Plone 5.2beta2"\n+      description=""\n+      directory="profiles/to_beta2"\n+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      />\n </configure>\ndiff --git a/plone/app/upgrade/v52/profiles/to_beta2/registry/resources.xml b/plone/app/upgrade/v52/profiles/to_beta2/registry/resources.xml\nnew file mode 100644\nindex 00000000..195076b3\n--- /dev/null\n+++ b/plone/app/upgrade/v52/profiles/to_beta2/registry/resources.xml\n@@ -0,0 +1,10 @@\n+<?xml version="1.0"?>\n+<registry>\n+\n+  <records prefix="plone.resources/moment"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/moment/min/moment.min.js</value>\n+      <value key="url">++plone++static/components/moment/locale</value>\n+  </records>\n+\n+</registry>\n'

