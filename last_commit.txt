Repository: mockup


Branch: refs/heads/master
Date: 2018-09-18T12:40:22+02:00
Author: Sune Broendum Woeller (sunew) <sune@woeller.dk>
Commit: https://github.com/plone/mockup/commit/98f21588749feaaec13ce6aeac65a8aa9c5fdfd9

Fix error when running tests: "Some of your tests did a full page reload!", due to a form submit with no preventDefault.

Files changed:
M CHANGES.rst
M mockup/tests/pattern-tinymce-test.js

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex c1f600164..1e1843731 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -38,6 +38,9 @@ Bug fixes:\n   registered!" warnings by setting dummy name and trigger properties.\n   [sunew]\n \n+- Fix error when running tests: "Some of your tests did a full page reload!", due to a form submit with no preventDefault.\n+  [sunew]\n+\n \n 2.7.4 (2018-06-21)\n ------------------\ndiff --git a/mockup/tests/pattern-tinymce-test.js b/mockup/tests/pattern-tinymce-test.js\nindex e36e7860b..7e857c843 100644\n--- a/mockup/tests/pattern-tinymce-test.js\n+++ b/mockup/tests/pattern-tinymce-test.js\n@@ -503,6 +503,10 @@ define([\n       var changed_txt = \'changed contents\';\n       $editable.html(changed_txt);\n       var $form = $container.find(\'form\');\n+      // Avoid error when running tests: "Some of your tests did a full page reload!"\n+      $container.submit(function(e) {\n+        e.preventDefault();\n+      });\n       $container.trigger(\'submit\');\n       expect($el.val()).to.be.equal(changed_txt);\n       tinymce.get(0).remove();\n'

Repository: mockup


Branch: refs/heads/master
Date: 2018-09-18T10:44:38-03:00
Author: Franco Pellegrini (frapell) <frapell@gmail.com>
Commit: https://github.com/plone/mockup/commit/37ae9ded2eade5b766c8b97f37e8ebb6bee7882b

Merge pull request #869 from plone/sunew-fix-tests-reload-error

Fix error when running tests: "Some of your tests did a full page reload"

Files changed:
M CHANGES.rst
M mockup/tests/pattern-tinymce-test.js

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex c1f600164..1e1843731 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -38,6 +38,9 @@ Bug fixes:\n   registered!" warnings by setting dummy name and trigger properties.\n   [sunew]\n \n+- Fix error when running tests: "Some of your tests did a full page reload!", due to a form submit with no preventDefault.\n+  [sunew]\n+\n \n 2.7.4 (2018-06-21)\n ------------------\ndiff --git a/mockup/tests/pattern-tinymce-test.js b/mockup/tests/pattern-tinymce-test.js\nindex e36e7860b..7e857c843 100644\n--- a/mockup/tests/pattern-tinymce-test.js\n+++ b/mockup/tests/pattern-tinymce-test.js\n@@ -503,6 +503,10 @@ define([\n       var changed_txt = \'changed contents\';\n       $editable.html(changed_txt);\n       var $form = $container.find(\'form\');\n+      // Avoid error when running tests: "Some of your tests did a full page reload!"\n+      $container.submit(function(e) {\n+        e.preventDefault();\n+      });\n       $container.trigger(\'submit\');\n       expect($el.val()).to.be.equal(changed_txt);\n       tinymce.get(0).remove();\n'

