Repository: plone.restapi


Branch: refs/heads/master
Date: 2019-12-07T22:05:13+01:00
Author: Timo Stollenwerk (tisto) <tisto@users.noreply.github.com>
Commit: https://github.com/plone/plone.restapi/commit/cfa6095864babdd231920105b9e50ad58ca5c887

Add Python 3.8 support. (#830)

* Add Python 3.8 support.

* Pin lxml to latest version. Attempt to fix Python 3.8 compatibility.

* Unpin code-analysis deps.

Files changed:
A news/829.feature
M .travis.yml
M plone-5.2.x.cfg
M setup.py
M versions.cfg

b'diff --git a/.travis.yml b/.travis.yml\nindex f8088972..e9dbcf2a 100644\n--- a/.travis.yml\n+++ b/.travis.yml\n@@ -3,6 +3,7 @@ python:\n   - "2.7"\n   - "3.6"\n   - "3.7"\n+  - "3.8"\n dist: xenial\n sudo: required\n services:\n@@ -30,10 +31,13 @@ matrix:\n       env: PLONE_VERSION=5.2.x\n     - python: "3.7"\n       env: PLONE_VERSION=5.2.x\n+    - python: "3.8"\n+      env: PLONE_VERSION=5.2.x\n   exclude:\n     - python: "2.7"\n     - python: "3.6"\n     - python: "3.7"\n+    - python: "3.8"\n before_install:\n   - mkdir -p $HOME/buildout-cache/{eggs,downloads}\n   - mkdir $HOME/.buildout\ndiff --git a/news/829.feature b/news/829.feature\nnew file mode 100644\nindex 00000000..1cf9f9a1\n--- /dev/null\n+++ b/news/829.feature\n@@ -0,0 +1 @@\n+Add Python 3.8 support @timo\n\\ No newline at end of file\ndiff --git a/plone-5.2.x.cfg b/plone-5.2.x.cfg\nindex 9829d314..dcb0452a 100644\n--- a/plone-5.2.x.cfg\n+++ b/plone-5.2.x.cfg\n@@ -10,4 +10,5 @@ versions=versions\n plone.restapi =\n urllib3 = 1.21.1\n idna = 2.5\n+lxml = 4.4.2\n \ndiff --git a/setup.py b/setup.py\nindex d7768007..e0666e7f 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -5,22 +5,24 @@\n version = \'5.0.4.dev0\'\n \n long_description = (\n-    open(\'README.rst\').read() + \'\\n\' +\n-    \'Contributors\\n\'\n-    \'============\\n\' + \'\\n\' +\n-    open(\'CONTRIBUTORS.rst\').read() + \'\\n\' +\n-    open(\'CHANGES.rst\').read() + \'\\n\'\n+    open("README.rst").read() + "\\n" + "Contributors\\n"\n+    "============\\n"\n+    + "\\n"\n+    + open("CONTRIBUTORS.rst").read()\n+    + "\\n"\n+    + open("CHANGES.rst").read()\n+    + "\\n"\n )\n \n TEST_REQUIRES = [\n-    \'collective.MockMailHost\',\n-    \'plone.app.contenttypes\',\n-    \'plone.app.robotframework\',\n-    \'plone.app.testing [robot] >= 4.2.2\',  # ROBOT_TEST_LEVEL added\n-    \'plone.api\',\n-    \'requests\',\n-    \'plone.tiles\',\n-    \'mock\',\n+    "collective.MockMailHost",\n+    "plone.app.contenttypes",\n+    "plone.app.robotframework",\n+    "plone.app.testing [robot] >= 4.2.2",  # ROBOT_TEST_LEVEL added\n+    "plone.api",\n+    "requests",\n+    "plone.tiles",\n+    "mock",\n     \'archetypes.schemaextender ; python_version<"3"\',\n     \'Products.Archetypes ; python_version<"3"\',\n     \'Products.contentmigration ; python_version<"3"\',\n@@ -29,51 +31,53 @@\n     \'plone.app.collection ; python_version<"3"\',\n ]\n \n-setup(name=\'plone.restapi\',\n-      version=version,\n-      description="plone.restapi is a RESTful hypermedia API for Plone.",\n-      long_description=long_description,\n-      # Get more strings from\n-      # https://pypi.org/classifiers/\n-      classifiers=[\n-          "Development Status :: 5 - Production/Stable",\n-          "Environment :: Web Environment",\n-          "Framework :: Plone",\n-          "Framework :: Plone :: 4.3",\n-          "Framework :: Plone :: 5.0",\n-          "Framework :: Plone :: 5.1",\n-          "Framework :: Plone :: 5.2",\n-          "Intended Audience :: Developers",\n-          "Operating System :: OS Independent",\n-          "Programming Language :: Python",\n-          "Programming Language :: Python :: 2.7",\n-          "Programming Language :: Python :: 3.6",\n-          "Programming Language :: Python :: 3.7",\n-          "Topic :: Software Development :: Libraries :: Python Modules",\n-      ],\n-      keywords=\'plone rest restful hypermedia api json\',\n-      author=\'Timo Stollenwerk (kitconcept GmbH)\',\n-      author_email=\'tisto@plone.org\',\n-      url=\'https://github.com/plone/plone.restapi/\',\n-      license=\'gpl\',\n-      packages=find_packages(\'src\'),\n-      package_dir={\'\': \'src\'},\n-      namespace_packages=[\'plone\', ],\n-      include_package_data=True,\n-      zip_safe=False,\n-      install_requires=[\n-          \'setuptools\',\n-          \'python-dateutil\',\n-          \'plone.behavior>=1.1\',  # adds name to behavior directive\n-          \'plone.rest >= 1.0a6\',  # json renderer moved to plone.restapi\n-          \'plone.schema >= 1.2.0\',  # new json field\n-          \'PyJWT\',\n-          \'pytz\',\n-      ],\n-      extras_require={\'test\': TEST_REQUIRES},\n-      entry_points="""\n+setup(\n+    name="plone.restapi",\n+    version=version,\n+    description="plone.restapi is a RESTful hypermedia API for Plone.",\n+    long_description=long_description,\n+    # Get more strings from\n+    # https://pypi.org/classifiers/\n+    classifiers=[\n+        "Development Status :: 5 - Production/Stable",\n+        "Environment :: Web Environment",\n+        "Framework :: Plone",\n+        "Framework :: Plone :: 4.3",\n+        "Framework :: Plone :: 5.0",\n+        "Framework :: Plone :: 5.1",\n+        "Framework :: Plone :: 5.2",\n+        "Intended Audience :: Developers",\n+        "Operating System :: OS Independent",\n+        "Programming Language :: Python",\n+        "Programming Language :: Python :: 2.7",\n+        "Programming Language :: Python :: 3.6",\n+        "Programming Language :: Python :: 3.7",\n+        "Programming Language :: Python :: 3.8",\n+        "Topic :: Software Development :: Libraries :: Python Modules",\n+    ],\n+    keywords="plone rest restful hypermedia api json",\n+    author="Timo Stollenwerk (kitconcept GmbH)",\n+    author_email="tisto@plone.org",\n+    url="https://github.com/plone/plone.restapi/",\n+    license="gpl",\n+    packages=find_packages("src"),\n+    package_dir={"": "src"},\n+    namespace_packages=["plone"],\n+    include_package_data=True,\n+    zip_safe=False,\n+    install_requires=[\n+        "setuptools",\n+        "python-dateutil",\n+        "plone.behavior>=1.1",  # adds name to behavior directive\n+        "plone.rest >= 1.0a6",  # json renderer moved to plone.restapi\n+        "plone.schema >= 1.2.0",  # new json field\n+        "PyJWT",\n+        "pytz",\n+    ],\n+    extras_require={"test": TEST_REQUIRES},\n+    entry_points="""\n       # -*- Entry points: -*-\n       [z3c.autoinclude.plugin]\n       target = plone\n       """,\n-      )\n+)\ndiff --git a/versions.cfg b/versions.cfg\nindex 0090fbef..7f99dbaf 100644\n--- a/versions.cfg\n+++ b/versions.cfg\n@@ -8,12 +8,12 @@ zc.recipe.egg = 2.0.3\n plone.recipe.varnish = 1.3\n \n # Code-analysis\n-plone.recipe.codeanalysis = 3.0.1\n-coverage = 3.7.1\n-pep8 = 1.7.1\n-flake8 = 3.5.0\n-flake8-coding = 1.3.2\n-pycodestyle = 2.3.1\n+# plone.recipe.codeanalysis = 3.0.1\n+# coverage = 3.7.1\n+# pep8 = 1.7.1\n+flake8 = 3.7.9\n+# flake8-coding = 1.3.2\n+pycodestyle = 2.5.0\n \n # Release\n zest.releaser = 6.17.0\n'

