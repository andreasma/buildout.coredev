Repository: mockup


Branch: refs/heads/master
Date: 2020-02-06T11:42:05+01:00
Author: Laurent Lasudry (laulaz) <lasudry@gmail.com>
Commit: https://github.com/plone/mockup/commit/0e295445f5c52f207d1ec0e2b80e73c913066dfb

pat-querystring: Fix path widget for old dashed UIDs (plone.uuid &lt; 1.0.2)

This refs #939

Files changed:
A news/939.bugfix
M mockup/patterns/querystring/pattern.js

b'diff --git a/mockup/patterns/querystring/pattern.js b/mockup/patterns/querystring/pattern.js\nindex ca6b2bd9d..2327bc84a 100644\n--- a/mockup/patterns/querystring/pattern.js\n+++ b/mockup/patterns/querystring/pattern.js\n@@ -259,7 +259,7 @@ define([\n       self.createPathOperators();\n \n       // We must test if we have a "simple" path or an "advanced" one and change the widgets accordingly\n-      if (index === \'path\' && value && value !== \'.::1\' && value !== \'..::1\' && !value.match(/^[0-9a-f]{32}::-?[0-9]+$/)) {\n+      if (index === \'path\' && value && value !== \'.::1\' && value !== \'..::1\' && !value.match(/^[0-9a-f\\-]{32,36}::-?[0-9]+$/)) {\n         self.advanced = true;\n         self.resetPathOperators();\n       }\ndiff --git a/news/939.bugfix b/news/939.bugfix\nnew file mode 100644\nindex 000000000..727237ddf\n--- /dev/null\n+++ b/news/939.bugfix\n@@ -0,0 +1,2 @@\n+pat-querystring: Fix path widget for old dashed UIDs (plone.uuid < 1.0.2)\n+[laulaz]\n'

