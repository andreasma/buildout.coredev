Repository: diazo


Branch: refs/heads/master
Date: 2018-09-25T19:16:37+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/diazo/commit/6b6a2000c2094707fc9d206e1a90bd599d086995

Fix diazo.debug console with Python 2.7

Files changed:
M CHANGES.rst
M lib/diazo/runtrace.py
M setup.py

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex b31ff2f..5abafb6 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -14,7 +14,8 @@ New features:\n \n Bug fixes:\n \n-- *add item here*\n+- Fix diazo.debug console with Python 2.7.\n+  [pbauer]\n \n \n 1.2.9 (2018-06-20)\ndiff --git a/lib/diazo/runtrace.py b/lib/diazo/runtrace.py\nindex 99822b9..e07f236 100644\n--- a/lib/diazo/runtrace.py\n+++ b/lib/diazo/runtrace.py\n@@ -23,7 +23,7 @@ def log_to_xml_string(error_log):\n             l.message\n             for l\n             in error_log\n-            if l.message.startswith('<runtrace '),\n+            if l.message.startswith('<runtrace ')\n         ),\n     )\n \ndiff --git a/setup.py b/setup.py\nindex d8242fb..58f4580 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -49,6 +49,7 @@\n         'Programming Language :: Python :: 3.4',\n         'Programming Language :: Python :: 3.5',\n         'Programming Language :: Python :: 3.6',\n+        'Programming Language :: Python :: 3.7',\n         'Topic :: Internet :: WWW/HTTP',\n         'Topic :: Internet :: WWW/HTTP :: WSGI',\n         'Topic :: Internet :: WWW/HTTP :: WSGI :: Middleware',\n"

Repository: diazo


Branch: refs/heads/master
Date: 2018-09-25T19:24:02+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/diazo/commit/1b2dccec2c17b0c2c969667a0a98b287c9eaf78c

make code linter happy

Files changed:
M lib/diazo/runtrace.py

b'diff --git a/lib/diazo/runtrace.py b/lib/diazo/runtrace.py\nindex e07f236..44a50c6 100644\n--- a/lib/diazo/runtrace.py\n+++ b/lib/diazo/runtrace.py\n@@ -14,18 +14,12 @@\n \n \n def log_to_xml_string(error_log):\n+    msgs = [l.message for l in error_log if l.message.startswith(\'<runtrace \')]\n     return """\n <runtrace xmlns:css="http://namespaces.plone.org/diazo/css">\n     {message:s}\n </runtrace>\n-""".format(\n-        message=\'\'.join(\n-            l.message\n-            for l\n-            in error_log\n-            if l.message.startswith(\'<runtrace \')\n-        ),\n-    )\n+""".format(message=\'\'.join(msgs))\n \n \n def generate_runtrace(rules, error_log, rules_parser=None):\n'

Repository: diazo


Branch: refs/heads/master
Date: 2018-09-27T09:41:21+02:00
Author: Alessandro Pisa (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/diazo/commit/a3e9aed902c33dcbe40c4f0131a7461b5685eb97

Merge pull request #73 from plone/python37

Fix diazo.debug console with Python 2.7

Files changed:
M CHANGES.rst
M lib/diazo/runtrace.py
M setup.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex b31ff2f..5abafb6 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -14,7 +14,8 @@ New features:\n \n Bug fixes:\n \n-- *add item here*\n+- Fix diazo.debug console with Python 2.7.\n+  [pbauer]\n \n \n 1.2.9 (2018-06-20)\ndiff --git a/lib/diazo/runtrace.py b/lib/diazo/runtrace.py\nindex 99822b9..44a50c6 100644\n--- a/lib/diazo/runtrace.py\n+++ b/lib/diazo/runtrace.py\n@@ -14,18 +14,12 @@\n \n \n def log_to_xml_string(error_log):\n+    msgs = [l.message for l in error_log if l.message.startswith(\'<runtrace \')]\n     return """\n <runtrace xmlns:css="http://namespaces.plone.org/diazo/css">\n     {message:s}\n </runtrace>\n-""".format(\n-        message=\'\'.join(\n-            l.message\n-            for l\n-            in error_log\n-            if l.message.startswith(\'<runtrace \'),\n-        ),\n-    )\n+""".format(message=\'\'.join(msgs))\n \n \n def generate_runtrace(rules, error_log, rules_parser=None):\ndiff --git a/setup.py b/setup.py\nindex d8242fb..58f4580 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -49,6 +49,7 @@\n         \'Programming Language :: Python :: 3.4\',\n         \'Programming Language :: Python :: 3.5\',\n         \'Programming Language :: Python :: 3.6\',\n+        \'Programming Language :: Python :: 3.7\',\n         \'Topic :: Internet :: WWW/HTTP\',\n         \'Topic :: Internet :: WWW/HTTP :: WSGI\',\n         \'Topic :: Internet :: WWW/HTTP :: WSGI :: Middleware\',\n'

