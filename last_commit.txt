Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2019-02-22T09:29:12+01:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.upgrade/commit/9e6d23f680f651ebfa483eb25bb0d4b78f50453c

add bbb for CSSRegistryTool and JSRegistryTool to fix upgrade from 5.0 to 5.2

Files changed:
M plone/app/upgrade/__init__.py
M plone/app/upgrade/bbb.py

b'diff --git a/plone/app/upgrade/__init__.py b/plone/app/upgrade/__init__.py\nindex beb03f6d..0314b5e8 100644\n--- a/plone/app/upgrade/__init__.py\n+++ b/plone/app/upgrade/__init__.py\n@@ -159,6 +159,11 @@\n     alias_module(\'plone.app.folder.nogopip.GopipIndex\', GopipIndex)\n \n \n+if not IS_PRODUCT_RESOURCE_REGISTRIES_INSTALLED:\n+    sys.modules[\'Products.ResourceRegistries.tools.CSSRegistry\'] = bbb\n+    sys.modules[\'Products.ResourceRegistries.tools.JSRegistry\'] = bbb\n+\n+\n class HiddenProducts(object):\n     """This hides the upgrade profiles from the quick installer tool."""\n \ndiff --git a/plone/app/upgrade/bbb.py b/plone/app/upgrade/bbb.py\nindex 89c3fc7a..92755bd7 100644\n--- a/plone/app/upgrade/bbb.py\n+++ b/plone/app/upgrade/bbb.py\n@@ -11,6 +11,8 @@\n UndoTool = SimpleItem\n TinyMCE = SimpleItem\n PasswordResetTool = SimpleItem\n+CSSRegistryTool = SimpleItem\n+JSRegistryTool = SimpleItem\n \n \n class ILanguageTool(Interface):\n'

Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2019-02-22T09:31:27+01:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.upgrade/commit/0c6623d369e5ad1a3710107dcea29240185d0aeb

add changenote

Files changed:
A news/200.bugfix

b'diff --git a/news/200.bugfix b/news/200.bugfix\nnew file mode 100644\nindex 00000000..70339cbd\n--- /dev/null\n+++ b/news/200.bugfix\n@@ -0,0 +1 @@\n+Add bbb for CSSRegistryTool and JSRegistryTool to fix upgrade from 5.0 to 5.2\n\\ No newline at end of file\n'

Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2019-02-27T21:13:26+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.upgrade/commit/47bec0416c6b65814eb641aabda15662fa95b815

Merge pull request #200 from plone/add_bbb_for_old_resourceregistry

add bbb for CSSRegistryTool and JSRegistryTool

Files changed:
A news/200.bugfix
M plone/app/upgrade/__init__.py
M plone/app/upgrade/bbb.py

b'diff --git a/news/200.bugfix b/news/200.bugfix\nnew file mode 100644\nindex 00000000..70339cbd\n--- /dev/null\n+++ b/news/200.bugfix\n@@ -0,0 +1 @@\n+Add bbb for CSSRegistryTool and JSRegistryTool to fix upgrade from 5.0 to 5.2\n\\ No newline at end of file\ndiff --git a/plone/app/upgrade/__init__.py b/plone/app/upgrade/__init__.py\nindex beb03f6d..0314b5e8 100644\n--- a/plone/app/upgrade/__init__.py\n+++ b/plone/app/upgrade/__init__.py\n@@ -159,6 +159,11 @@\n     alias_module(\'plone.app.folder.nogopip.GopipIndex\', GopipIndex)\n \n \n+if not IS_PRODUCT_RESOURCE_REGISTRIES_INSTALLED:\n+    sys.modules[\'Products.ResourceRegistries.tools.CSSRegistry\'] = bbb\n+    sys.modules[\'Products.ResourceRegistries.tools.JSRegistry\'] = bbb\n+\n+\n class HiddenProducts(object):\n     """This hides the upgrade profiles from the quick installer tool."""\n \ndiff --git a/plone/app/upgrade/bbb.py b/plone/app/upgrade/bbb.py\nindex 89c3fc7a..92755bd7 100644\n--- a/plone/app/upgrade/bbb.py\n+++ b/plone/app/upgrade/bbb.py\n@@ -11,6 +11,8 @@\n UndoTool = SimpleItem\n TinyMCE = SimpleItem\n PasswordResetTool = SimpleItem\n+CSSRegistryTool = SimpleItem\n+JSRegistryTool = SimpleItem\n \n \n class ILanguageTool(Interface):\n'

