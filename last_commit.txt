Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2019-01-24T18:41:28+02:00
Author: MrTango (MrTango) <md@derico.de>
Commit: https://github.com/plone/plone.app.upgrade/commit/b66b6429b46491dce249f60339bf5be757a3286f

Add missing upgrade step for CMFEditions

Files changed:
A news/188.bugfix
A plone/app/upgrade/v51/profiles/to_516/repositorytool.xml
A plone/app/upgrade/v52/profiles/to_alpha1/repositorytool.xml
M plone/app/upgrade/v51/profiles.zcml

b'diff --git a/news/188.bugfix b/news/188.bugfix\nnew file mode 100644\nindex 00000000..97a7d339\n--- /dev/null\n+++ b/news/188.bugfix\n@@ -0,0 +1 @@\n+Add missing upgrade step for CMFEditions [MrTango]\n\\ No newline at end of file\ndiff --git a/plone/app/upgrade/v51/profiles.zcml b/plone/app/upgrade/v51/profiles.zcml\nindex e9d5e0b9..9e715261 100644\n--- a/plone/app/upgrade/v51/profiles.zcml\n+++ b/plone/app/upgrade/v51/profiles.zcml\n@@ -104,4 +104,12 @@\n       provides="Products.GenericSetup.interfaces.EXTENSION"\n       />\n \n+  <genericsetup:registerProfile\n+      name="to516"\n+      title="Upgrade profile for Plone 5.1.5 to Plone 5.1.6"\n+      description=""\n+      directory="profiles/to_516"\n+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      />\n </configure>\ndiff --git a/plone/app/upgrade/v51/profiles/to_516/repositorytool.xml b/plone/app/upgrade/v51/profiles/to_516/repositorytool.xml\nnew file mode 100644\nindex 00000000..d80ae8cf\n--- /dev/null\n+++ b/plone/app/upgrade/v51/profiles/to_516/repositorytool.xml\n@@ -0,0 +1,35 @@\n+<?xml version="1.0"?>\n+<repositorytool>\n+ <policies purge="true">\n+  <policy name="at_edit_autoversion"\n+     title="Create version on edit (AT objects only)"\n+     class="Products.CMFEditions.VersionPolicies.ATVersionOnEditPolicy"/>\n+  <policy name="version_on_revert" title="Create version on version revert"/>\n+ </policies>\n+ <policymap purge="true">\n+  <type name="ATDocument">\n+   <policy name="at_edit_autoversion"/>\n+   <policy name="version_on_revert"/>\n+  </type>\n+  <type name="ATNewsItem">\n+   <policy name="at_edit_autoversion"/>\n+   <policy name="version_on_revert"/>\n+  </type>\n+  <type name="Document">\n+   <policy name="at_edit_autoversion"/>\n+   <policy name="version_on_revert"/>\n+  </type>\n+  <type name="Event">\n+   <policy name="at_edit_autoversion"/>\n+   <policy name="version_on_revert"/>\n+  </type>\n+  <type name="Link">\n+   <policy name="at_edit_autoversion"/>\n+   <policy name="version_on_revert"/>\n+  </type>\n+  <type name="News Item">\n+   <policy name="at_edit_autoversion"/>\n+   <policy name="version_on_revert"/>\n+  </type>\n+ </policymap>\n+</repositorytool>\ndiff --git a/plone/app/upgrade/v52/profiles/to_alpha1/repositorytool.xml b/plone/app/upgrade/v52/profiles/to_alpha1/repositorytool.xml\nnew file mode 100644\nindex 00000000..d80ae8cf\n--- /dev/null\n+++ b/plone/app/upgrade/v52/profiles/to_alpha1/repositorytool.xml\n@@ -0,0 +1,35 @@\n+<?xml version="1.0"?>\n+<repositorytool>\n+ <policies purge="true">\n+  <policy name="at_edit_autoversion"\n+     title="Create version on edit (AT objects only)"\n+     class="Products.CMFEditions.VersionPolicies.ATVersionOnEditPolicy"/>\n+  <policy name="version_on_revert" title="Create version on version revert"/>\n+ </policies>\n+ <policymap purge="true">\n+  <type name="ATDocument">\n+   <policy name="at_edit_autoversion"/>\n+   <policy name="version_on_revert"/>\n+  </type>\n+  <type name="ATNewsItem">\n+   <policy name="at_edit_autoversion"/>\n+   <policy name="version_on_revert"/>\n+  </type>\n+  <type name="Document">\n+   <policy name="at_edit_autoversion"/>\n+   <policy name="version_on_revert"/>\n+  </type>\n+  <type name="Event">\n+   <policy name="at_edit_autoversion"/>\n+   <policy name="version_on_revert"/>\n+  </type>\n+  <type name="Link">\n+   <policy name="at_edit_autoversion"/>\n+   <policy name="version_on_revert"/>\n+  </type>\n+  <type name="News Item">\n+   <policy name="at_edit_autoversion"/>\n+   <policy name="version_on_revert"/>\n+  </type>\n+ </policymap>\n+</repositorytool>\n'

Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2019-02-05T11:35:01+01:00
Author: agitator (agitator) <agitator@users.noreply.github.com>
Commit: https://github.com/plone/plone.app.upgrade/commit/1e8b5e7ebbd16e8b62a7268724622017af42ec0f

Merge pull request #189 from plone/mrtango-fix-cmfeditions-64

Add missing upgrade step for CMFEditions

Files changed:
A news/188.bugfix
A plone/app/upgrade/v51/profiles/to_516/repositorytool.xml
A plone/app/upgrade/v52/profiles/to_alpha1/repositorytool.xml
M plone/app/upgrade/v51/profiles.zcml

b'diff --git a/news/188.bugfix b/news/188.bugfix\nnew file mode 100644\nindex 00000000..97a7d339\n--- /dev/null\n+++ b/news/188.bugfix\n@@ -0,0 +1 @@\n+Add missing upgrade step for CMFEditions [MrTango]\n\\ No newline at end of file\ndiff --git a/plone/app/upgrade/v51/profiles.zcml b/plone/app/upgrade/v51/profiles.zcml\nindex e9d5e0b9..9e715261 100644\n--- a/plone/app/upgrade/v51/profiles.zcml\n+++ b/plone/app/upgrade/v51/profiles.zcml\n@@ -104,4 +104,12 @@\n       provides="Products.GenericSetup.interfaces.EXTENSION"\n       />\n \n+  <genericsetup:registerProfile\n+      name="to516"\n+      title="Upgrade profile for Plone 5.1.5 to Plone 5.1.6"\n+      description=""\n+      directory="profiles/to_516"\n+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      />\n </configure>\ndiff --git a/plone/app/upgrade/v51/profiles/to_516/repositorytool.xml b/plone/app/upgrade/v51/profiles/to_516/repositorytool.xml\nnew file mode 100644\nindex 00000000..d80ae8cf\n--- /dev/null\n+++ b/plone/app/upgrade/v51/profiles/to_516/repositorytool.xml\n@@ -0,0 +1,35 @@\n+<?xml version="1.0"?>\n+<repositorytool>\n+ <policies purge="true">\n+  <policy name="at_edit_autoversion"\n+     title="Create version on edit (AT objects only)"\n+     class="Products.CMFEditions.VersionPolicies.ATVersionOnEditPolicy"/>\n+  <policy name="version_on_revert" title="Create version on version revert"/>\n+ </policies>\n+ <policymap purge="true">\n+  <type name="ATDocument">\n+   <policy name="at_edit_autoversion"/>\n+   <policy name="version_on_revert"/>\n+  </type>\n+  <type name="ATNewsItem">\n+   <policy name="at_edit_autoversion"/>\n+   <policy name="version_on_revert"/>\n+  </type>\n+  <type name="Document">\n+   <policy name="at_edit_autoversion"/>\n+   <policy name="version_on_revert"/>\n+  </type>\n+  <type name="Event">\n+   <policy name="at_edit_autoversion"/>\n+   <policy name="version_on_revert"/>\n+  </type>\n+  <type name="Link">\n+   <policy name="at_edit_autoversion"/>\n+   <policy name="version_on_revert"/>\n+  </type>\n+  <type name="News Item">\n+   <policy name="at_edit_autoversion"/>\n+   <policy name="version_on_revert"/>\n+  </type>\n+ </policymap>\n+</repositorytool>\ndiff --git a/plone/app/upgrade/v52/profiles/to_alpha1/repositorytool.xml b/plone/app/upgrade/v52/profiles/to_alpha1/repositorytool.xml\nnew file mode 100644\nindex 00000000..d80ae8cf\n--- /dev/null\n+++ b/plone/app/upgrade/v52/profiles/to_alpha1/repositorytool.xml\n@@ -0,0 +1,35 @@\n+<?xml version="1.0"?>\n+<repositorytool>\n+ <policies purge="true">\n+  <policy name="at_edit_autoversion"\n+     title="Create version on edit (AT objects only)"\n+     class="Products.CMFEditions.VersionPolicies.ATVersionOnEditPolicy"/>\n+  <policy name="version_on_revert" title="Create version on version revert"/>\n+ </policies>\n+ <policymap purge="true">\n+  <type name="ATDocument">\n+   <policy name="at_edit_autoversion"/>\n+   <policy name="version_on_revert"/>\n+  </type>\n+  <type name="ATNewsItem">\n+   <policy name="at_edit_autoversion"/>\n+   <policy name="version_on_revert"/>\n+  </type>\n+  <type name="Document">\n+   <policy name="at_edit_autoversion"/>\n+   <policy name="version_on_revert"/>\n+  </type>\n+  <type name="Event">\n+   <policy name="at_edit_autoversion"/>\n+   <policy name="version_on_revert"/>\n+  </type>\n+  <type name="Link">\n+   <policy name="at_edit_autoversion"/>\n+   <policy name="version_on_revert"/>\n+  </type>\n+  <type name="News Item">\n+   <policy name="at_edit_autoversion"/>\n+   <policy name="version_on_revert"/>\n+  </type>\n+ </policymap>\n+</repositorytool>\n'

