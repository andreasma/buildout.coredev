Repository: plone.app.event


Branch: refs/heads/master
Date: 2018-09-20T09:06:08+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.event/commit/b0c67a771b8dce76a1698c6f5efdab94dca082a5

set title as unicode

Files changed:
M plone/app/event/tests/test_dx_behaviors.py
M plone/app/event/tests/test_portlet_calendar.py
M plone/app/event/tests/test_portlet_events.py

b'diff --git a/plone/app/event/tests/test_dx_behaviors.py b/plone/app/event/tests/test_dx_behaviors.py\nindex f8aca19c..560d23b5 100644\n--- a/plone/app/event/tests/test_dx_behaviors.py\n+++ b/plone/app/event/tests/test_dx_behaviors.py\n@@ -73,7 +73,7 @@ def test_defaults(self):\n         self.portal.invokeFactory(\n             \'plone.app.event.dx.event\',\n             \'event1\',\n-            title="event1",\n+            title=u"event1",\n         )\n \n         TRY 2:\n@@ -81,7 +81,7 @@ def test_defaults(self):\n         e1 = createContentInContainer(\n             self.portal,\n             \'plone.app.event.dx.event\',\n-            \'event1\'\n+            u\'event1\'\n         )\n \n         TRY 3:\n@@ -237,7 +237,7 @@ def test_event_accessor(self):\n         e1 = createContentInContainer(\n             self.portal,\n             \'plone.app.event.dx.event\',\n-            title=\'event1\',\n+            title=u\'event1\',\n             start=tz.localize(datetime(2011, 11, 11, 11, 0)),\n             end=tz.localize(datetime(2011, 11, 11, 12, 0)),\n         )\n@@ -268,7 +268,7 @@ def test_event_accessor_whole_day__open_end(self):\n         e1 = createContentInContainer(\n             self.portal,\n             \'plone.app.event.dx.event\',\n-            title=\'event1\',\n+            title=u\'event1\',\n             start=start,\n             end=end\n         )\n@@ -298,7 +298,7 @@ def test_event_accessor__sync_uid(self):\n         e1 = createContentInContainer(\n             self.portal,\n             \'plone.app.event.dx.event\',\n-            title=\'event1\'\n+            title=u\'event1\'\n         )\n         acc = IEventAccessor(e1)\n \n@@ -324,7 +324,7 @@ def test_event_accessor__start_end(self):\n         e1 = createContentInContainer(\n             self.portal,\n             \'plone.app.event.dx.event\',\n-            title=\'event1\'\n+            title=u\'event1\'\n         )\n \n         dt = datetime(2161, 1, 1)  # United Federation of Planets\n@@ -384,7 +384,7 @@ def test_start_end_dates_indexed(self):\n         e1 = createContentInContainer(\n             self.portal,\n             \'plone.app.event.dx.event\',\n-            title=\'event1\',\n+            title=u\'event1\',\n             start=start,\n             end=end\n         )\n@@ -403,7 +403,7 @@ def test_recurrence_indexing(self):\n         e1 = createContentInContainer(\n             self.portal,\n             \'plone.app.event.dx.event\',\n-            title=\'event1\',\n+            title=u\'event1\',\n             start=tz.localize(datetime(2011, 11, 11, 11, 0)),\n             end=tz.localize(datetime(2011, 11, 11, 12, 0)),\n         )\n@@ -562,7 +562,7 @@ def test_migrate_fields(self):\n         e1 = createContentInContainer(\n             self.portal,\n             \'Event\',\n-            title=\'event1\',\n+            title=u\'event1\',\n             start=tz.localize(datetime(2011, 11, 11, 11, 0)),\n             end=tz.localize(datetime(2011, 11, 11, 12, 0)),\n         )\n@@ -610,7 +610,7 @@ def test_no_overwrite(self):\n         e1 = createContentInContainer(\n             self.portal,\n             \'Event\',\n-            title=\'event1\',\n+            title=u\'event1\',\n             start=tz.localize(datetime(2011, 11, 11, 11, 0)),\n             end=tz.localize(datetime(2011, 11, 11, 12, 0)),\n         )\ndiff --git a/plone/app/event/tests/test_portlet_calendar.py b/plone/app/event/tests/test_portlet_calendar.py\nindex 7e78d86a..618bb858 100644\n--- a/plone/app/event/tests/test_portlet_calendar.py\n+++ b/plone/app/event/tests/test_portlet_calendar.py\n@@ -132,10 +132,10 @@ def test_portlet_config(self):\n         end = start + timedelta(hours=1)\n \n         e1 = createContentInContainer(\n-            self.portal, PTYPE, title=\'e1\', start=start, end=end)\n+            self.portal, PTYPE, title=u\'e1\', start=start, end=end)\n         self.portal.invokeFactory(\'Folder\', \'eventfolder\')\n         createContentInContainer(\n-            self.portal.eventfolder, PTYPE, title=\'e2\', start=start, end=end)\n+            self.portal.eventfolder, PTYPE, title=u\'e2\', start=start, end=end)\n         self.portal.portal_workflow.doActionFor(e1, \'publish\')\n \n         r = self.renderer(assignment=portlet_calendar.Assignment(\n@@ -183,7 +183,7 @@ def test_long_event(self):\n         end = start + timedelta(days=2)\n \n         e1 = createContentInContainer(\n-            self.portal, PTYPE, title=\'e1\', start=start, end=end)\n+            self.portal, PTYPE, title=u\'e1\', start=start, end=end)\n         self.portal.portal_workflow.doActionFor(e1, \'publish\')\n \n         r = self.renderer(\n@@ -208,7 +208,7 @@ def test_event_created_last_day_of_month_invalidate_cache(self):\n         end = tz.localize(datetime(year, month, day, 23, 30, 0))\n         # Event starts at 23:00 and ends at 23:30\n         createContentInContainer(\n-            self.portal, PTYPE, title=\'e1\', start=start, end=end\n+            self.portal, PTYPE, title=u\'e1\', start=start, end=end\n         )\n \n         # Try to render the calendar portlet again, it must be different Now\ndiff --git a/plone/app/event/tests/test_portlet_events.py b/plone/app/event/tests/test_portlet_events.py\nindex 35f47379..db3cc01f 100644\n--- a/plone/app/event/tests/test_portlet_events.py\n+++ b/plone/app/event/tests/test_portlet_events.py\n@@ -157,13 +157,13 @@ def test_portlet_event_renderer__get_events(self):\n \n         e1 = createContentInContainer(\n             self.portal, PTYPE,\n-            id=\'e1\', title=\'e1\', start=start, end=end)\n+            id=\'e1\', title=u\'e1\', start=start, end=end)\n         self.portal.portal_workflow.doActionFor(e1, \'publish\')\n \n         self.portal.invokeFactory(\'Folder\', \'eventfolder\')\n         createContentInContainer(\n             self.portal.eventfolder, PTYPE,\n-            id=\'e2\', title=\'e2\', start=start, end=end)\n+            id=\'e2\', title=u\'e2\', start=start, end=end)\n \n         r = self.renderer(assignment=portlet_events.Assignment(\n             count=5, state=(\'draft\',)))\n@@ -199,10 +199,10 @@ def test_portlet_event_renderer__recurring(self):\n         start = localized_now() + timedelta(days=1)\n \n         e1 = createContentInContainer(\n-            self.portal, PTYPE, id=\'e1\', title=\'Event 1\', start=start,\n+            self.portal, PTYPE, id=\'e1\', title=u\'Event 1\', start=start,\n             recurrence=\'RRULE:FREQ=WEEKLY;COUNT=10\')\n         createContentInContainer(\n-            self.portal, PTYPE, id=\'e1\', title=\'Event 1\', start=start,\n+            self.portal, PTYPE, id=\'e1\', title=u\'Event 1\', start=start,\n             recurrence=\'RRULE:FREQ=DAILY;COUNT=3\')\n \n         self.portal.portal_workflow.doActionFor(e1, \'publish\')\n'

