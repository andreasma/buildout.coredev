Repository: plone.app.contentmenu


Branch: refs/heads/master
Date: 2019-06-20T13:57:20+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.contentmenu/commit/6f1a748fabcd6db9947b6aa767161bf45e830db0

Add support for Python 3.8

Files changed:
A news/25.feature
M plone/app/contentmenu/menu.py
M setup.py

b"diff --git a/news/25.feature b/news/25.feature\nnew file mode 100644\nindex 0000000..c0eea9e\n--- /dev/null\n+++ b/news/25.feature\n@@ -0,0 +1 @@\n+Add support for Python 3.8 [pbauer]\n\\ No newline at end of file\ndiff --git a/plone/app/contentmenu/menu.py b/plone/app/contentmenu/menu.py\nindex af37274..4203374 100644\n--- a/plone/app/contentmenu/menu.py\n+++ b/plone/app/contentmenu/menu.py\n@@ -1,7 +1,6 @@\n # -*- coding: utf-8 -*-\n from AccessControl import getSecurityManager\n from Acquisition import aq_base\n-from cgi import escape\n from operator import itemgetter\n from plone.app.content.browser.folderfactories import _allowedTypes\n from plone.app.contentmenu import PloneMessageFactory as _\n@@ -40,6 +39,11 @@\n PMF = _  # used for dynamic messages we don't want to extract\n \n \n+try:\n+    from html import escape\n+except ImportError:\n+    from cgi import escape\n+\n try:\n     pkg_resources.get_distribution('Products.CMFPlacefulWorkflow')\n     from Products.CMFPlacefulWorkflow.permissions import ManageWorkflowPolicies\ndiff --git a/setup.py b/setup.py\nindex cc6c78f..7cbe700 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -24,6 +24,7 @@\n         'Programming Language :: Python :: 2.7',\n         'Programming Language :: Python :: 3.6',\n         'Programming Language :: Python :: 3.7',\n+        'Programming Language :: Python :: 3.8',\n     ],\n     keywords='plone contentmenu menu',\n     author='Plone Foundation',\n"

Repository: plone.app.contentmenu


Branch: refs/heads/master
Date: 2019-06-21T12:06:30+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.contentmenu/commit/4a12694c3ea93aeccb1c7d85cd4542361088c894

Merge pull request #25 from plone/python38

Add support for Python 3.8

Files changed:
A news/25.feature
M plone/app/contentmenu/menu.py
M setup.py

b"diff --git a/news/25.feature b/news/25.feature\nnew file mode 100644\nindex 0000000..c0eea9e\n--- /dev/null\n+++ b/news/25.feature\n@@ -0,0 +1 @@\n+Add support for Python 3.8 [pbauer]\n\\ No newline at end of file\ndiff --git a/plone/app/contentmenu/menu.py b/plone/app/contentmenu/menu.py\nindex af37274..4203374 100644\n--- a/plone/app/contentmenu/menu.py\n+++ b/plone/app/contentmenu/menu.py\n@@ -1,7 +1,6 @@\n # -*- coding: utf-8 -*-\n from AccessControl import getSecurityManager\n from Acquisition import aq_base\n-from cgi import escape\n from operator import itemgetter\n from plone.app.content.browser.folderfactories import _allowedTypes\n from plone.app.contentmenu import PloneMessageFactory as _\n@@ -40,6 +39,11 @@\n PMF = _  # used for dynamic messages we don't want to extract\n \n \n+try:\n+    from html import escape\n+except ImportError:\n+    from cgi import escape\n+\n try:\n     pkg_resources.get_distribution('Products.CMFPlacefulWorkflow')\n     from Products.CMFPlacefulWorkflow.permissions import ManageWorkflowPolicies\ndiff --git a/setup.py b/setup.py\nindex cc6c78f..7cbe700 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -24,6 +24,7 @@\n         'Programming Language :: Python :: 2.7',\n         'Programming Language :: Python :: 3.6',\n         'Programming Language :: Python :: 3.7',\n+        'Programming Language :: Python :: 3.8',\n     ],\n     keywords='plone contentmenu menu',\n     author='Plone Foundation',\n"

