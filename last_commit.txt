Repository: plone.app.caching


Branch: refs/heads/master
Date: 2018-12-11T12:13:24+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.caching/commit/037423b1072cc59e9747dd7eff61fc7473f14424

show a warning if caching is disabled but purging not

Files changed:
M CHANGES.rst
M plone/app/caching/browser/controlpanel.py

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex 7ce0e17..edeca40 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -14,7 +14,8 @@ New features:\n \n Bug fixes:\n \n-- *add item here*\n+- Warn after save if caching was disabled while purging is still enabled.\n+  [jensens]\n \n \n 1.2.22 (2018-09-23)\ndiff --git a/plone/app/caching/browser/controlpanel.py b/plone/app/caching/browser/controlpanel.py\nindex 0936e04..7f64146 100644\n--- a/plone/app/caching/browser/controlpanel.py\n+++ b/plone/app/caching/browser/controlpanel.py\n@@ -344,6 +344,11 @@ def processSave(self):\n             ramCacheCleanupInterval,\n         )\n \n+        IStatusMessage(self.request).addStatusMessage(\n+            _(u'Purging ist still enabled while caching is disabled!'),\n+            'warn',\n+        )\n+\n         IStatusMessage(self.request).addStatusMessage(\n             _(u'Changes saved.'),\n             'info',\n"

Repository: plone.app.caching


Branch: refs/heads/master
Date: 2018-12-13T16:39:32+01:00
Author: agitator (agitator) <agitator@users.noreply.github.com>
Commit: https://github.com/plone/plone.app.caching/commit/6e1a119c874300ddf2c075dc66dce8632ffd1915

Update plone/app/caching/browser/controlpanel.py

Co-Authored-By: jensens &lt;jk@kleinundpartner.at&gt;

Files changed:
M plone/app/caching/browser/controlpanel.py

b"diff --git a/plone/app/caching/browser/controlpanel.py b/plone/app/caching/browser/controlpanel.py\nindex 7f64146..3d00190 100644\n--- a/plone/app/caching/browser/controlpanel.py\n+++ b/plone/app/caching/browser/controlpanel.py\n@@ -346,7 +346,7 @@ def processSave(self):\n \n         IStatusMessage(self.request).addStatusMessage(\n             _(u'Purging ist still enabled while caching is disabled!'),\n-            'warn',\n+            'warning',\n         )\n \n         IStatusMessage(self.request).addStatusMessage(\n"

Repository: plone.app.caching


Branch: refs/heads/master
Date: 2018-12-13T16:40:53+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.caching/commit/88b076537321a0043c4ef83f1e80ede8be0aef98

readd missing condition

Files changed:
M plone/app/caching/browser/controlpanel.py

b"diff --git a/plone/app/caching/browser/controlpanel.py b/plone/app/caching/browser/controlpanel.py\nindex 3d00190..0e9797d 100644\n--- a/plone/app/caching/browser/controlpanel.py\n+++ b/plone/app/caching/browser/controlpanel.py\n@@ -344,10 +344,11 @@ def processSave(self):\n             ramCacheCleanupInterval,\n         )\n \n-        IStatusMessage(self.request).addStatusMessage(\n-            _(u'Purging ist still enabled while caching is disabled!'),\n-            'warning',\n-        )\n+        if not enabled and purgingEnabled:\n+            IStatusMessage(self.request).addStatusMessage(\n+                _(u'Purging ist still enabled while caching is disabled!'),\n+                'warning',\n+            )\n \n         IStatusMessage(self.request).addStatusMessage(\n             _(u'Changes saved.'),\n"

Repository: plone.app.caching


Branch: refs/heads/master
Date: 2018-12-13T16:48:01+01:00
Author: agitator (agitator) <agitator@users.noreply.github.com>
Commit: https://github.com/plone/plone.app.caching/commit/cdc67c92b669d482695267231283f3ab84b5a1ad

Merge pull request #46 from plone/jensens/warn-purging-but-no-caching

Show a warning if caching is disabled but purging not

Files changed:
M CHANGES.rst
M plone/app/caching/browser/controlpanel.py

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex 7ce0e17..edeca40 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -14,7 +14,8 @@ New features:\n \n Bug fixes:\n \n-- *add item here*\n+- Warn after save if caching was disabled while purging is still enabled.\n+  [jensens]\n \n \n 1.2.22 (2018-09-23)\ndiff --git a/plone/app/caching/browser/controlpanel.py b/plone/app/caching/browser/controlpanel.py\nindex 0936e04..0e9797d 100644\n--- a/plone/app/caching/browser/controlpanel.py\n+++ b/plone/app/caching/browser/controlpanel.py\n@@ -344,6 +344,12 @@ def processSave(self):\n             ramCacheCleanupInterval,\n         )\n \n+        if not enabled and purgingEnabled:\n+            IStatusMessage(self.request).addStatusMessage(\n+                _(u'Purging ist still enabled while caching is disabled!'),\n+                'warning',\n+            )\n+\n         IStatusMessage(self.request).addStatusMessage(\n             _(u'Changes saved.'),\n             'info',\n"

