Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2019-02-06T19:28:10+01:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.upgrade/commit/c9962d87fa1a9ac16e45abbdd38e1a30f8131d33

Fix upgrading 5.0.x to 5.2 during vocabulary population after GopipIndex was moved to plone.folder (Fixes https://github.com/plone/Products.CMFPlone/issues/2728)

Files changed:
M plone/app/upgrade/__init__.py

b'diff --git a/plone/app/upgrade/__init__.py b/plone/app/upgrade/__init__.py\nindex 61b87a15..1e11d673 100644\n--- a/plone/app/upgrade/__init__.py\n+++ b/plone/app/upgrade/__init__.py\n@@ -144,6 +144,14 @@\n     sys.modules[\'Products.PasswordResetTool.PasswordResetTool\'] = bbb\n \n \n+try:\n+    from plone.app.folder.nogopip import GopipIndex\n+    GopipIndex  # pyflakes\n+except ImportError:\n+    from plone.folder.nogopip import GopipIndex\n+    alias_module(\'plone.app.folder.nogopip.GopipIndex\', GopipIndex)\n+\n+\n class HiddenProducts(object):\n     """This hides the upgrade profiles from the quick installer tool."""\n \n'

Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2019-02-06T20:52:08+01:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.upgrade/commit/9112a5ecd133603e78e9bed172a53c5da43ea2aa

add changenote

Files changed:
A news/193.bugfix

b'diff --git a/news/193.bugfix b/news/193.bugfix\nnew file mode 100644\nindex 00000000..1e631f0d\n--- /dev/null\n+++ b/news/193.bugfix\n@@ -0,0 +1 @@\n+Add alias for GopipIndex to fix migrations to 5.2\n\\ No newline at end of file\n'

Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2019-02-06T23:03:35+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.upgrade/commit/0f5222a30fa2d6657ada0d187e2ad51ba6e5a069

Merge pull request #193 from plone/fix_migration_gopiperror

Fix upgrading 5.0.x to 5.2

Files changed:
A news/193.bugfix
M plone/app/upgrade/__init__.py

b'diff --git a/news/193.bugfix b/news/193.bugfix\nnew file mode 100644\nindex 00000000..1e631f0d\n--- /dev/null\n+++ b/news/193.bugfix\n@@ -0,0 +1 @@\n+Add alias for GopipIndex to fix migrations to 5.2\n\\ No newline at end of file\ndiff --git a/plone/app/upgrade/__init__.py b/plone/app/upgrade/__init__.py\nindex 61b87a15..1e11d673 100644\n--- a/plone/app/upgrade/__init__.py\n+++ b/plone/app/upgrade/__init__.py\n@@ -144,6 +144,14 @@\n     sys.modules[\'Products.PasswordResetTool.PasswordResetTool\'] = bbb\n \n \n+try:\n+    from plone.app.folder.nogopip import GopipIndex\n+    GopipIndex  # pyflakes\n+except ImportError:\n+    from plone.folder.nogopip import GopipIndex\n+    alias_module(\'plone.app.folder.nogopip.GopipIndex\', GopipIndex)\n+\n+\n class HiddenProducts(object):\n     """This hides the upgrade profiles from the quick installer tool."""\n \n'

