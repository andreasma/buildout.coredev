Repository: plone.app.linkintegrity


Branch: refs/heads/master
Date: 2018-06-14T13:50:12+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.linkintegrity/commit/9d7b25690d8c6665e325e492636d1d7ffd8e2c19

Fix test to work with merged plone.login.

Files changed:
M CHANGES.rst
M plone/app/linkintegrity/tests/test_functional.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 481be56..e03ff57 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,6 +14,9 @@ New features:
 
 Bug fixes:
 
+- Fix test to work with merged plone.login.
+  [jensens]
+
 - Python 3 compatibility.
   [pbauer]
 
diff --git a/plone/app/linkintegrity/tests/test_functional.py b/plone/app/linkintegrity/tests/test_functional.py
index 3880e9d..2bef8af 100644
--- a/plone/app/linkintegrity/tests/test_functional.py
+++ b/plone/app/linkintegrity/tests/test_functional.py
@@ -174,7 +174,7 @@ def test_removal_with_cookie_auth(self):
 
         # At this point we shouldn't be able to look at the folder
         # contents (as an anonymous user):
-        self.assertIn('require_login?came_from', browser.url)
+        self.assertIn('login?came_from', browser.url)
 
         # So we log in via the regular plone login form and additionally check
         # that there is no 'authorization' header set afterwards:


Repository: plone.app.linkintegrity


Branch: refs/heads/master
Date: 2018-06-14T16:38:56+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.linkintegrity/commit/489d01688c0b055edc92eb2769ec6508db34388a

Merge pull request #67 from plone/merge-plone-login

Fix test to work with merged plone.login.

Files changed:
M CHANGES.rst
M plone/app/linkintegrity/tests/test_functional.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 481be56..e03ff57 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,6 +14,9 @@ New features:
 
 Bug fixes:
 
+- Fix test to work with merged plone.login.
+  [jensens]
+
 - Python 3 compatibility.
   [pbauer]
 
diff --git a/plone/app/linkintegrity/tests/test_functional.py b/plone/app/linkintegrity/tests/test_functional.py
index 3880e9d..2bef8af 100644
--- a/plone/app/linkintegrity/tests/test_functional.py
+++ b/plone/app/linkintegrity/tests/test_functional.py
@@ -174,7 +174,7 @@ def test_removal_with_cookie_auth(self):
 
         # At this point we shouldn't be able to look at the folder
         # contents (as an anonymous user):
-        self.assertIn('require_login?came_from', browser.url)
+        self.assertIn('login?came_from', browser.url)
 
         # So we log in via the regular plone login form and additionally check
         # that there is no 'authorization' header set afterwards:


