Repository: Products.CMFPlone


Branch: refs/heads/5.1.x
Date: 2020-02-12T11:29:36+01:00
Author: Achim Wilde (achimwilde) <achim.wilde@werkbank.de>
Commit: https://github.com/plone/Products.CMFPlone/commit/f91dc1101694f7d82fe0257569c4914b3480abbe

Fix mail_password_form throwing error when submitted without entering a user name.

Files changed:
A news/3042.bugfix
M Products/CMFPlone/skins/plone_scripts/mail_password.py

b"diff --git a/Products/CMFPlone/skins/plone_scripts/mail_password.py b/Products/CMFPlone/skins/plone_scripts/mail_password.py\nindex de666e2511..7b15393da2 100644\n--- a/Products/CMFPlone/skins/plone_scripts/mail_password.py\n+++ b/Products/CMFPlone/skins/plone_scripts/mail_password.py\n@@ -22,5 +22,6 @@\n         # should get an error message and contact the admins\n         raise e\n     context.plone_utils.addPortalMessage(msg)\n-    response = context.mail_password_form()\n+    REQUEST.RESPONSE.redirect(context.absolute_url()+'/mail_password_form')\n+    return\n return response\ndiff --git a/news/3042.bugfix b/news/3042.bugfix\nnew file mode 100644\nindex 0000000000..44e9400acc\n--- /dev/null\n+++ b/news/3042.bugfix\n@@ -0,0 +1,2 @@\n+Fix mail_password_form throwing error when submitted without entering a user name.\n+[achimwilde]\n"

Repository: Products.CMFPlone


Branch: refs/heads/5.1.x
Date: 2020-02-12T13:54:37+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/1dc2678b93eaa55396b0fb8d2bfebe0cd8def954

Merge pull request #3046 from plone/5.1.x-3042-empty-mail-password

Fix mail_password_form throwing error when submitted without enteringâ€¦

Files changed:
A news/3042.bugfix
M Products/CMFPlone/skins/plone_scripts/mail_password.py

b"diff --git a/Products/CMFPlone/skins/plone_scripts/mail_password.py b/Products/CMFPlone/skins/plone_scripts/mail_password.py\nindex de666e2511..7b15393da2 100644\n--- a/Products/CMFPlone/skins/plone_scripts/mail_password.py\n+++ b/Products/CMFPlone/skins/plone_scripts/mail_password.py\n@@ -22,5 +22,6 @@\n         # should get an error message and contact the admins\n         raise e\n     context.plone_utils.addPortalMessage(msg)\n-    response = context.mail_password_form()\n+    REQUEST.RESPONSE.redirect(context.absolute_url()+'/mail_password_form')\n+    return\n return response\ndiff --git a/news/3042.bugfix b/news/3042.bugfix\nnew file mode 100644\nindex 0000000000..44e9400acc\n--- /dev/null\n+++ b/news/3042.bugfix\n@@ -0,0 +1,2 @@\n+Fix mail_password_form throwing error when submitted without entering a user name.\n+[achimwilde]\n"

