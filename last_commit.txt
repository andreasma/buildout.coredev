Repository: mockup


Branch: refs/heads/master
Date: 2018-04-26T13:10:13+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/mockup/commit/07ac974aae7c43ce7776a037434ae78649552269

Relateditems: Raise the timeout when typing searchterms from 100 milliseconds to 500 milliseconds to prevent a too high server load.

Files changed:
M CHANGES.rst
M mockup/patterns/relateditems/pattern.js

diff --git a/CHANGES.rst b/CHANGES.rst
index b849c8b5..27a78404 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,13 +14,14 @@ New features:
 
 Bug fixes:
 
+- Relateditems: Raise the timeout when typing searchterms from 100 milliseconds to 500 milliseconds to prevent a too high server load.
+  [thet]
+
 - Improved default relateditems pattern sort.
   It now defaults to search term ranking when searching
   and folder position (getObjPositionInParent) when browsing.
   [davisagli]
 
-- *add item here*
-
 
 2.7.2 (2018-04-08)
 ------------------
diff --git a/mockup/patterns/relateditems/pattern.js b/mockup/patterns/relateditems/pattern.js
index 3befce5d..030c1de9 100644
--- a/mockup/patterns/relateditems/pattern.js
+++ b/mockup/patterns/relateditems/pattern.js
@@ -223,7 +223,7 @@ define([
 
         url: this.options.vocabularyUrl,
         dataType: 'JSON',
-        quietMillis: 100,
+        quietMillis: 500,
 
         data: function (term, page) {
 


Repository: mockup


Branch: refs/heads/master
Date: 2018-04-26T13:15:06+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/mockup/commit/bb0028b587d82d3b5baf370ca5eb939ea06a51d3

Relateditems: Do not filter out current context.
Filtering out the current context makes sense for the related items field but it can be problematic for other use cases.

Files changed:
M CHANGES.rst
M mockup/patterns/relateditems/pattern.js

diff --git a/CHANGES.rst b/CHANGES.rst
index 27a78404..ab322089 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,6 +14,10 @@ New features:
 
 Bug fixes:
 
+- Relateditems: Do not filter out current context.
+  Filtering out the current context makes sense for the related items field but it can be problematic for other use cases.
+  [thet]
+
 - Relateditems: Raise the timeout when typing searchterms from 100 milliseconds to 500 milliseconds to prevent a too high server load.
   [thet]
 
diff --git a/mockup/patterns/relateditems/pattern.js b/mockup/patterns/relateditems/pattern.js
index 030c1de9..966f88f3 100644
--- a/mockup/patterns/relateditems/pattern.js
+++ b/mockup/patterns/relateditems/pattern.js
@@ -540,10 +540,6 @@ define([
       if (item.selectable === false) {
         return false;
       }
-      if (self.options.contextPath === this.options.rootPath + item.path) {
-        // filter out current item
-        return false;
-      }
       if (self.options.selectableTypes === null) {
         return true;
       } else {


Repository: mockup


Branch: refs/heads/master
Date: 2018-05-02T15:02:55+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/mockup/commit/cefdf92f98921811fecf437a563a18de064262d6

Merge pull request #839 from plone/thet-related

relateditems: type timeout, allow selecting current context

Files changed:
M CHANGES.rst
M mockup/patterns/relateditems/pattern.js

diff --git a/CHANGES.rst b/CHANGES.rst
index b849c8b5..ab322089 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,13 +14,18 @@ New features:
 
 Bug fixes:
 
+- Relateditems: Do not filter out current context.
+  Filtering out the current context makes sense for the related items field but it can be problematic for other use cases.
+  [thet]
+
+- Relateditems: Raise the timeout when typing searchterms from 100 milliseconds to 500 milliseconds to prevent a too high server load.
+  [thet]
+
 - Improved default relateditems pattern sort.
   It now defaults to search term ranking when searching
   and folder position (getObjPositionInParent) when browsing.
   [davisagli]
 
-- *add item here*
-
 
 2.7.2 (2018-04-08)
 ------------------
diff --git a/mockup/patterns/relateditems/pattern.js b/mockup/patterns/relateditems/pattern.js
index ddead848..ddbedc8a 100644
--- a/mockup/patterns/relateditems/pattern.js
+++ b/mockup/patterns/relateditems/pattern.js
@@ -223,7 +223,7 @@ define([
 
         url: this.options.vocabularyUrl,
         dataType: 'JSON',
-        quietMillis: 100,
+        quietMillis: 500,
 
         data: function (term, page) {
 
@@ -540,10 +540,6 @@ define([
       if (item.selectable === false) {
         return false;
       }
-      if (self.options.contextPath === this.options.rootPath + item.path) {
-        // filter out current item
-        return false;
-      }
       if (self.options.selectableTypes === null) {
         return true;
       } else {


