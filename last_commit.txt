Repository: plone.intelligenttext


Branch: refs/heads/master
Date: 2018-10-05T10:26:06+02:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.intelligenttext/commit/f8630f8d43fe4135f9ecf7c690c734eeb8562213

Return str in Python 3

Files changed:
M CHANGES.rst
M plone/intelligenttext/README.rst
M plone/intelligenttext/transforms.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 2fa51bc..58b2a2f 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -15,7 +15,8 @@ New features:\n \n Bug fixes:\n \n-- *add item here*\n+- Return str from transform in Python 3.\n+  [davisagli]\n \n \n 2.2.1 (2018-01-17)\ndiff --git a/plone/intelligenttext/README.rst b/plone/intelligenttext/README.rst\nindex 775dba0..faaed50 100644\n--- a/plone/intelligenttext/README.rst\n+++ b/plone/intelligenttext/README.rst\n@@ -73,7 +73,7 @@ Indentation should be preserved::\n     ...       URL: http://foo.com"""\n     >>> bprint(convertWebIntelligentPlainTextToHtml(orig))\n     A test<br />&nbsp;&nbsp;URL: <a href="http://test.com" rel="nofollow">http://test.com</a><br />&nbsp;&nbsp;&nbsp;&nbsp;Mail: <a href="&#0109;ailto&#0058;test&#0064;test.com">test&#0064;test.com</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;URL: <a href="http://foo.com" rel="nofollow">http://foo.com</a>\n-    >>> convertWebIntelligentPlainTextToHtml(orig).count(b\'&nbsp;\')\n+    >>> convertWebIntelligentPlainTextToHtml(orig).count(\'&nbsp;\')\n     12\n \n HTML entities should be escaped::\ndiff --git a/plone/intelligenttext/transforms.py b/plone/intelligenttext/transforms.py\nindex e87cd73..23c7768 100644\n--- a/plone/intelligenttext/transforms.py\n+++ b/plone/intelligenttext/transforms.py\n@@ -55,7 +55,8 @@ def __call__(self):\n         # Finally, make \\n\'s into br\'s\n         text = text.replace(\'\\n\', \'<br />\')\n \n-        text = text.encode(\'utf-8\')\n+        if not PY3:\n+            text = text.encode(\'utf-8\')\n \n         return text\n \n'

Repository: plone.intelligenttext


Branch: refs/heads/master
Date: 2018-10-05T10:26:06+02:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.intelligenttext/commit/0b4d1afaf4d57c3bfe7c814ee28c8629860d805b

Drop support for Python 3.3 which is not present on travis

Files changed:
M .travis.yml
M CHANGES.rst
M setup.py
M tox.ini

b'diff --git a/.travis.yml b/.travis.yml\nindex f0f1749..0c67c11 100644\n--- a/.travis.yml\n+++ b/.travis.yml\n@@ -4,7 +4,6 @@ sudo: false\n python:\n   - 2.6\n   - 2.7\n-  - 3.3\n   - 3.4\n   - 3.5\n   - 3.6\ndiff --git a/CHANGES.rst b/CHANGES.rst\nindex 58b2a2f..617e6be 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -7,7 +7,7 @@ Changelog\n \n Breaking changes:\n \n-- *add item here*\n+- Dropped support for Python 3.3.\n \n New features:\n \ndiff --git a/setup.py b/setup.py\nindex f37a3d3..50db590 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -28,7 +28,6 @@\n         "Programming Language :: Python",\n         "Programming Language :: Python :: 2.6",\n         "Programming Language :: Python :: 2.7",\n-        "Programming Language :: Python :: 3.3",\n         "Programming Language :: Python :: 3.4",\n         "Programming Language :: Python :: 3.5",\n         "Programming Language :: Python :: 3.4",\ndiff --git a/tox.ini b/tox.ini\nindex 1a84942..040678c 100644\n--- a/tox.ini\n+++ b/tox.ini\n@@ -1,6 +1,6 @@\n [tox]\n envlist =\n-    py26,py27,py33,py34,py35,py36,pypy,pypy3\n+    py26,py27,py34,py35,py36,pypy,pypy3\n \n [testenv]\n commands =\n'

Repository: plone.intelligenttext


Branch: refs/heads/master
Date: 2018-10-13T15:18:28-04:00
Author: David Glick (davisagli) <dglick@salesforce.com>
Commit: https://github.com/plone/plone.intelligenttext/commit/b7d2f5be9acc3ea4dd4646c1a884c638bf2da75e

Merge pull request #8 from plone/python3

Python3

Files changed:
M .travis.yml
M CHANGES.rst
M plone/intelligenttext/README.rst
M plone/intelligenttext/transforms.py
M setup.py
M tox.ini

b'diff --git a/.travis.yml b/.travis.yml\nindex f0f1749..0c67c11 100644\n--- a/.travis.yml\n+++ b/.travis.yml\n@@ -4,7 +4,6 @@ sudo: false\n python:\n   - 2.6\n   - 2.7\n-  - 3.3\n   - 3.4\n   - 3.5\n   - 3.6\ndiff --git a/CHANGES.rst b/CHANGES.rst\nindex 2fa51bc..617e6be 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -7,7 +7,7 @@ Changelog\n \n Breaking changes:\n \n-- *add item here*\n+- Dropped support for Python 3.3.\n \n New features:\n \n@@ -15,7 +15,8 @@ New features:\n \n Bug fixes:\n \n-- *add item here*\n+- Return str from transform in Python 3.\n+  [davisagli]\n \n \n 2.2.1 (2018-01-17)\ndiff --git a/plone/intelligenttext/README.rst b/plone/intelligenttext/README.rst\nindex 775dba0..faaed50 100644\n--- a/plone/intelligenttext/README.rst\n+++ b/plone/intelligenttext/README.rst\n@@ -73,7 +73,7 @@ Indentation should be preserved::\n     ...       URL: http://foo.com"""\n     >>> bprint(convertWebIntelligentPlainTextToHtml(orig))\n     A test<br />&nbsp;&nbsp;URL: <a href="http://test.com" rel="nofollow">http://test.com</a><br />&nbsp;&nbsp;&nbsp;&nbsp;Mail: <a href="&#0109;ailto&#0058;test&#0064;test.com">test&#0064;test.com</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;URL: <a href="http://foo.com" rel="nofollow">http://foo.com</a>\n-    >>> convertWebIntelligentPlainTextToHtml(orig).count(b\'&nbsp;\')\n+    >>> convertWebIntelligentPlainTextToHtml(orig).count(\'&nbsp;\')\n     12\n \n HTML entities should be escaped::\ndiff --git a/plone/intelligenttext/transforms.py b/plone/intelligenttext/transforms.py\nindex e87cd73..23c7768 100644\n--- a/plone/intelligenttext/transforms.py\n+++ b/plone/intelligenttext/transforms.py\n@@ -55,7 +55,8 @@ def __call__(self):\n         # Finally, make \\n\'s into br\'s\n         text = text.replace(\'\\n\', \'<br />\')\n \n-        text = text.encode(\'utf-8\')\n+        if not PY3:\n+            text = text.encode(\'utf-8\')\n \n         return text\n \ndiff --git a/setup.py b/setup.py\nindex f37a3d3..50db590 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -28,7 +28,6 @@\n         "Programming Language :: Python",\n         "Programming Language :: Python :: 2.6",\n         "Programming Language :: Python :: 2.7",\n-        "Programming Language :: Python :: 3.3",\n         "Programming Language :: Python :: 3.4",\n         "Programming Language :: Python :: 3.5",\n         "Programming Language :: Python :: 3.4",\ndiff --git a/tox.ini b/tox.ini\nindex 1a84942..040678c 100644\n--- a/tox.ini\n+++ b/tox.ini\n@@ -1,6 +1,6 @@\n [tox]\n envlist =\n-    py26,py27,py33,py34,py35,py36,pypy,pypy3\n+    py26,py27,py34,py35,py36,pypy,pypy3\n \n [testenv]\n commands =\n'

