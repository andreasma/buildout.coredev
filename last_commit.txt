Repository: Products.CMFPlacefulWorkflow


Branch: refs/heads/master
Date: 2018-05-06T10:43:56+02:00
Author: Davi Lima (davilima6) <davilima6@gmail.com>
Commit: https://github.com/plone/Products.CMFPlacefulWorkflow/commit/15764c3f3eca0d97e8f548f2ae0a1685a7f514cb

Prepare doctest compatibility for Python 2 / 3

Files changed:
M Products/CMFPlacefulWorkflow/tests/exportimport.txt

diff --git a/Products/CMFPlacefulWorkflow/tests/exportimport.txt b/Products/CMFPlacefulWorkflow/tests/exportimport.txt
index c7ffa28..678d1ef 100644
--- a/Products/CMFPlacefulWorkflow/tests/exportimport.txt
+++ b/Products/CMFPlacefulWorkflow/tests/exportimport.txt
@@ -72,10 +72,10 @@ Export the portal_placeful_workflow step::
 The export produces a file for the tool itself::
 
     >>> import tarfile
-    >>> import StringIO
+    >>> from six import StringIO
     >>> archive = tarfile.open(
     ...     name='export',
-    ...     fileobj=StringIO.StringIO(tarball))
+    ...     fileobj=StringIO(tarball))
 
     >>> print(archive.extractfile(
     ...     'portal_placeful_workflow.xml').read())
@@ -123,13 +123,13 @@ Export works when chains are left unset to acquire::
 
 Snapshot
 --------
-    
+
     >>> snapshotResults = ps.createSnapshot('sn1')
     >>> snapshotResults['url']
     'http://nohost/plone/portal_setup/sn1'
-    
+
     >>> 'portal_placeful_workflow' in snapshotResults['steps']
     True
-    
+
     >>> snapshotResults['snapshot']
     <Folder at /plone/portal_setup/snapshots/sn1>


Repository: Products.CMFPlacefulWorkflow


Branch: refs/heads/master
Date: 2018-05-06T11:16:20+02:00
Author: ale-rt (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/Products.CMFPlacefulWorkflow/commit/ec08728642dd50e9186681bafd5ea4cd26eb588f

More for Python 2 / 3 compatibility

Files changed:
M CHANGES.rst
M Products/CMFPlacefulWorkflow/WorkflowPolicyConfig.py
M Products/CMFPlacefulWorkflow/__init__.py
M Products/CMFPlacefulWorkflow/exportimport/__init__.py
M Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py
M Products/CMFPlacefulWorkflow/tests/test_configlet.py
M Products/CMFPlacefulWorkflow/tests/test_doctests.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 38ad286..4070169 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- More for Python 2 / 3 compatibility
+  [ale-rt, davilima6]
 
 
 1.7.5 (2018-02-23)
diff --git a/Products/CMFPlacefulWorkflow/WorkflowPolicyConfig.py b/Products/CMFPlacefulWorkflow/WorkflowPolicyConfig.py
index 8a19927..1db172e 100644
--- a/Products/CMFPlacefulWorkflow/WorkflowPolicyConfig.py
+++ b/Products/CMFPlacefulWorkflow/WorkflowPolicyConfig.py
@@ -26,11 +26,10 @@
 from App.class_init import InitializeClass
 from OFS.SimpleItem import SimpleItem
 from os.path import join as path_join
-
-from PlacefulWorkflowTool import WorkflowPolicyConfig_id
 from Products.CMFCore.utils import getToolByName
 from Products.CMFPlacefulWorkflow.global_symbols import Log
 from Products.CMFPlacefulWorkflow.permissions import ManageWorkflowPolicies
+from Products.CMFPlacefulWorkflow.PlacefulWorkflowTool import WorkflowPolicyConfig_id  # noqa: E501
 from Products.PageTemplates.PageTemplateFile import PageTemplateFile
 
 import six
diff --git a/Products/CMFPlacefulWorkflow/__init__.py b/Products/CMFPlacefulWorkflow/__init__.py
index 515e5c0..d70f929 100644
--- a/Products/CMFPlacefulWorkflow/__init__.py
+++ b/Products/CMFPlacefulWorkflow/__init__.py
@@ -18,14 +18,14 @@
 """
 Initialization
 """
-
-from zope.i18nmessageid import MessageFactory
 from AccessControl import ModuleSecurityInfo
 from Products.CMFCore import DirectoryView
 from Products.CMFCore import utils
-import DefaultWorkflowPolicy
-import PlacefulWorkflowTool
-import WorkflowPolicyConfig
+from Products.CMFPlacefulWorkflow import DefaultWorkflowPolicy
+from Products.CMFPlacefulWorkflow import PlacefulWorkflowTool
+from Products.CMFPlacefulWorkflow import WorkflowPolicyConfig
+from zope.i18nmessageid import MessageFactory
+
 
 tools = (PlacefulWorkflowTool.PlacefulWorkflowTool, )
 
diff --git a/Products/CMFPlacefulWorkflow/exportimport/__init__.py b/Products/CMFPlacefulWorkflow/exportimport/__init__.py
index bf710a9..10dd001 100644
--- a/Products/CMFPlacefulWorkflow/exportimport/__init__.py
+++ b/Products/CMFPlacefulWorkflow/exportimport/__init__.py
@@ -16,7 +16,5 @@
 # along with this program; see the file COPYING. If not, write to the
 # Free Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 
-from workflow_policies import importWorkflowPolicies
-from workflow_policies import exportWorkflowPolicies
-
-importWorkflowPolicies, exportWorkflowPolicies  # pyflakes
+from Products.CMFPlacefulWorkflow.exportimport.workflow_policies import exportWorkflowPolicies  # noqa: E501,F401
+from Products.CMFPlacefulWorkflow.exportimport.workflow_policies import importWorkflowPolicies  # noqa: E501,F401
diff --git a/Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py b/Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py
index 2468ddb..ccbefd5 100644
--- a/Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py
+++ b/Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py
@@ -19,13 +19,14 @@
 CMFPlacefulWorkflow Unittest
 """
 
-from CMFPlacefulWorkflowTestCase import CMFPlacefulWorkflowTestCase
 from Products.CMFCore.utils import getToolByName
-from Products.CMFPlacefulWorkflow.PlacefulWorkflowTool import WorkflowPolicyConfig_id
 from Products.CMFPlacefulWorkflow.interfaces import IPlacefulMarker
+from Products.CMFPlacefulWorkflow.PlacefulWorkflowTool import WorkflowPolicyConfig_id  # noqa: E501
+from Products.CMFPlacefulWorkflow.tests.CMFPlacefulWorkflowTestCase import CMFPlacefulWorkflowTestCase  # noqa: E501
 from Products.CMFPlone.utils import get_installer
 from zExceptions import Forbidden
 
+
 _edit_permissions = []
 _all_permissions = _edit_permissions
 
diff --git a/Products/CMFPlacefulWorkflow/tests/test_configlet.py b/Products/CMFPlacefulWorkflow/tests/test_configlet.py
index 9ee7cdf..3ab9b91 100644
--- a/Products/CMFPlacefulWorkflow/tests/test_configlet.py
+++ b/Products/CMFPlacefulWorkflow/tests/test_configlet.py
@@ -19,10 +19,10 @@
 CMFPlacefulWorkflow Functional Test of the Through the Web Configuration
 """
 
-from CMFPlacefulWorkflowTestCase import CMFPlacefulWorkflowFunctionalTestCase
-from Products.CMFCore.utils import getToolByName
 from plone.app import testing
 from plone.testing.z2 import Browser
+from Products.CMFCore.utils import getToolByName
+from Products.CMFPlacefulWorkflow.tests.CMFPlacefulWorkflowTestCase import CMFPlacefulWorkflowFunctionalTestCase  # noqa: E501
 from transaction import commit
 
 
diff --git a/Products/CMFPlacefulWorkflow/tests/test_doctests.py b/Products/CMFPlacefulWorkflow/tests/test_doctests.py
index 1194568..fd7068f 100644
--- a/Products/CMFPlacefulWorkflow/tests/test_doctests.py
+++ b/Products/CMFPlacefulWorkflow/tests/test_doctests.py
@@ -19,11 +19,13 @@
 Contributed by Jazkarta
 """
 
-from CMFPlacefulWorkflowTestCase import PWF_LAYER
 from plone.testing import layered
+from Products.CMFPlacefulWorkflow.tests.CMFPlacefulWorkflowTestCase import PWF_LAYER
+
 import doctest
 import unittest
 
+
 OPTIONFLAGS = (doctest.ELLIPSIS |
                doctest.NORMALIZE_WHITESPACE |
                doctest.REPORT_UDIFF |


Repository: Products.CMFPlacefulWorkflow


Branch: refs/heads/master
Date: 2018-05-06T19:00:45-04:00
Author: David Glick (davisagli) <david.glick@plone.org>
Commit: https://github.com/plone/Products.CMFPlacefulWorkflow/commit/c6ce86a202aeb49c41e12f42f906dd092d3930f8

Merge pull request #21 from plone/python3

Python3

Files changed:
M CHANGES.rst
M Products/CMFPlacefulWorkflow/WorkflowPolicyConfig.py
M Products/CMFPlacefulWorkflow/__init__.py
M Products/CMFPlacefulWorkflow/exportimport/__init__.py
M Products/CMFPlacefulWorkflow/tests/exportimport.txt
M Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py
M Products/CMFPlacefulWorkflow/tests/test_configlet.py
M Products/CMFPlacefulWorkflow/tests/test_doctests.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 38ad286..4070169 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- More for Python 2 / 3 compatibility
+  [ale-rt, davilima6]
 
 
 1.7.5 (2018-02-23)
diff --git a/Products/CMFPlacefulWorkflow/WorkflowPolicyConfig.py b/Products/CMFPlacefulWorkflow/WorkflowPolicyConfig.py
index 8a19927..1db172e 100644
--- a/Products/CMFPlacefulWorkflow/WorkflowPolicyConfig.py
+++ b/Products/CMFPlacefulWorkflow/WorkflowPolicyConfig.py
@@ -26,11 +26,10 @@
 from App.class_init import InitializeClass
 from OFS.SimpleItem import SimpleItem
 from os.path import join as path_join
-
-from PlacefulWorkflowTool import WorkflowPolicyConfig_id
 from Products.CMFCore.utils import getToolByName
 from Products.CMFPlacefulWorkflow.global_symbols import Log
 from Products.CMFPlacefulWorkflow.permissions import ManageWorkflowPolicies
+from Products.CMFPlacefulWorkflow.PlacefulWorkflowTool import WorkflowPolicyConfig_id  # noqa: E501
 from Products.PageTemplates.PageTemplateFile import PageTemplateFile
 
 import six
diff --git a/Products/CMFPlacefulWorkflow/__init__.py b/Products/CMFPlacefulWorkflow/__init__.py
index 515e5c0..d70f929 100644
--- a/Products/CMFPlacefulWorkflow/__init__.py
+++ b/Products/CMFPlacefulWorkflow/__init__.py
@@ -18,14 +18,14 @@
 """
 Initialization
 """
-
-from zope.i18nmessageid import MessageFactory
 from AccessControl import ModuleSecurityInfo
 from Products.CMFCore import DirectoryView
 from Products.CMFCore import utils
-import DefaultWorkflowPolicy
-import PlacefulWorkflowTool
-import WorkflowPolicyConfig
+from Products.CMFPlacefulWorkflow import DefaultWorkflowPolicy
+from Products.CMFPlacefulWorkflow import PlacefulWorkflowTool
+from Products.CMFPlacefulWorkflow import WorkflowPolicyConfig
+from zope.i18nmessageid import MessageFactory
+
 
 tools = (PlacefulWorkflowTool.PlacefulWorkflowTool, )
 
diff --git a/Products/CMFPlacefulWorkflow/exportimport/__init__.py b/Products/CMFPlacefulWorkflow/exportimport/__init__.py
index bf710a9..10dd001 100644
--- a/Products/CMFPlacefulWorkflow/exportimport/__init__.py
+++ b/Products/CMFPlacefulWorkflow/exportimport/__init__.py
@@ -16,7 +16,5 @@
 # along with this program; see the file COPYING. If not, write to the
 # Free Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 
-from workflow_policies import importWorkflowPolicies
-from workflow_policies import exportWorkflowPolicies
-
-importWorkflowPolicies, exportWorkflowPolicies  # pyflakes
+from Products.CMFPlacefulWorkflow.exportimport.workflow_policies import exportWorkflowPolicies  # noqa: E501,F401
+from Products.CMFPlacefulWorkflow.exportimport.workflow_policies import importWorkflowPolicies  # noqa: E501,F401
diff --git a/Products/CMFPlacefulWorkflow/tests/exportimport.txt b/Products/CMFPlacefulWorkflow/tests/exportimport.txt
index c7ffa28..678d1ef 100644
--- a/Products/CMFPlacefulWorkflow/tests/exportimport.txt
+++ b/Products/CMFPlacefulWorkflow/tests/exportimport.txt
@@ -72,10 +72,10 @@ Export the portal_placeful_workflow step::
 The export produces a file for the tool itself::
 
     >>> import tarfile
-    >>> import StringIO
+    >>> from six import StringIO
     >>> archive = tarfile.open(
     ...     name='export',
-    ...     fileobj=StringIO.StringIO(tarball))
+    ...     fileobj=StringIO(tarball))
 
     >>> print(archive.extractfile(
     ...     'portal_placeful_workflow.xml').read())
@@ -123,13 +123,13 @@ Export works when chains are left unset to acquire::
 
 Snapshot
 --------
-    
+
     >>> snapshotResults = ps.createSnapshot('sn1')
     >>> snapshotResults['url']
     'http://nohost/plone/portal_setup/sn1'
-    
+
     >>> 'portal_placeful_workflow' in snapshotResults['steps']
     True
-    
+
     >>> snapshotResults['snapshot']
     <Folder at /plone/portal_setup/snapshots/sn1>
diff --git a/Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py b/Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py
index 2468ddb..ccbefd5 100644
--- a/Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py
+++ b/Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py
@@ -19,13 +19,14 @@
 CMFPlacefulWorkflow Unittest
 """
 
-from CMFPlacefulWorkflowTestCase import CMFPlacefulWorkflowTestCase
 from Products.CMFCore.utils import getToolByName
-from Products.CMFPlacefulWorkflow.PlacefulWorkflowTool import WorkflowPolicyConfig_id
 from Products.CMFPlacefulWorkflow.interfaces import IPlacefulMarker
+from Products.CMFPlacefulWorkflow.PlacefulWorkflowTool import WorkflowPolicyConfig_id  # noqa: E501
+from Products.CMFPlacefulWorkflow.tests.CMFPlacefulWorkflowTestCase import CMFPlacefulWorkflowTestCase  # noqa: E501
 from Products.CMFPlone.utils import get_installer
 from zExceptions import Forbidden
 
+
 _edit_permissions = []
 _all_permissions = _edit_permissions
 
diff --git a/Products/CMFPlacefulWorkflow/tests/test_configlet.py b/Products/CMFPlacefulWorkflow/tests/test_configlet.py
index 9ee7cdf..3ab9b91 100644
--- a/Products/CMFPlacefulWorkflow/tests/test_configlet.py
+++ b/Products/CMFPlacefulWorkflow/tests/test_configlet.py
@@ -19,10 +19,10 @@
 CMFPlacefulWorkflow Functional Test of the Through the Web Configuration
 """
 
-from CMFPlacefulWorkflowTestCase import CMFPlacefulWorkflowFunctionalTestCase
-from Products.CMFCore.utils import getToolByName
 from plone.app import testing
 from plone.testing.z2 import Browser
+from Products.CMFCore.utils import getToolByName
+from Products.CMFPlacefulWorkflow.tests.CMFPlacefulWorkflowTestCase import CMFPlacefulWorkflowFunctionalTestCase  # noqa: E501
 from transaction import commit
 
 
diff --git a/Products/CMFPlacefulWorkflow/tests/test_doctests.py b/Products/CMFPlacefulWorkflow/tests/test_doctests.py
index 1194568..fd7068f 100644
--- a/Products/CMFPlacefulWorkflow/tests/test_doctests.py
+++ b/Products/CMFPlacefulWorkflow/tests/test_doctests.py
@@ -19,11 +19,13 @@
 Contributed by Jazkarta
 """
 
-from CMFPlacefulWorkflowTestCase import PWF_LAYER
 from plone.testing import layered
+from Products.CMFPlacefulWorkflow.tests.CMFPlacefulWorkflowTestCase import PWF_LAYER
+
 import doctest
 import unittest
 
+
 OPTIONFLAGS = (doctest.ELLIPSIS |
                doctest.NORMALIZE_WHITESPACE |
                doctest.REPORT_UDIFF |


