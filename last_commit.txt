Repository: plone.app.linkintegrity


Branch: refs/heads/master
Date: 2018-04-02T18:52:22+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.linkintegrity/commit/ad70543ec89d7ba4e78aefe0bfba6f318a9d57b0

fix HTMLParseError for py3

Files changed:
M plone/app/linkintegrity/parser.py

diff --git a/plone/app/linkintegrity/parser.py b/plone/app/linkintegrity/parser.py
index 8fb27f1..2a756c4 100644
--- a/plone/app/linkintegrity/parser.py
+++ b/plone/app/linkintegrity/parser.py
@@ -1,7 +1,14 @@
 # -*- coding: utf-8 -*-
-from six.moves.html_parser import HTMLParseError
 from six.moves.html_parser import HTMLParser
 
+try:
+    from html.parser import HTMLParseError
+except ImportError as e:
+    # HTMLParseError is removed in Python 3.5. Since it can never be
+    # thrown in 3.5, we can just define our own class as a placeholder.
+    class HTMLParseError(Exception):
+        pass
+
 
 class LinkParser(HTMLParser):
     """A simple html parser for link and image urls.


Repository: plone.app.linkintegrity


Branch: refs/heads/master
Date: 2018-04-11T14:22:43+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.linkintegrity/commit/e05da45143da8eb40f1d6113ff19598bb2f63dba

Update CHANGES.rst

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index ae782c8..59f8d8a 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,6 +14,9 @@ New features:
 
 Bug fixes:
 
+- Python 3 compatibility.
+  [pbauer]
+
 - Mark strings in delete confirmation screen translatable
   [erral]
 


Repository: plone.app.linkintegrity


Branch: refs/heads/master
Date: 2018-04-11T14:23:09+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.linkintegrity/commit/9c8083cd508da14a2fb76fedcb116f2471b82f40

Merge branch 'master' into python3

Files changed:
M CHANGES.rst
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 59f8d8a..481be56 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -1,7 +1,7 @@
 Changelog
 =========
 
-3.3.5 (unreleased)
+3.3.6 (unreleased)
 ------------------
 
 Breaking changes:
@@ -17,6 +17,12 @@ Bug fixes:
 - Python 3 compatibility.
   [pbauer]
 
+
+3.3.5 (2018-04-04)
+------------------
+
+Bug fixes:
+
 - Mark strings in delete confirmation screen translatable
   [erral]
 
diff --git a/setup.py b/setup.py
index 7843be8..4292984 100644
--- a/setup.py
+++ b/setup.py
@@ -3,7 +3,7 @@
 from setuptools import setup
 
 
-version = '3.3.5.dev0'
+version = '3.3.6.dev0'
 
 setup(
     name='plone.app.linkintegrity',
@@ -18,6 +18,7 @@
         "Environment :: Web Environment",
         "Framework :: Plone",
         "Framework :: Plone :: 5.1",
+        "Framework :: Plone :: 5.2",
         "Framework :: Zope2",
         "Intended Audience :: Other Audience",
         "Intended Audience :: System Administrators",


Repository: plone.app.linkintegrity


Branch: refs/heads/master
Date: 2018-04-11T22:00:54+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.linkintegrity/commit/3189457f5f220b02e48728d73ad74b4c5f6b79c4

Merge pull request #65 from plone/python3

fix HTMLParseError for py3

Files changed:
M CHANGES.rst
M plone/app/linkintegrity/parser.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 3ee7b8b..481be56 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Python 3 compatibility.
+  [pbauer]
 
 
 3.3.5 (2018-04-04)
diff --git a/plone/app/linkintegrity/parser.py b/plone/app/linkintegrity/parser.py
index 8fb27f1..2a756c4 100644
--- a/plone/app/linkintegrity/parser.py
+++ b/plone/app/linkintegrity/parser.py
@@ -1,7 +1,14 @@
 # -*- coding: utf-8 -*-
-from six.moves.html_parser import HTMLParseError
 from six.moves.html_parser import HTMLParser
 
+try:
+    from html.parser import HTMLParseError
+except ImportError as e:
+    # HTMLParseError is removed in Python 3.5. Since it can never be
+    # thrown in 3.5, we can just define our own class as a placeholder.
+    class HTMLParseError(Exception):
+        pass
+
 
 class LinkParser(HTMLParser):
     """A simple html parser for link and image urls.


