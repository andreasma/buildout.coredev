Repository: plone.app.layout


Branch: refs/heads/2.3.x
Date: 2018-04-18T12:58:41-03:00
Author: hvelarde (hvelarde) <hector.velarde@gmail.com>
Commit: https://github.com/plone/plone.app.layout/commit/24f726d50d1320c3e04d335b45ee2345add76b9f

Do not use 'rel="tag"' attribute on the keywords viewlet

The referenced document is not a tag definition but a search result.

Refs. https://www.w3.org/TR/2011/WD-html5-20110113/links.html#link-type-tag

Files changed:
M CHANGES.rst
M plone/app/layout/viewlets/keywords.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index 2aa057c..efbbec6 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,9 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Do not use ``rel="tag"`` attribute on the keywords viewlet as the referenced document is not a tag definition but a search result;
+  use ``rel="nofollow"`` instead to avoid search crawlers hammering our sites backend.
+  [hvelarde]
 
 
 2.3.17 (2017-01-17)
diff --git a/plone/app/layout/viewlets/keywords.pt b/plone/app/layout/viewlets/keywords.pt
index afee913..75dc959 100644
--- a/plone/app/layout/viewlets/keywords.pt
+++ b/plone/app/layout/viewlets/keywords.pt
@@ -8,7 +8,7 @@
   <span tal:repeat="category categories">
     <a href=""
        class="link-category"
-       rel="tag"
+       rel="nofollow"
        tal:content="category"
        tal:define="quotedCat python:url_quote(category)"
        tal:attributes="href string:${context/@@plone_portal_state/navigation_root_url}/@@search?Subject%3Alist=${quotedCat}">


Repository: plone.app.layout


Branch: refs/heads/2.3.x
Date: 2018-04-19T00:03:29+02:00
Author: Alessandro Pisa (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/plone.app.layout/commit/1ac5f6ff262cce2948006190e8046395f144565f

Merge pull request #148 from plone/hvelarde-tag-2.3

Do not use 'rel="tag"' attribute on the keywords viewlet

Files changed:
M CHANGES.rst
M plone/app/layout/viewlets/keywords.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index 2aa057c..efbbec6 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,9 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Do not use ``rel="tag"`` attribute on the keywords viewlet as the referenced document is not a tag definition but a search result;
+  use ``rel="nofollow"`` instead to avoid search crawlers hammering our sites backend.
+  [hvelarde]
 
 
 2.3.17 (2017-01-17)
diff --git a/plone/app/layout/viewlets/keywords.pt b/plone/app/layout/viewlets/keywords.pt
index afee913..75dc959 100644
--- a/plone/app/layout/viewlets/keywords.pt
+++ b/plone/app/layout/viewlets/keywords.pt
@@ -8,7 +8,7 @@
   <span tal:repeat="category categories">
     <a href=""
        class="link-category"
-       rel="tag"
+       rel="nofollow"
        tal:content="category"
        tal:define="quotedCat python:url_quote(category)"
        tal:attributes="href string:${context/@@plone_portal_state/navigation_root_url}/@@search?Subject%3Alist=${quotedCat}">


