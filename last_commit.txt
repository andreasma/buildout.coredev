Repository: plone.app.folder


Branch: refs/heads/master
Date: 2018-03-29T12:31:46+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.folder/commit/3069500dccb0c247a554318b5b6cffdb9ef7cfbb

fix GopipIndex for py3

Files changed:
M src/plone/app/folder/nogopip.py

b"diff --git a/src/plone/app/folder/nogopip.py b/src/plone/app/folder/nogopip.py\nindex 4c8a2f8..6affabf 100644\n--- a/src/plone/app/folder/nogopip.py\n+++ b/src/plone/app/folder/nogopip.py\n@@ -69,7 +69,7 @@ def documentToKeyMap(self):\n         # results themselves.  luckily this is only ever called from\n         # `sortResults`, so we can get it form there.  oh, and lurker\n         # says this won't work in jython, though! :)\n-        rs = currentframe(1).f_locals['rs']\n+        rs = currentframe().f_back.f_locals['rs']\n         rids = {}\n         items = []\n         containers = {}\n"

Repository: plone.app.folder


Branch: refs/heads/master
Date: 2018-06-27T00:32:56+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.folder/commit/c148fb654d6da9dd62bad334092fe6af1a9e4766

setDefaultRoles is deprecated. addPermission from AccessControl.Permission is used.

Files changed:
M src/plone/app/folder/__init__.py

b"diff --git a/src/plone/app/folder/__init__.py b/src/plone/app/folder/__init__.py\nindex 6dd9f26..6775535 100644\n--- a/src/plone/app/folder/__init__.py\n+++ b/src/plone/app/folder/__init__.py\n@@ -1,11 +1,11 @@\n # -*- coding: utf-8 -*-\n-from Products.CMFCore.permissions import setDefaultRoles\n+from AccessControl.Permission import addPermission\n \n \n packageName = __name__\n \n AddFolder = 'ATContentTypes: Add Folder'\n-setDefaultRoles(AddFolder, ('Manager', 'Owner'))\n+addPermission(AddFolder, ('Manager', 'Owner'))\n \n \n def initialize(context):\n@@ -32,9 +32,9 @@ def initialize(context):\n             utils.ContentInit(\n                 '%s: %s' % (packageName, atype.portal_type),\n                 content_types=(atype,),\n-                permission = AddFolder,\n-                extra_constructors = (constructor,),\n-                fti = (fti,),\n+                permission=AddFolder,\n+                extra_constructors=(constructor,),\n+                fti=(fti,),\n             ).initialize(context)\n \n     from plone.app.folder import nogopip\n"

Repository: plone.app.folder


Branch: refs/heads/master
Date: 2018-09-15T10:23:12+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.folder/commit/15a32eecde554ebe82d442c016a08695c4983d4f

add changenote and classifiers

Files changed:
M CHANGES.rst
M setup.py

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex 42603ed..13e9d3c 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -14,7 +14,8 @@ New features:\n \n Bug fixes:\n \n-- *add item here*\n+- Fix GopipIndex for py3\n+  [pbauer]\n \n \n 1.2.5 (2018-02-02)\ndiff --git a/setup.py b/setup.py\nindex 7c01852..d0ebeda 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -15,6 +15,7 @@\n         'Framework :: Plone',\n         'Framework :: Plone :: 5.0',\n         'Framework :: Plone :: 5.1',\n+        'Framework :: Plone :: 5.2',\n         'Framework :: Zope2',\n         'Intended Audience :: Developers',\n         'Intended Audience :: System Administrators',\n@@ -23,6 +24,8 @@\n         'Operating System :: OS Independent',\n         'Programming Language :: Python',\n         'Programming Language :: Python :: 2.7',\n+        'Programming Language :: Python :: 3.6',\n+        'Programming Language :: Python :: 3.7',\n     ],\n     keywords='folder btree order plone archetypes atcontenttypes',\n     author='Plone Foundation',\n"

Repository: plone.app.folder


Branch: refs/heads/master
Date: 2018-09-15T12:04:26+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.folder/commit/1988f81300fb7b370ccd584dcd9c41e4457692ea

Merge pull request #17 from plone/python3

fix GopipIndex for py3

Files changed:
M CHANGES.rst
M setup.py
M src/plone/app/folder/__init__.py
M src/plone/app/folder/nogopip.py

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex 42603ed..13e9d3c 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -14,7 +14,8 @@ New features:\n \n Bug fixes:\n \n-- *add item here*\n+- Fix GopipIndex for py3\n+  [pbauer]\n \n \n 1.2.5 (2018-02-02)\ndiff --git a/setup.py b/setup.py\nindex 7c01852..d0ebeda 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -15,6 +15,7 @@\n         'Framework :: Plone',\n         'Framework :: Plone :: 5.0',\n         'Framework :: Plone :: 5.1',\n+        'Framework :: Plone :: 5.2',\n         'Framework :: Zope2',\n         'Intended Audience :: Developers',\n         'Intended Audience :: System Administrators',\n@@ -23,6 +24,8 @@\n         'Operating System :: OS Independent',\n         'Programming Language :: Python',\n         'Programming Language :: Python :: 2.7',\n+        'Programming Language :: Python :: 3.6',\n+        'Programming Language :: Python :: 3.7',\n     ],\n     keywords='folder btree order plone archetypes atcontenttypes',\n     author='Plone Foundation',\ndiff --git a/src/plone/app/folder/__init__.py b/src/plone/app/folder/__init__.py\nindex 6dd9f26..6775535 100644\n--- a/src/plone/app/folder/__init__.py\n+++ b/src/plone/app/folder/__init__.py\n@@ -1,11 +1,11 @@\n # -*- coding: utf-8 -*-\n-from Products.CMFCore.permissions import setDefaultRoles\n+from AccessControl.Permission import addPermission\n \n \n packageName = __name__\n \n AddFolder = 'ATContentTypes: Add Folder'\n-setDefaultRoles(AddFolder, ('Manager', 'Owner'))\n+addPermission(AddFolder, ('Manager', 'Owner'))\n \n \n def initialize(context):\n@@ -32,9 +32,9 @@ def initialize(context):\n             utils.ContentInit(\n                 '%s: %s' % (packageName, atype.portal_type),\n                 content_types=(atype,),\n-                permission = AddFolder,\n-                extra_constructors = (constructor,),\n-                fti = (fti,),\n+                permission=AddFolder,\n+                extra_constructors=(constructor,),\n+                fti=(fti,),\n             ).initialize(context)\n \n     from plone.app.folder import nogopip\ndiff --git a/src/plone/app/folder/nogopip.py b/src/plone/app/folder/nogopip.py\nindex 4c8a2f8..6affabf 100644\n--- a/src/plone/app/folder/nogopip.py\n+++ b/src/plone/app/folder/nogopip.py\n@@ -69,7 +69,7 @@ def documentToKeyMap(self):\n         # results themselves.  luckily this is only ever called from\n         # `sortResults`, so we can get it form there.  oh, and lurker\n         # says this won't work in jython, though! :)\n-        rs = currentframe(1).f_locals['rs']\n+        rs = currentframe().f_back.f_locals['rs']\n         rids = {}\n         items = []\n         containers = {}\n"

