Repository: plone.app.layout


Branch: refs/heads/2.7.x
Date: 2018-04-18T13:01:06-03:00
Author: hvelarde (hvelarde) <hector.velarde@gmail.com>
Commit: https://github.com/plone/plone.app.layout/commit/92abcf87bea60640fafd6ab61aae31ea14a9e1cd

Do not use 'rel="tag"' attribute on the keywords viewlet

The referenced document is not a tag definition but a search result.

Refs. https://www.w3.org/TR/2011/WD-html5-20110113/links.html#link-type-tag

Files changed:
M CHANGES.rst
M plone/app/layout/viewlets/keywords.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index dc10d6f..56a554a 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -18,7 +18,9 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Do not use ``rel="tag"`` attribute on the keywords viewlet as the referenced document is not a tag definition but a search result;
+  use ``rel="nofollow"`` instead to avoid search crawlers hammering our sites.
+  [hvelarde]
 
 
 2.7.5 (2017-11-26)
diff --git a/plone/app/layout/viewlets/keywords.pt b/plone/app/layout/viewlets/keywords.pt
index a8dbd86..3c28837 100644
--- a/plone/app/layout/viewlets/keywords.pt
+++ b/plone/app/layout/viewlets/keywords.pt
@@ -10,7 +10,7 @@
     <li tal:repeat="category categories">
       <a href=""
          class="link-category"
-         rel="tag"
+         rel="nofollow"
          tal:content="category"
          tal:define="quotedCat python:url_quote(category)"
          tal:attributes="href string:${context/@@plone_portal_state/navigation_root_url}/@@search?Subject%3Alist=${quotedCat}">


Repository: plone.app.layout


Branch: refs/heads/2.7.x
Date: 2018-04-19T00:03:03+02:00
Author: Alessandro Pisa (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/plone.app.layout/commit/93fea5c1b310364ad9d45d1d1ea28b9ae15ecd0d

Merge pull request #149 from plone/hvelarde-tag-2.7

Do not use 'rel="tag"' attribute on the keywords viewlet

Files changed:
M CHANGES.rst
M plone/app/layout/viewlets/keywords.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index dc10d6f..56a554a 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -18,7 +18,9 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Do not use ``rel="tag"`` attribute on the keywords viewlet as the referenced document is not a tag definition but a search result;
+  use ``rel="nofollow"`` instead to avoid search crawlers hammering our sites.
+  [hvelarde]
 
 
 2.7.5 (2017-11-26)
diff --git a/plone/app/layout/viewlets/keywords.pt b/plone/app/layout/viewlets/keywords.pt
index a8dbd86..3c28837 100644
--- a/plone/app/layout/viewlets/keywords.pt
+++ b/plone/app/layout/viewlets/keywords.pt
@@ -10,7 +10,7 @@
     <li tal:repeat="category categories">
       <a href=""
          class="link-category"
-         rel="tag"
+         rel="nofollow"
          tal:content="category"
          tal:define="quotedCat python:url_quote(category)"
          tal:attributes="href string:${context/@@plone_portal_state/navigation_root_url}/@@search?Subject%3Alist=${quotedCat}">


