Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2018-06-14T16:33:43+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.upgrade/commit/a3d9997f86cf7657da623f1755ff4f675be30c87

merge plone.login - remove skins

Files changed:
A plone/app/upgrade/v52/profiles/to_alpha1/skins.xml
M CHANGES.rst
M plone/__init__.py
M plone/app/__init__.py
M plone/app/upgrade/tests/__init__.py
M plone/app/upgrade/v52/alphas.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 2e98c4b3..4c0c4eea 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -10,7 +10,8 @@ Breaking changes:\n \n New features:\n \n-- *add item here*\n+- Merge plone.login and remove skins folder plone_login.\n+  [jensens]\n \n Bug fixes:\n \ndiff --git a/plone/__init__.py b/plone/__init__.py\nindex 85880ef0..68c04af4 100644\n--- a/plone/__init__.py\n+++ b/plone/__init__.py\n@@ -1,7 +1,2 @@\n # -*- coding: utf-8 -*-\n-# See http://peak.telecommunity.com/DevCenter/setuptools#namespace-packages\n-try:\n-    __import__(\'pkg_resources\').declare_namespace(__name__)\n-except ImportError:\n-    from pkgutil import extend_path\n-    __path__ = extend_path(__path__, __name__)\n+__import__(\'pkg_resources\').declare_namespace(__name__)\ndiff --git a/plone/app/__init__.py b/plone/app/__init__.py\nindex 85880ef0..68c04af4 100644\n--- a/plone/app/__init__.py\n+++ b/plone/app/__init__.py\n@@ -1,7 +1,2 @@\n # -*- coding: utf-8 -*-\n-# See http://peak.telecommunity.com/DevCenter/setuptools#namespace-packages\n-try:\n-    __import__(\'pkg_resources\').declare_namespace(__name__)\n-except ImportError:\n-    from pkgutil import extend_path\n-    __path__ = extend_path(__path__, __name__)\n+__import__(\'pkg_resources\').declare_namespace(__name__)\ndiff --git a/plone/app/upgrade/tests/__init__.py b/plone/app/upgrade/tests/__init__.py\nindex ec51c5a2..40a96afc 100644\n--- a/plone/app/upgrade/tests/__init__.py\n+++ b/plone/app/upgrade/tests/__init__.py\n@@ -1,2 +1 @@\n # -*- coding: utf-8 -*-\n-#\ndiff --git a/plone/app/upgrade/v52/alphas.py b/plone/app/upgrade/v52/alphas.py\nindex 32a4d4af..f17ee51b 100644\n--- a/plone/app/upgrade/v52/alphas.py\n+++ b/plone/app/upgrade/v52/alphas.py\n@@ -1,5 +1,7 @@\n # -*- coding: utf-8 -*-\n+from plone.app.upgrade.utils import cleanUpSkinsTool\n from plone.app.upgrade.utils import loadMigrationProfile\n+from Products.CMFCore.utils import getToolByName\n \n import logging\n \n@@ -9,3 +11,6 @@\n \n def to52alpha1(context):\n     loadMigrationProfile(context, \'profile-plone.app.upgrade.v52:to52alpha1\')\n+    portal = getToolByName(context, \'portal_url\').getPortalObject()\n+    import pdb; pdb.set_trace()\n+    cleanUpSkinsTool(portal)\ndiff --git a/plone/app/upgrade/v52/profiles/to_alpha1/skins.xml b/plone/app/upgrade/v52/profiles/to_alpha1/skins.xml\nnew file mode 100644\nindex 00000000..c0d3ddf6\n--- /dev/null\n+++ b/plone/app/upgrade/v52/profiles/to_alpha1/skins.xml\n@@ -0,0 +1,11 @@\n+<?xml version="1.0"?>\n+<object name="portal_skins">\n+  <object\n+      name="plone_login"\n+      meta_type="Filesystem Directory View"\n+      directory="Products.CMFPlone:skins/plone_login"\n+      remove="True"/>\n+  <skin-path name="*">\n+    <layer name="plone_login" remove="True"/>\n+  </skin-path>\n+</object>\n'

Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2018-06-16T09:03:14+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.upgrade/commit/9e08db00cb8da72363d1e7535edc863bbed3a8c7

remove pdb

Files changed:
M plone/app/upgrade/v52/alphas.py

b"diff --git a/plone/app/upgrade/v52/alphas.py b/plone/app/upgrade/v52/alphas.py\nindex f17ee51b..774a4b9d 100644\n--- a/plone/app/upgrade/v52/alphas.py\n+++ b/plone/app/upgrade/v52/alphas.py\n@@ -12,5 +12,4 @@\n def to52alpha1(context):\n     loadMigrationProfile(context, 'profile-plone.app.upgrade.v52:to52alpha1')\n     portal = getToolByName(context, 'portal_url').getPortalObject()\n-    import pdb; pdb.set_trace()\n     cleanUpSkinsTool(portal)\n"

Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2018-06-19T08:36:13+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.upgrade/commit/e256d4d200c308319a0f458ddd454c0d8ced77e2

Merge pull request #165 from plone/merge-plone-login

merge plone.login - remove skins

Files changed:
A plone/app/upgrade/v52/profiles/to_alpha1/skins.xml
M CHANGES.rst
M plone/__init__.py
M plone/app/__init__.py
M plone/app/upgrade/tests/__init__.py
M plone/app/upgrade/v52/alphas.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 2e98c4b3..4c0c4eea 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -10,7 +10,8 @@ Breaking changes:\n \n New features:\n \n-- *add item here*\n+- Merge plone.login and remove skins folder plone_login.\n+  [jensens]\n \n Bug fixes:\n \ndiff --git a/plone/__init__.py b/plone/__init__.py\nindex 85880ef0..68c04af4 100644\n--- a/plone/__init__.py\n+++ b/plone/__init__.py\n@@ -1,7 +1,2 @@\n # -*- coding: utf-8 -*-\n-# See http://peak.telecommunity.com/DevCenter/setuptools#namespace-packages\n-try:\n-    __import__(\'pkg_resources\').declare_namespace(__name__)\n-except ImportError:\n-    from pkgutil import extend_path\n-    __path__ = extend_path(__path__, __name__)\n+__import__(\'pkg_resources\').declare_namespace(__name__)\ndiff --git a/plone/app/__init__.py b/plone/app/__init__.py\nindex 85880ef0..68c04af4 100644\n--- a/plone/app/__init__.py\n+++ b/plone/app/__init__.py\n@@ -1,7 +1,2 @@\n # -*- coding: utf-8 -*-\n-# See http://peak.telecommunity.com/DevCenter/setuptools#namespace-packages\n-try:\n-    __import__(\'pkg_resources\').declare_namespace(__name__)\n-except ImportError:\n-    from pkgutil import extend_path\n-    __path__ = extend_path(__path__, __name__)\n+__import__(\'pkg_resources\').declare_namespace(__name__)\ndiff --git a/plone/app/upgrade/tests/__init__.py b/plone/app/upgrade/tests/__init__.py\nindex ec51c5a2..40a96afc 100644\n--- a/plone/app/upgrade/tests/__init__.py\n+++ b/plone/app/upgrade/tests/__init__.py\n@@ -1,2 +1 @@\n # -*- coding: utf-8 -*-\n-#\ndiff --git a/plone/app/upgrade/v52/alphas.py b/plone/app/upgrade/v52/alphas.py\nindex 32a4d4af..774a4b9d 100644\n--- a/plone/app/upgrade/v52/alphas.py\n+++ b/plone/app/upgrade/v52/alphas.py\n@@ -1,5 +1,7 @@\n # -*- coding: utf-8 -*-\n+from plone.app.upgrade.utils import cleanUpSkinsTool\n from plone.app.upgrade.utils import loadMigrationProfile\n+from Products.CMFCore.utils import getToolByName\n \n import logging\n \n@@ -9,3 +11,5 @@\n \n def to52alpha1(context):\n     loadMigrationProfile(context, \'profile-plone.app.upgrade.v52:to52alpha1\')\n+    portal = getToolByName(context, \'portal_url\').getPortalObject()\n+    cleanUpSkinsTool(portal)\ndiff --git a/plone/app/upgrade/v52/profiles/to_alpha1/skins.xml b/plone/app/upgrade/v52/profiles/to_alpha1/skins.xml\nnew file mode 100644\nindex 00000000..c0d3ddf6\n--- /dev/null\n+++ b/plone/app/upgrade/v52/profiles/to_alpha1/skins.xml\n@@ -0,0 +1,11 @@\n+<?xml version="1.0"?>\n+<object name="portal_skins">\n+  <object\n+      name="plone_login"\n+      meta_type="Filesystem Directory View"\n+      directory="Products.CMFPlone:skins/plone_login"\n+      remove="True"/>\n+  <skin-path name="*">\n+    <layer name="plone_login" remove="True"/>\n+  </skin-path>\n+</object>\n'

