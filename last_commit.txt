Repository: plone.portlet.collection


Branch: refs/heads/master
Date: 2018-09-29T22:44:13-04:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.portlet.collection/commit/b7b96261449be4cccc82f78571a6d7f202722dc2

fix tests in Python 3

Files changed:
M plone/portlet/collection/tests/functional.txt

b'diff --git a/plone/portlet/collection/tests/functional.txt b/plone/portlet/collection/tests/functional.txt\nindex 5480d73..21c9b37 100644\n--- a/plone/portlet/collection/tests/functional.txt\n+++ b/plone/portlet/collection/tests/functional.txt\n@@ -76,9 +76,10 @@ Go to the home page and see if the portlet looks OK.\n     >>> portlet = html.xpath(\'//*[contains(@class, "portletCollection")]\')[0]\n     >>> portlet_contents = etree.tostring(portlet)\n     >>> def strip_white_space(contents):\n+    ...     contents = contents.decode(\'utf-8\') if not isinstance(contents, str) else contents\n     ...     lines = [line.strip() for line in contents.splitlines() if line.strip()]\n     ...     return \'\\n\'.join(lines)\n-    >>> print strip_white_space(portlet_contents)\n+    >>> print(strip_white_space(portlet_contents))\n     <section class="portlet portletCollection portlet-collection-test-collection"><header class="portletHeader">\n     <span class="portletTopLeft"...\n     <a href="http://nohost/plone/test-collection">\n@@ -113,7 +114,7 @@ Now test what happens if we toggle the "show more link" option.\n     True\n     >>> browser.getControl(label="Show more... link").selected = False\n     >>> browser.getControl(\'Save\').click()\n-    >>> print browser.url\n+    >>> print(browser.url)\n     http://nohost/plone/@@manage-portlets\n \n Go back to the home page and see if it looks OK.\n@@ -122,7 +123,7 @@ Go back to the home page and see if it looks OK.\n     >>> html = etree.HTML(browser.contents)\n     >>> portlet = html.xpath(\'//*[contains(@class, "portletCollection")]\')[0]\n     >>> portlet_contents = etree.tostring(portlet)\n-    >>> \'<a href="http://nohost/plone/test-collection">\' in portlet_contents\n+    >>> b\'<a href="http://nohost/plone/test-collection">\' in portlet_contents\n     False\n \n Now test what happens if we toggle the "show dates" option.\n@@ -133,7 +134,7 @@ Now test what happens if we toggle the "show dates" option.\n     True\n     >>> browser.getControl("Show dates").selected = True\n     >>> browser.getControl("Save").click()\n-    >>> print browser.url\n+    >>> print(browser.url)\n     http://nohost/plone/@@manage-portlets\n \n Make sure the dates show up::\n'

Repository: plone.portlet.collection


Branch: refs/heads/master
Date: 2018-10-05T10:33:56+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.portlet.collection/commit/9af95443f4dec39ad981198688368fd9785b735c

add changelog and classifiers

Files changed:
M CHANGES.rst
M setup.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 262d61e..802c672 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -14,7 +14,8 @@ New features:\n \n Bug fixes:\n \n-- *add item here*\n+- Fix tests in Python 3\n+  [davisagli]\n \n \n 3.3.0 (2017-11-24)\ndiff --git a/setup.py b/setup.py\nindex 8093726..9309738 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -11,11 +11,14 @@\n           "Environment :: Web Environment",\n           "Framework :: Plone",\n           "Framework :: Plone :: 5.1",\n+          "Framework :: Plone :: 5.2",\n           "Framework :: Zope2",\n           "License :: OSI Approved :: GNU General Public License v2 (GPLv2)",\n           "Operating System :: OS Independent",\n           "Programming Language :: Python",\n           "Programming Language :: Python :: 2.7",\n+          "Programming Language :: Python :: 3.6",\n+          "Programming Language :: Python :: 3.7",\n       ],\n       keywords=\'collection portlet\',\n       author=\'Plone Foundation\',\n'

Repository: plone.portlet.collection


Branch: refs/heads/master
Date: 2018-10-13T15:22:37-04:00
Author: David Glick (davisagli) <dglick@salesforce.com>
Commit: https://github.com/plone/plone.portlet.collection/commit/33920772000817887def0e520f862551360e6c0a

Merge pull request #20 from plone/python3

fix tests in Python 3

Files changed:
M CHANGES.rst
M plone/portlet/collection/tests/functional.txt
M setup.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 262d61e..802c672 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -14,7 +14,8 @@ New features:\n \n Bug fixes:\n \n-- *add item here*\n+- Fix tests in Python 3\n+  [davisagli]\n \n \n 3.3.0 (2017-11-24)\ndiff --git a/plone/portlet/collection/tests/functional.txt b/plone/portlet/collection/tests/functional.txt\nindex 5480d73..21c9b37 100644\n--- a/plone/portlet/collection/tests/functional.txt\n+++ b/plone/portlet/collection/tests/functional.txt\n@@ -76,9 +76,10 @@ Go to the home page and see if the portlet looks OK.\n     >>> portlet = html.xpath(\'//*[contains(@class, "portletCollection")]\')[0]\n     >>> portlet_contents = etree.tostring(portlet)\n     >>> def strip_white_space(contents):\n+    ...     contents = contents.decode(\'utf-8\') if not isinstance(contents, str) else contents\n     ...     lines = [line.strip() for line in contents.splitlines() if line.strip()]\n     ...     return \'\\n\'.join(lines)\n-    >>> print strip_white_space(portlet_contents)\n+    >>> print(strip_white_space(portlet_contents))\n     <section class="portlet portletCollection portlet-collection-test-collection"><header class="portletHeader">\n     <span class="portletTopLeft"...\n     <a href="http://nohost/plone/test-collection">\n@@ -113,7 +114,7 @@ Now test what happens if we toggle the "show more link" option.\n     True\n     >>> browser.getControl(label="Show more... link").selected = False\n     >>> browser.getControl(\'Save\').click()\n-    >>> print browser.url\n+    >>> print(browser.url)\n     http://nohost/plone/@@manage-portlets\n \n Go back to the home page and see if it looks OK.\n@@ -122,7 +123,7 @@ Go back to the home page and see if it looks OK.\n     >>> html = etree.HTML(browser.contents)\n     >>> portlet = html.xpath(\'//*[contains(@class, "portletCollection")]\')[0]\n     >>> portlet_contents = etree.tostring(portlet)\n-    >>> \'<a href="http://nohost/plone/test-collection">\' in portlet_contents\n+    >>> b\'<a href="http://nohost/plone/test-collection">\' in portlet_contents\n     False\n \n Now test what happens if we toggle the "show dates" option.\n@@ -133,7 +134,7 @@ Now test what happens if we toggle the "show dates" option.\n     True\n     >>> browser.getControl("Show dates").selected = True\n     >>> browser.getControl("Save").click()\n-    >>> print browser.url\n+    >>> print(browser.url)\n     http://nohost/plone/@@manage-portlets\n \n Make sure the dates show up::\ndiff --git a/setup.py b/setup.py\nindex 273ffe9..a50c7bb 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -17,6 +17,8 @@\n           "Operating System :: OS Independent",\n           "Programming Language :: Python",\n           "Programming Language :: Python :: 2.7",\n+          "Programming Language :: Python :: 3.6",\n+          "Programming Language :: Python :: 3.7",\n       ],\n       keywords=\'collection portlet\',\n       author=\'Plone Foundation\',\n'

