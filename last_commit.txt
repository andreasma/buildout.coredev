Repository: plone.app.redirector


Branch: refs/heads/master
Date: 2019-11-27T12:44:30+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.redirector/commit/78e8ef225bca9227658a6d270c47aa6dbe2ea35f

Allow performance tests to take more time.

This seems needed on the Plone Jenkins test server when jobs are run in parallel.
Fixes https://github.com/plone/plone.app.redirector/issues/20

Files changed:
A news/20.bugfix
M plone/app/redirector/tests/test_performance.py

b"diff --git a/news/20.bugfix b/news/20.bugfix\nnew file mode 100644\nindex 0000000..def781c\n--- /dev/null\n+++ b/news/20.bugfix\n@@ -0,0 +1,3 @@\n+Allow performance tests to take more time.\n+This seems needed on the Plone Jenkins test server when jobs are run in parallel.\n+[maurits]\ndiff --git a/plone/app/redirector/tests/test_performance.py b/plone/app/redirector/tests/test_performance.py\nindex d238206..09497fd 100644\n--- a/plone/app/redirector/tests/test_performance.py\n+++ b/plone/app/redirector/tests/test_performance.py\n@@ -41,10 +41,11 @@ def timeit(self, message, limit=0):\n         yield\n         end = time()\n         total = end - start\n-        # Allow taking at least 0.1 seconds.  Otherwise a really low NUMBER\n+        # Allow taking at least 0.3 seconds.  Otherwise a really low NUMBER\n         # like 0 may give errors like this:\n         # AssertionError: Listing all takes too long: 0.00 seconds (max 1e-06)\n-        limit = max(limit, 0.1)\n+        # Also, Jenkins might be busy running multiple jobs in parallel.\n+        limit = max(limit, 0.3)\n         if total > limit:\n             self.fail(\n                 '{0} takes too long: {1:.2f} seconds (max {2})'.format(\n"

Repository: plone.app.redirector


Branch: refs/heads/master
Date: 2019-11-27T14:12:31+01:00
Author: Maurits van Rees (mauritsvanrees) <m.van.rees@zestsoftware.nl>
Commit: https://github.com/plone/plone.app.redirector/commit/4504842f1ce402becabae94c4836e1c3ec4dc1d8

Merge pull request #21 from plone/maurits/issue-20-performance-tests

Allow performance tests to take more time.

Files changed:
A news/20.bugfix
M plone/app/redirector/tests/test_performance.py

b"diff --git a/news/20.bugfix b/news/20.bugfix\nnew file mode 100644\nindex 0000000..def781c\n--- /dev/null\n+++ b/news/20.bugfix\n@@ -0,0 +1,3 @@\n+Allow performance tests to take more time.\n+This seems needed on the Plone Jenkins test server when jobs are run in parallel.\n+[maurits]\ndiff --git a/plone/app/redirector/tests/test_performance.py b/plone/app/redirector/tests/test_performance.py\nindex d238206..09497fd 100644\n--- a/plone/app/redirector/tests/test_performance.py\n+++ b/plone/app/redirector/tests/test_performance.py\n@@ -41,10 +41,11 @@ def timeit(self, message, limit=0):\n         yield\n         end = time()\n         total = end - start\n-        # Allow taking at least 0.1 seconds.  Otherwise a really low NUMBER\n+        # Allow taking at least 0.3 seconds.  Otherwise a really low NUMBER\n         # like 0 may give errors like this:\n         # AssertionError: Listing all takes too long: 0.00 seconds (max 1e-06)\n-        limit = max(limit, 0.1)\n+        # Also, Jenkins might be busy running multiple jobs in parallel.\n+        limit = max(limit, 0.3)\n         if total > limit:\n             self.fail(\n                 '{0} takes too long: {1:.2f} seconds (max {2})'.format(\n"

