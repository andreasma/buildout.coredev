Repository: mockup


Branch: refs/heads/master
Date: 2019-02-05T19:52:58+01:00
Author: Peter Holzer (agitator) <peter.holzer@agitator.com>
Commit: https://github.com/plone/mockup/commit/31bf02fcf22d22a10f44e8cdac50f33217e65a48

add navigationmarker pattern

Files changed:
A mockup/patterns/navigationmarker/pattern.js
M mockup/js/bundles/plone.js
M mockup/js/config.js

b'diff --git a/mockup/js/bundles/plone.js b/mockup/js/bundles/plone.js\nindex 02675ca3b..9efcdc306 100644\n--- a/mockup/js/bundles/plone.js\n+++ b/mockup/js/bundles/plone.js\n@@ -15,6 +15,7 @@ define([\n   \'mockup-patterns-preventdoublesubmit\',\n   \'mockup-patterns-formautofocus\',\n   \'mockup-patterns-modal\',\n+  \'mockup-patterns-navigationmarker\',\n   \'mockup-patterns-structure\',\n   \'mockup-patterns-textareamimetypeselector\',\n   \'bootstrap-dropdown\',\ndiff --git a/mockup/js/config.js b/mockup/js/config.js\nindex c71ef8dba..5a932ca16 100644\n--- a/mockup/js/config.js\n+++ b/mockup/js/config.js\n@@ -97,6 +97,7 @@\n       \'mockup-patterns-markspeciallinks\': \'patterns/markspeciallinks/pattern\',\n       \'mockup-patterns-modal\': \'patterns/modal/pattern\',\n       \'mockup-patterns-moment\': \'patterns/moment/pattern\',\n+      \'mockup-patterns-navigationmarker\': \'patterns/navigationmarker/pattern\',\n       \'mockup-patterns-pickadate\': \'patterns/pickadate/pattern\',\n       \'mockup-patterns-preventdoublesubmit\': \'patterns/preventdoublesubmit/pattern\',\n       \'mockup-patterns-querystring\': \'patterns/querystring/pattern\',\ndiff --git a/mockup/patterns/navigationmarker/pattern.js b/mockup/patterns/navigationmarker/pattern.js\nnew file mode 100644\nindex 000000000..d6fe14b18\n--- /dev/null\n+++ b/mockup/patterns/navigationmarker/pattern.js\n@@ -0,0 +1,39 @@\n+define([\n+    \'jquery\',\n+    \'pat-base\'\n+], function($, Base) {\n+\n+    var Navigation = Base.extend({\n+        name: \'collective.navigation\',\n+        trigger: \'.pat-navigationmarker\',\n+        parser: \'mockup\',\n+\n+        init: function() {\n+            var href = document.querySelector(\'head link[rel="canonical"]\').href || window.location.href;\n+            $(\'a\', this.$el).each(function () {\n+                if (href.indexOf(this.href) !== -1) {\n+                    var parent = $(this).parent();\n+\n+                    if ($(\'button.plone-navbar-toggle\').is(\':visible\')) {  // only check checkboxes if it\'s a small device\n+                        // check the input-openers within the path\n+                        var check = parent.find(\'> input\');\n+                        if (check.length) {\n+                            check[0].checked = true;\n+                        }\n+                    }\n+\n+                    // set "inPath" to all nav items which are within the current path\n+                    parent.addClass(\'inPath\');\n+\n+                    // set "current" to the current selected nav item, if it is in the navigation structure.\n+                    if (href === this.href) {\n+                        parent.addClass(\'current\');\n+                    }\n+                }\n+            });\n+        }\n+\n+    });\n+\n+    return Navigation;\n+});\n'

Repository: mockup


Branch: refs/heads/master
Date: 2019-02-05T19:52:58+01:00
Author: Peter Holzer (agitator) <peter.holzer@agitator.com>
Commit: https://github.com/plone/mockup/commit/70b29b05356d71a7ed841ac1b14c1d7d5cc158f6

update pattern name

Files changed:
M mockup/patterns/navigationmarker/pattern.js

b"diff --git a/mockup/patterns/navigationmarker/pattern.js b/mockup/patterns/navigationmarker/pattern.js\nindex d6fe14b18..b6142bf22 100644\n--- a/mockup/patterns/navigationmarker/pattern.js\n+++ b/mockup/patterns/navigationmarker/pattern.js\n@@ -4,7 +4,7 @@ define([\n ], function($, Base) {\n \n     var Navigation = Base.extend({\n-        name: 'collective.navigation',\n+        name: 'navigationmarker',\n         trigger: '.pat-navigationmarker',\n         parser: 'mockup',\n \n"

Repository: mockup


Branch: refs/heads/master
Date: 2019-02-05T19:56:04+01:00
Author: Peter Holzer (agitator) <peter.holzer@agitator.com>
Commit: https://github.com/plone/mockup/commit/a45342b5b4a20339799ed20aefa97c69e645d4d6

added news entry

Files changed:
A news/885.feature

b'diff --git a/news/885.feature b/news/885.feature\nnew file mode 100644\nindex 000000000..d147e7796\n--- /dev/null\n+++ b/news/885.feature\n@@ -0,0 +1,2 @@\n+- Added navigationmarker pattern\n+  [agitator]\n\\ No newline at end of file\n'

Repository: mockup


Branch: refs/heads/master
Date: 2019-02-05T19:57:30+01:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/mockup/commit/4d84788a2c293a0442d0107cf800583ec64ec01e

Merge pull request #885 from plone/plip-2516-navigation

add navigationmarker pattern

Files changed:
A mockup/patterns/navigationmarker/pattern.js
A news/885.feature
M mockup/js/bundles/plone.js
M mockup/js/config.js

b'diff --git a/mockup/js/bundles/plone.js b/mockup/js/bundles/plone.js\nindex 02675ca3b..9efcdc306 100644\n--- a/mockup/js/bundles/plone.js\n+++ b/mockup/js/bundles/plone.js\n@@ -15,6 +15,7 @@ define([\n   \'mockup-patterns-preventdoublesubmit\',\n   \'mockup-patterns-formautofocus\',\n   \'mockup-patterns-modal\',\n+  \'mockup-patterns-navigationmarker\',\n   \'mockup-patterns-structure\',\n   \'mockup-patterns-textareamimetypeselector\',\n   \'bootstrap-dropdown\',\ndiff --git a/mockup/js/config.js b/mockup/js/config.js\nindex c71ef8dba..5a932ca16 100644\n--- a/mockup/js/config.js\n+++ b/mockup/js/config.js\n@@ -97,6 +97,7 @@\n       \'mockup-patterns-markspeciallinks\': \'patterns/markspeciallinks/pattern\',\n       \'mockup-patterns-modal\': \'patterns/modal/pattern\',\n       \'mockup-patterns-moment\': \'patterns/moment/pattern\',\n+      \'mockup-patterns-navigationmarker\': \'patterns/navigationmarker/pattern\',\n       \'mockup-patterns-pickadate\': \'patterns/pickadate/pattern\',\n       \'mockup-patterns-preventdoublesubmit\': \'patterns/preventdoublesubmit/pattern\',\n       \'mockup-patterns-querystring\': \'patterns/querystring/pattern\',\ndiff --git a/mockup/patterns/navigationmarker/pattern.js b/mockup/patterns/navigationmarker/pattern.js\nnew file mode 100644\nindex 000000000..b6142bf22\n--- /dev/null\n+++ b/mockup/patterns/navigationmarker/pattern.js\n@@ -0,0 +1,39 @@\n+define([\n+    \'jquery\',\n+    \'pat-base\'\n+], function($, Base) {\n+\n+    var Navigation = Base.extend({\n+        name: \'navigationmarker\',\n+        trigger: \'.pat-navigationmarker\',\n+        parser: \'mockup\',\n+\n+        init: function() {\n+            var href = document.querySelector(\'head link[rel="canonical"]\').href || window.location.href;\n+            $(\'a\', this.$el).each(function () {\n+                if (href.indexOf(this.href) !== -1) {\n+                    var parent = $(this).parent();\n+\n+                    if ($(\'button.plone-navbar-toggle\').is(\':visible\')) {  // only check checkboxes if it\'s a small device\n+                        // check the input-openers within the path\n+                        var check = parent.find(\'> input\');\n+                        if (check.length) {\n+                            check[0].checked = true;\n+                        }\n+                    }\n+\n+                    // set "inPath" to all nav items which are within the current path\n+                    parent.addClass(\'inPath\');\n+\n+                    // set "current" to the current selected nav item, if it is in the navigation structure.\n+                    if (href === this.href) {\n+                        parent.addClass(\'current\');\n+                    }\n+                }\n+            });\n+        }\n+\n+    });\n+\n+    return Navigation;\n+});\ndiff --git a/news/885.feature b/news/885.feature\nnew file mode 100644\nindex 000000000..d147e7796\n--- /dev/null\n+++ b/news/885.feature\n@@ -0,0 +1,2 @@\n+- Added navigationmarker pattern\n+  [agitator]\n\\ No newline at end of file\n'

