Repository: plone.app.theming


Branch: refs/heads/master
Date: 2020-02-12T12:30:58+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.theming/commit/dd4f7fc15d1d7ec890780b1f64ad433efaf4fb9e

Do not call processInputs.

It is not needed since Zope 4, and not existing in Zope 5.
Fixes https://github.com/plone/plone.app.theming/issues/171

Files changed:
A news/171.bugfix
M src/plone/app/theming/browser/controlpanel.py
M src/plone/app/theming/browser/mapper.py

b'diff --git a/news/171.bugfix b/news/171.bugfix\nnew file mode 100644\nindex 0000000..5a76d55\n--- /dev/null\n+++ b/news/171.bugfix\n@@ -0,0 +1,3 @@\n+Do not call ``processInputs``.\n+It is not needed since Zope 4, and not existing in Zope 5.\n+[maurits]\ndiff --git a/src/plone/app/theming/browser/controlpanel.py b/src/plone/app/theming/browser/controlpanel.py\nindex 8bff914..fe45d55 100644\n--- a/src/plone/app/theming/browser/controlpanel.py\n+++ b/src/plone/app/theming/browser/controlpanel.py\n@@ -20,7 +20,6 @@\n from plone.resource.utils import queryResourceDirectory\n from Products.CMFCore.utils import getToolByName\n from Products.CMFPlone.interfaces import ILinkSchema\n-from Products.Five.browser.decode import processInputs\n from Products.statusmessages.interfaces import IStatusMessage\n from zope.component import getMultiAdapter\n from zope.component import getUtility\n@@ -106,7 +105,6 @@ def set_ext_links_open_new_window(self, value):\n \n     def update(self):\n         # XXX: complexity too high: refactoring needed\n-        processInputs(self.request)\n         self._setup()\n         self.errors = {}\n         form = self.request.form\ndiff --git a/src/plone/app/theming/browser/mapper.py b/src/plone/app/theming/browser/mapper.py\nindex ed7e8c6..776f8f9 100644\n--- a/src/plone/app/theming/browser/mapper.py\n+++ b/src/plone/app/theming/browser/mapper.py\n@@ -17,7 +17,6 @@\n from Products.CMFCore.utils import _getAuthenticatedUser\n from Products.CMFCore.utils import getToolByName\n from Products.CMFPlone.resources import add_bundle_on_request\n-from Products.Five.browser.decode import processInputs\n from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile\n from Products.statusmessages.interfaces import IStatusMessage\n from repoze.xmliter.utils import getHTMLSerializer\n@@ -61,7 +60,6 @@ def development(self):\n \n     def setup(self):\n         self.request.response.setHeader(\'X-Theme-Disabled\', \'1\')\n-        processInputs(self.request)\n \n         self.resourceDirectory = self.context\n         self.theme = getThemeFromResourceDirectory(self.context)\n@@ -218,9 +216,6 @@ def getFrame(self):\n         - a query string parameter ``title`` can be set to give a new page\n           title\n         """\n-\n-        processInputs(self.request)\n-\n         path = self.request.form.get(\'path\', None)\n         theme = self.request.form.get(\'theme\', \'off\')\n         links = self.request.form.get(\'links\', None)\n'

Repository: plone.app.theming


Branch: refs/heads/master
Date: 2020-02-14T14:30:08+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.theming/commit/7b7e8dab5d6ac08b7322bc386178d4552fbc204c

Merge pull request #172 from plone/maurits-zope5-compat

Do not call processInputs.

Files changed:
A news/171.bugfix
M src/plone/app/theming/browser/controlpanel.py
M src/plone/app/theming/browser/mapper.py

b'diff --git a/news/171.bugfix b/news/171.bugfix\nnew file mode 100644\nindex 0000000..5a76d55\n--- /dev/null\n+++ b/news/171.bugfix\n@@ -0,0 +1,3 @@\n+Do not call ``processInputs``.\n+It is not needed since Zope 4, and not existing in Zope 5.\n+[maurits]\ndiff --git a/src/plone/app/theming/browser/controlpanel.py b/src/plone/app/theming/browser/controlpanel.py\nindex 8bff914..fe45d55 100644\n--- a/src/plone/app/theming/browser/controlpanel.py\n+++ b/src/plone/app/theming/browser/controlpanel.py\n@@ -20,7 +20,6 @@\n from plone.resource.utils import queryResourceDirectory\n from Products.CMFCore.utils import getToolByName\n from Products.CMFPlone.interfaces import ILinkSchema\n-from Products.Five.browser.decode import processInputs\n from Products.statusmessages.interfaces import IStatusMessage\n from zope.component import getMultiAdapter\n from zope.component import getUtility\n@@ -106,7 +105,6 @@ def set_ext_links_open_new_window(self, value):\n \n     def update(self):\n         # XXX: complexity too high: refactoring needed\n-        processInputs(self.request)\n         self._setup()\n         self.errors = {}\n         form = self.request.form\ndiff --git a/src/plone/app/theming/browser/mapper.py b/src/plone/app/theming/browser/mapper.py\nindex ed7e8c6..776f8f9 100644\n--- a/src/plone/app/theming/browser/mapper.py\n+++ b/src/plone/app/theming/browser/mapper.py\n@@ -17,7 +17,6 @@\n from Products.CMFCore.utils import _getAuthenticatedUser\n from Products.CMFCore.utils import getToolByName\n from Products.CMFPlone.resources import add_bundle_on_request\n-from Products.Five.browser.decode import processInputs\n from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile\n from Products.statusmessages.interfaces import IStatusMessage\n from repoze.xmliter.utils import getHTMLSerializer\n@@ -61,7 +60,6 @@ def development(self):\n \n     def setup(self):\n         self.request.response.setHeader(\'X-Theme-Disabled\', \'1\')\n-        processInputs(self.request)\n \n         self.resourceDirectory = self.context\n         self.theme = getThemeFromResourceDirectory(self.context)\n@@ -218,9 +216,6 @@ def getFrame(self):\n         - a query string parameter ``title`` can be set to give a new page\n           title\n         """\n-\n-        processInputs(self.request)\n-\n         path = self.request.form.get(\'path\', None)\n         theme = self.request.form.get(\'theme\', \'off\')\n         links = self.request.form.get(\'links\', None)\n'

