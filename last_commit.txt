Repository: borg.localrole


Branch: refs/heads/master
Date: 2018-09-16T11:27:25+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/borg.localrole/commit/26514d0cd1c5ef6760753e078833ddb62f1d28bb

Fix issue StopIteration raising a Runtimeerror in Python 3.7

Files changed:
M CHANGES.rst
M borg/localrole/workspace.py

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex 83224e1..14bcc3b 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -17,6 +17,10 @@ Bug fixes:\n - Python 2 / 3 compatibility.\n   [ale-rt, pbauer]\n \n+- Fix issue StopIteration raising a Runtimeerror in Python 3.7\n+  See https://www.python.org/dev/peps/pep-0479/\n+  [pbauer]\n+\n \n 3.1.5 (2018-02-02)\n ------------------\ndiff --git a/borg/localrole/workspace.py b/borg/localrole/workspace.py\nindex 9ee016a..91247bb 100644\n--- a/borg/localrole/workspace.py\n+++ b/borg/localrole/workspace.py\n@@ -410,7 +410,7 @@ def _parent_chain(self, obj):\n         while obj is not None:\n             yield obj\n             if getattr(obj, '__ac_local_roles_block__', None):\n-                raise StopIteration\n+                return\n             new = aq_parent(aq_inner(obj))\n             # if the obj is a method we get the class\n             obj = getattr(obj, '__self__', new)\n"

Repository: borg.localrole


Branch: refs/heads/master
Date: 2018-09-16T16:41:01+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/borg.localrole/commit/5cfeba79f6deaeb38d4f0217f7bdf2dadb4a9853

Merge pull request #10 from plone/py37

Fix issue StopIteration raising a Runtimeerror in Python 3.7

Files changed:
M CHANGES.rst
M borg/localrole/workspace.py

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex 83224e1..14bcc3b 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -17,6 +17,10 @@ Bug fixes:\n - Python 2 / 3 compatibility.\n   [ale-rt, pbauer]\n \n+- Fix issue StopIteration raising a Runtimeerror in Python 3.7\n+  See https://www.python.org/dev/peps/pep-0479/\n+  [pbauer]\n+\n \n 3.1.5 (2018-02-02)\n ------------------\ndiff --git a/borg/localrole/workspace.py b/borg/localrole/workspace.py\nindex 9ee016a..91247bb 100644\n--- a/borg/localrole/workspace.py\n+++ b/borg/localrole/workspace.py\n@@ -410,7 +410,7 @@ def _parent_chain(self, obj):\n         while obj is not None:\n             yield obj\n             if getattr(obj, '__ac_local_roles_block__', None):\n-                raise StopIteration\n+                return\n             new = aq_parent(aq_inner(obj))\n             # if the obj is a method we get the class\n             obj = getattr(obj, '__self__', new)\n"

