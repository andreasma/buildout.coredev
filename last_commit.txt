Repository: mockup


Branch: refs/heads/master
Date: 2018-11-30T17:24:31+01:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/mockup/commit/435899e173cf94e08aa41e918a7555d6306f70a4

pat-resourceregistry: Add load_async and load_defer options.

Files changed:
M CHANGES.rst
M mockup/patterns/resourceregistry/js/registry.js

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex 3048d9d0c..f82014308 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -10,7 +10,8 @@ Breaking changes:\n \n New features:\n \n-- *add item here*\n+- pat-resourceregistry: Add ``load_async`` and ``load_defer`` options.\n+  [thet]\n \n Bug fixes:\n \ndiff --git a/mockup/patterns/resourceregistry/js/registry.js b/mockup/patterns/resourceregistry/js/registry.js\nindex 268d0106a..a264cfe52 100644\n--- a/mockup/patterns/resourceregistry/js/registry.js\n+++ b/mockup/patterns/resourceregistry/js/registry.js\n@@ -115,6 +115,14 @@ define([\n       name: 'conditionalcomment',\n       title: _t('Conditional comment'),\n       description: _t('Internet Explorer conditional comment')\n+    }, {\n+      name: 'load_async',\n+      title: _t('Load JavaScript asynchronously?'),\n+      view: fields.ResourceBoolFieldView\n+    }, {\n+      name: 'load_defer',\n+      title: _t('Load JavaScript deferred?'),\n+      view: fields.ResourceBoolFieldView\n     }, {\n       name: 'compile',\n       title: _t('Does your bundle contain any RequireJS or LESS files?'),\n"

Repository: mockup


Branch: refs/heads/master
Date: 2018-12-04T22:09:34+01:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/mockup/commit/ba92c11f4319470e25b5d475651aab8f26c3d4eb

Add input fiels for merge_with, last_compilation, jscompilation and csscompilation.

Files changed:
M CHANGES.rst
M mockup/patterns/resourceregistry/js/fields.js
M mockup/patterns/resourceregistry/js/registry.js

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex f82014308..2034c69d0 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -10,7 +10,9 @@ Breaking changes:\n \n New features:\n \n-- pat-resourceregistry: Add ``load_async`` and ``load_defer`` options.\n+- pat-resourceregistry:\n+  - Add input fiels for ``merge_with``, ``last_compilation``, ``jscompilation`` and ``csscompilation``.\n+  - Add ``load_async`` and ``load_defer`` options.\n   [thet]\n \n Bug fixes:\ndiff --git a/mockup/patterns/resourceregistry/js/fields.js b/mockup/patterns/resourceregistry/js/fields.js\nindex c316a132d..3161fbc74 100644\n--- a/mockup/patterns/resourceregistry/js/fields.js\n+++ b/mockup/patterns/resourceregistry/js/fields.js\n@@ -366,6 +366,16 @@ define([\n     }\n   });\n \n+\n+  var MergeWithFieldView = ResourceSelectFieldView.extend({\n+    multiple: false,\n+    getSelectOptions: function() {\n+      var self = this;\n+      return ['', 'default', 'logged-in'];\n+    }\n+  });\n+\n+\n   return {\n     ResourceDisplayFieldView: ResourceDisplayFieldView,\n     VariableFieldView: VariableFieldView,\n@@ -376,6 +386,7 @@ define([\n     BundleResourcesFieldView: BundleResourcesFieldView,\n     BundleDependsFieldView: BundleDependsFieldView,\n     ResourceBoolFieldView: ResourceBoolFieldView,\n-    PatternFieldView: PatternFieldView\n+    PatternFieldView: PatternFieldView,\n+    MergeWithFieldView: MergeWithFieldView\n   };\n });\ndiff --git a/mockup/patterns/resourceregistry/js/registry.js b/mockup/patterns/resourceregistry/js/registry.js\nindex a264cfe52..5dadcb589 100644\n--- a/mockup/patterns/resourceregistry/js/registry.js\n+++ b/mockup/patterns/resourceregistry/js/registry.js\n@@ -127,21 +127,23 @@ define([\n       name: 'compile',\n       title: _t('Does your bundle contain any RequireJS or LESS files?'),\n       view: fields.ResourceBoolFieldView\n+    }, {\n+      name: 'merge_with',\n+      title: _t('Merge with'),\n+      description: _t('In production, the bundle is merged together with others. Select which one here.'),\n+      view: fields.MergeWithFieldView\n     }, {\n       name: 'last_compilation',\n       title: _t('Last compilation'),\n-      description: _t('Date/Time when your bundle was last compiled. Empty, if it was never compiled.'),\n-      view: fields.ResourceDisplayFieldView\n+      description: _t('Date/Time when your bundle was last compiled. Empty, if it was never compiled.')\n     }, {\n       name: 'jscompilation',\n       title: _t('Compiled JavaScript'),\n-      description: _t('Automatically generated path to the compiled JavaScript.'),\n-      view: fields.ResourceDisplayFieldView\n+      description: _t('Automatically generated path to the compiled JavaScript.')\n     }, {\n       name: 'csscompilation',\n       title: _t('Compiled CSS'),\n-      description: _t('Automatically generated path to the compiled CSS.'),\n-      view: fields.ResourceDisplayFieldView\n+      description: _t('Automatically generated path to the compiled CSS.')\n     }, {\n       name: 'stub_js_modules',\n       title: _t('Stub JS Modules'),\n"

Repository: mockup


Branch: refs/heads/master
Date: 2018-12-06T00:31:51+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/mockup/commit/f9cf24eb69e6ced96e43e9e85b2600c399272ce5

Merge pull request #879 from plone/thet-async-defer

pat-resourceregistry: Add load_async and load_defer options.

Files changed:
M CHANGES.rst
M mockup/patterns/resourceregistry/js/fields.js
M mockup/patterns/resourceregistry/js/registry.js

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex 3048d9d0c..2034c69d0 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -10,7 +10,10 @@ Breaking changes:\n \n New features:\n \n-- *add item here*\n+- pat-resourceregistry:\n+  - Add input fiels for ``merge_with``, ``last_compilation``, ``jscompilation`` and ``csscompilation``.\n+  - Add ``load_async`` and ``load_defer`` options.\n+  [thet]\n \n Bug fixes:\n \ndiff --git a/mockup/patterns/resourceregistry/js/fields.js b/mockup/patterns/resourceregistry/js/fields.js\nindex c316a132d..3161fbc74 100644\n--- a/mockup/patterns/resourceregistry/js/fields.js\n+++ b/mockup/patterns/resourceregistry/js/fields.js\n@@ -366,6 +366,16 @@ define([\n     }\n   });\n \n+\n+  var MergeWithFieldView = ResourceSelectFieldView.extend({\n+    multiple: false,\n+    getSelectOptions: function() {\n+      var self = this;\n+      return ['', 'default', 'logged-in'];\n+    }\n+  });\n+\n+\n   return {\n     ResourceDisplayFieldView: ResourceDisplayFieldView,\n     VariableFieldView: VariableFieldView,\n@@ -376,6 +386,7 @@ define([\n     BundleResourcesFieldView: BundleResourcesFieldView,\n     BundleDependsFieldView: BundleDependsFieldView,\n     ResourceBoolFieldView: ResourceBoolFieldView,\n-    PatternFieldView: PatternFieldView\n+    PatternFieldView: PatternFieldView,\n+    MergeWithFieldView: MergeWithFieldView\n   };\n });\ndiff --git a/mockup/patterns/resourceregistry/js/registry.js b/mockup/patterns/resourceregistry/js/registry.js\nindex 268d0106a..5dadcb589 100644\n--- a/mockup/patterns/resourceregistry/js/registry.js\n+++ b/mockup/patterns/resourceregistry/js/registry.js\n@@ -115,25 +115,35 @@ define([\n       name: 'conditionalcomment',\n       title: _t('Conditional comment'),\n       description: _t('Internet Explorer conditional comment')\n+    }, {\n+      name: 'load_async',\n+      title: _t('Load JavaScript asynchronously?'),\n+      view: fields.ResourceBoolFieldView\n+    }, {\n+      name: 'load_defer',\n+      title: _t('Load JavaScript deferred?'),\n+      view: fields.ResourceBoolFieldView\n     }, {\n       name: 'compile',\n       title: _t('Does your bundle contain any RequireJS or LESS files?'),\n       view: fields.ResourceBoolFieldView\n+    }, {\n+      name: 'merge_with',\n+      title: _t('Merge with'),\n+      description: _t('In production, the bundle is merged together with others. Select which one here.'),\n+      view: fields.MergeWithFieldView\n     }, {\n       name: 'last_compilation',\n       title: _t('Last compilation'),\n-      description: _t('Date/Time when your bundle was last compiled. Empty, if it was never compiled.'),\n-      view: fields.ResourceDisplayFieldView\n+      description: _t('Date/Time when your bundle was last compiled. Empty, if it was never compiled.')\n     }, {\n       name: 'jscompilation',\n       title: _t('Compiled JavaScript'),\n-      description: _t('Automatically generated path to the compiled JavaScript.'),\n-      view: fields.ResourceDisplayFieldView\n+      description: _t('Automatically generated path to the compiled JavaScript.')\n     }, {\n       name: 'csscompilation',\n       title: _t('Compiled CSS'),\n-      description: _t('Automatically generated path to the compiled CSS.'),\n-      view: fields.ResourceDisplayFieldView\n+      description: _t('Automatically generated path to the compiled CSS.')\n     }, {\n       name: 'stub_js_modules',\n       title: _t('Stub JS Modules'),\n"

