Repository: plone.indexer


Branch: refs/heads/master
Date: 2019-03-26T19:44:50+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.indexer/commit/8914b3803b3d75554c50061c067e4578a55cba79

Fixed: doctests on Python 2 were not correctly checked.

Fixes https://github.com/plone/plone.indexer/issues/7

Files changed:
A news/7.bugfix
M plone/indexer/README.rst
M plone/indexer/tests.py

b'diff --git a/news/7.bugfix b/news/7.bugfix\nnew file mode 100644\nindex 0000000..df128e1\n--- /dev/null\n+++ b/news/7.bugfix\n@@ -0,0 +1 @@\n+Fixed: doctests on Python 2 were not correctly checked.  [maurits]\ndiff --git a/plone/indexer/README.rst b/plone/indexer/README.rst\nindex 47db46d..73c94a3 100644\n--- a/plone/indexer/README.rst\n+++ b/plone/indexer/README.rst\n@@ -163,7 +163,7 @@ We have a compatibility alias in this package for use with CMF 2.1.\n     ...                 indexed_value = getattr(object, idx)\n     ...                 if callable(indexed_value):\n     ...                     indexed_value = indexed_value()\n-    ...                 print(idx, "=", indexed_value)\n+    ...                 print("{0} = {1}".format(idx, indexed_value))\n     ...             except (AttributeError, TypeError,):\n     ...                 pass\n \ndiff --git a/plone/indexer/tests.py b/plone/indexer/tests.py\nindex e876ff8..0988a07 100644\n--- a/plone/indexer/tests.py\n+++ b/plone/indexer/tests.py\n@@ -25,7 +25,7 @@ def my_func(obj):\n class Py23DocChecker(doctest.OutputChecker):\n     def check_output(self, want, got, optionflags):\n         if six.PY2:\n-            got = re.sub("u\'(.*?)\'", "\'\\\\1\'", want)\n+            got = re.sub("u\'(.*?)\'", "\'\\\\1\'", got)\n         return doctest.OutputChecker.check_output(self, want, got, optionflags)\n \n \n'

Repository: plone.indexer


Branch: refs/heads/master
Date: 2019-03-27T00:51:08+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.indexer/commit/3d9036e51c6ce4552fec165a2d86caed6645ed20

Merge pull request #8 from plone/maurits-issue-7-py23docchecker

Fixed: doctests on Python 2 were not correctly checked.

Files changed:
A news/7.bugfix
M plone/indexer/README.rst
M plone/indexer/tests.py

b'diff --git a/news/7.bugfix b/news/7.bugfix\nnew file mode 100644\nindex 0000000..df128e1\n--- /dev/null\n+++ b/news/7.bugfix\n@@ -0,0 +1 @@\n+Fixed: doctests on Python 2 were not correctly checked.  [maurits]\ndiff --git a/plone/indexer/README.rst b/plone/indexer/README.rst\nindex 47db46d..73c94a3 100644\n--- a/plone/indexer/README.rst\n+++ b/plone/indexer/README.rst\n@@ -163,7 +163,7 @@ We have a compatibility alias in this package for use with CMF 2.1.\n     ...                 indexed_value = getattr(object, idx)\n     ...                 if callable(indexed_value):\n     ...                     indexed_value = indexed_value()\n-    ...                 print(idx, "=", indexed_value)\n+    ...                 print("{0} = {1}".format(idx, indexed_value))\n     ...             except (AttributeError, TypeError,):\n     ...                 pass\n \ndiff --git a/plone/indexer/tests.py b/plone/indexer/tests.py\nindex e876ff8..0988a07 100644\n--- a/plone/indexer/tests.py\n+++ b/plone/indexer/tests.py\n@@ -25,7 +25,7 @@ def my_func(obj):\n class Py23DocChecker(doctest.OutputChecker):\n     def check_output(self, want, got, optionflags):\n         if six.PY2:\n-            got = re.sub("u\'(.*?)\'", "\'\\\\1\'", want)\n+            got = re.sub("u\'(.*?)\'", "\'\\\\1\'", got)\n         return doctest.OutputChecker.check_output(self, want, got, optionflags)\n \n \n'

