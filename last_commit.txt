Repository: plone.app.layout


Branch: refs/heads/master
Date: 2019-12-16T12:10:37+01:00
Author: ale-rt (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/plone.app.layout/commit/d9d8704d9adb0074da3f460670d35511d480bd63

Restore compatibility

Restore compatibility with old code that was inheriting from this class and overriding the __init__ method

Fixes #227
Refs #220

Files changed:
A news/227.bugfix
M plone/app/layout/analytics/view.py

b'diff --git a/news/227.bugfix b/news/227.bugfix\nnew file mode 100644\nindex 00000000..2d5c4765\n--- /dev/null\n+++ b/news/227.bugfix\n@@ -0,0 +1 @@\n+Restore compatibility with old code that was inheriting from this class and overriding the __init__ method\ndiff --git a/plone/app/layout/analytics/view.py b/plone/app/layout/analytics/view.py\nindex 89c7414e..d612f8db 100644\n--- a/plone/app/layout/analytics/view.py\n+++ b/plone/app/layout/analytics/view.py\n@@ -20,7 +20,6 @@ def __init__(self, context, request, view, manager):\n         self.request = request\n         self.view = view\n         self.manager = manager\n-        self.webstats_js = \'\'\n \n     def update(self):\n         """render the webstats snippet"""\n@@ -31,4 +30,4 @@ def update(self):\n             if site_settings.webstats_js:\n                 self.webstats_js = site_settings.webstats_js\n         except AttributeError:\n-            pass\n+            self.webstats_js = u""\n'

Repository: plone.app.layout


Branch: refs/heads/master
Date: 2019-12-16T14:00:01+01:00
Author: Alessandro Pisa (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/plone.app.layout/commit/dba29a03ffd4a7ab321a7210dccb5fe2cb002e8c

Merge pull request #228 from plone/227-fix-default

Restore compatibility

Files changed:
A news/227.bugfix
M plone/app/layout/analytics/view.py

b'diff --git a/news/227.bugfix b/news/227.bugfix\nnew file mode 100644\nindex 00000000..2d5c4765\n--- /dev/null\n+++ b/news/227.bugfix\n@@ -0,0 +1 @@\n+Restore compatibility with old code that was inheriting from this class and overriding the __init__ method\ndiff --git a/plone/app/layout/analytics/view.py b/plone/app/layout/analytics/view.py\nindex 89c7414e..d612f8db 100644\n--- a/plone/app/layout/analytics/view.py\n+++ b/plone/app/layout/analytics/view.py\n@@ -20,7 +20,6 @@ def __init__(self, context, request, view, manager):\n         self.request = request\n         self.view = view\n         self.manager = manager\n-        self.webstats_js = \'\'\n \n     def update(self):\n         """render the webstats snippet"""\n@@ -31,4 +30,4 @@ def update(self):\n             if site_settings.webstats_js:\n                 self.webstats_js = site_settings.webstats_js\n         except AttributeError:\n-            pass\n+            self.webstats_js = u""\n'

