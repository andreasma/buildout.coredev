Repository: Products.CMFPlone


Branch: refs/heads/5.1.x
Date: 2019-02-19T14:36:16+01:00
Author: Markus Hilbert (iham) <markus.hilbert@iham.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/6b20206638259184144bdbed025fe47395b45f41

Views for title and description.

Views for title and description.

Files changed:
A Products/CMFPlone/browser/templates/description.pt
A Products/CMFPlone/browser/templates/title.pt
A news/2740.feature
M Products/CMFPlone/browser/configure.zcml
M Products/CMFPlone/browser/templates/main_template.pt

b'diff --git a/Products/CMFPlone/browser/configure.zcml b/Products/CMFPlone/browser/configure.zcml\nindex 2bb25f8c8..372f826cd 100644\n--- a/Products/CMFPlone/browser/configure.zcml\n+++ b/Products/CMFPlone/browser/configure.zcml\n@@ -94,6 +94,20 @@\n       permission="zope.Public"\n       />\n \n+  <browser:page\n+      for="*"\n+      name="title"\n+      template="templates/title.pt"\n+      permission="zope.Public"\n+      />\n+\n+  <browser:page\n+      for="*"\n+      name="description"\n+      template="templates/description.pt"\n+      permission="zope.Public"\n+      />\n+\n   <browser:page\n       for="*"\n       name="render-toolbar"\ndiff --git a/Products/CMFPlone/browser/templates/description.pt b/Products/CMFPlone/browser/templates/description.pt\nnew file mode 100644\nindex 000000000..159c3534b\n--- /dev/null\n+++ b/Products/CMFPlone/browser/templates/description.pt\n@@ -0,0 +1,6 @@\n+<div class="documentDescription description"\n+    tal:define="description context/Description"\n+    tal:content="description"\n+    tal:condition="description">\n+  Description\n+</div>\ndiff --git a/Products/CMFPlone/browser/templates/main_template.pt b/Products/CMFPlone/browser/templates/main_template.pt\nindex 2660dbce8..2b1d3915a 100644\n--- a/Products/CMFPlone/browser/templates/main_template.pt\n+++ b/Products/CMFPlone/browser/templates/main_template.pt\n@@ -85,20 +85,12 @@\n           <header>\n             <div id="viewlet-above-content-title" tal:content="structure provider:plone.abovecontenttitle" />\n             <metal:title define-slot="content-title">\n-                <h1 class="documentFirstHeading"\n-                    tal:define="title context/Title"\n-                    tal:condition="title"\n-                    tal:content="title">Title or id</h1>\n+              <h1 tal:replace="structure context/@@title" />\n             </metal:title>\n             <div id="viewlet-below-content-title" tal:content="structure provider:plone.belowcontenttitle" />\n \n             <metal:description define-slot="content-description">\n-                <div class="documentDescription description"\n-                     tal:define="description context/Description"\n-                     tal:content="description"\n-                     tal:condition="description">\n-                    Description\n-                </div>\n+              <p tal:replace="structure context/@@description" />\n             </metal:description>\n           </header>\n \ndiff --git a/Products/CMFPlone/browser/templates/title.pt b/Products/CMFPlone/browser/templates/title.pt\nnew file mode 100644\nindex 000000000..8c6e94193\n--- /dev/null\n+++ b/Products/CMFPlone/browser/templates/title.pt\n@@ -0,0 +1,4 @@\n+<h1 class="documentFirstHeading"\n+  tal:define="title context/Title"\n+  tal:condition="title"\n+  tal:content="title">Title or id</h1>\ndiff --git a/news/2740.feature b/news/2740.feature\nnew file mode 100644\nindex 000000000..340ea9a2f\n--- /dev/null\n+++ b/news/2740.feature\n@@ -0,0 +1 @@\n+Views for title and description. [iham]\n\\ No newline at end of file\n'

Repository: Products.CMFPlone


Branch: refs/heads/5.1.x
Date: 2019-02-19T15:46:59+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/e32613cde1dc9c465ade592138714f5a6b69e270

Merge pull request #2759 from plone/5.1.x-plip-2740

Views for title and description.

Files changed:
A Products/CMFPlone/browser/templates/description.pt
A Products/CMFPlone/browser/templates/title.pt
A news/2740.feature
M Products/CMFPlone/browser/configure.zcml
M Products/CMFPlone/browser/templates/main_template.pt

b'diff --git a/Products/CMFPlone/browser/configure.zcml b/Products/CMFPlone/browser/configure.zcml\nindex 2bb25f8c8..372f826cd 100644\n--- a/Products/CMFPlone/browser/configure.zcml\n+++ b/Products/CMFPlone/browser/configure.zcml\n@@ -94,6 +94,20 @@\n       permission="zope.Public"\n       />\n \n+  <browser:page\n+      for="*"\n+      name="title"\n+      template="templates/title.pt"\n+      permission="zope.Public"\n+      />\n+\n+  <browser:page\n+      for="*"\n+      name="description"\n+      template="templates/description.pt"\n+      permission="zope.Public"\n+      />\n+\n   <browser:page\n       for="*"\n       name="render-toolbar"\ndiff --git a/Products/CMFPlone/browser/templates/description.pt b/Products/CMFPlone/browser/templates/description.pt\nnew file mode 100644\nindex 000000000..159c3534b\n--- /dev/null\n+++ b/Products/CMFPlone/browser/templates/description.pt\n@@ -0,0 +1,6 @@\n+<div class="documentDescription description"\n+    tal:define="description context/Description"\n+    tal:content="description"\n+    tal:condition="description">\n+  Description\n+</div>\ndiff --git a/Products/CMFPlone/browser/templates/main_template.pt b/Products/CMFPlone/browser/templates/main_template.pt\nindex 2660dbce8..2b1d3915a 100644\n--- a/Products/CMFPlone/browser/templates/main_template.pt\n+++ b/Products/CMFPlone/browser/templates/main_template.pt\n@@ -85,20 +85,12 @@\n           <header>\n             <div id="viewlet-above-content-title" tal:content="structure provider:plone.abovecontenttitle" />\n             <metal:title define-slot="content-title">\n-                <h1 class="documentFirstHeading"\n-                    tal:define="title context/Title"\n-                    tal:condition="title"\n-                    tal:content="title">Title or id</h1>\n+              <h1 tal:replace="structure context/@@title" />\n             </metal:title>\n             <div id="viewlet-below-content-title" tal:content="structure provider:plone.belowcontenttitle" />\n \n             <metal:description define-slot="content-description">\n-                <div class="documentDescription description"\n-                     tal:define="description context/Description"\n-                     tal:content="description"\n-                     tal:condition="description">\n-                    Description\n-                </div>\n+              <p tal:replace="structure context/@@description" />\n             </metal:description>\n           </header>\n \ndiff --git a/Products/CMFPlone/browser/templates/title.pt b/Products/CMFPlone/browser/templates/title.pt\nnew file mode 100644\nindex 000000000..8c6e94193\n--- /dev/null\n+++ b/Products/CMFPlone/browser/templates/title.pt\n@@ -0,0 +1,4 @@\n+<h1 class="documentFirstHeading"\n+  tal:define="title context/Title"\n+  tal:condition="title"\n+  tal:content="title">Title or id</h1>\ndiff --git a/news/2740.feature b/news/2740.feature\nnew file mode 100644\nindex 000000000..340ea9a2f\n--- /dev/null\n+++ b/news/2740.feature\n@@ -0,0 +1 @@\n+Views for title and description. [iham]\n\\ No newline at end of file\n'

