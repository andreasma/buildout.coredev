Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2018-07-10T23:29:02-03:00
Author: Franco Pellegrini (frapell) <frapell@gmail.com>
Commit: https://github.com/plone/plone.app.upgrade/commit/f60b59965d1849648e071ddd620d4a93d0263912

Add upgrade steps for Datatbles on Plone 5.1.4

Files changed:
A plone/app/upgrade/v51/profiles/to_514/registry.xml
M CHANGES.rst
M plone/app/upgrade/v51/configure.zcml
M plone/app/upgrade/v51/profiles.zcml

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 6cd7462f..a2d6039e 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -10,7 +10,8 @@ Breaking changes:\n \n New features:\n \n-- *add item here*\n+- Add upgrade steps for Datatbles on Plone 5.1.4\n+  [frapell]\n \n Bug fixes:\n \ndiff --git a/plone/app/upgrade/v51/configure.zcml b/plone/app/upgrade/v51/configure.zcml\nindex 900f0905..a56c241f 100644\n--- a/plone/app/upgrade/v51/configure.zcml\n+++ b/plone/app/upgrade/v51/configure.zcml\n@@ -256,6 +256,12 @@ Add image scaling options to image handling control panel.\n         destination="5114"\n         profile="Products.CMFPlone:plone">\n \n+        <gs:upgradeDepends\n+            title="Run to514 upgrade profile."\n+            description="Update resources for Datatables"\n+            import_profile="plone.app.upgrade.v51:to514"\n+            />\n+\n         <gs:upgradeStep\n             title="Miscellaneous"\n             description=""\ndiff --git a/plone/app/upgrade/v51/profiles.zcml b/plone/app/upgrade/v51/profiles.zcml\nindex e90ab39c..1e46ddc3 100644\n--- a/plone/app/upgrade/v51/profiles.zcml\n+++ b/plone/app/upgrade/v51/profiles.zcml\n@@ -77,4 +77,13 @@\n       provides="Products.GenericSetup.interfaces.EXTENSION"\n       />\n \n+  <genericsetup:registerProfile\n+      name="to514"\n+      title="Upgrade profile for Plone 5.1.3 to Plone 5.1.4"\n+      description=""\n+      directory="profiles/to_514"\n+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      />\n+\n </configure>\ndiff --git a/plone/app/upgrade/v51/profiles/to_514/registry.xml b/plone/app/upgrade/v51/profiles/to_514/registry.xml\nnew file mode 100644\nindex 00000000..83ad3c05\n--- /dev/null\n+++ b/plone/app/upgrade/v51/profiles/to_514/registry.xml\n@@ -0,0 +1,122 @@\n+<?xml version="1.0"?>\n+<registry>\n+\n+  <records prefix="plone.resources/mockup-patterns-datatables"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++resource++mockup/datatables/pattern.js</value>\n+      <value key="css">\n+        <element>++resource++mockup/datatables/pattern.datatables.less</element>\n+      </value>\n+  </records>\n+\n+  <!-- DataTables resources -->\n+  <records prefix="plone.resources/datatables.net"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net/js/jquery.dataTables.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-bs"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-bs/js/dataTables.bootstrap.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-autofill"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-autofill/js/dataTables.autoFill.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-autofill-bs"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-autofill-bs/js/autoFill.bootstrap.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-buttons"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-buttons/js/dataTables.buttons.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-buttons-colvis"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-buttons/js/buttons.colVis.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-buttons-flash"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-buttons/js/buttons.flash.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-buttons-html5"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-buttons/js/buttons.html5.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-buttons-print"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-buttons/js/buttons.print.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-buttons-bs"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-buttons-bs/js/buttons.bootstrap.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-colreorder"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-colreorder/js/dataTables.colReorder.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-fixedcolumns"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-fixedcolumns/js/dataTables.fixedColumns.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-fixedheader"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-keytable"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-keytable/js/dataTables.keyTable.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-responsive"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-responsive/js/dataTables.responsive.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-responsive-bs"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-responsive-bs/js/responsive.bootstrap.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-rowreorder"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-rowreorder/js/dataTables.rowReorder.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-scroller"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-scroller/js/dataTables.scroller.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-select"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-select/js/dataTables.select.min.js</value>\n+  </records>\n+\n+  <!-- Update ``last_compilation`` to deliver new bundles -->\n+  <records\n+      prefix="plone.bundles/plone"\n+      interface="Products.CMFPlone.interfaces.IBundleRegistry"\n+      purge="False">\n+    <value key="last_compilation">2018-07-10 00:00:00</value>\n+  </records>\n+  <records\n+      prefix="plone.bundles/plone-logged-in"\n+      interface="Products.CMFPlone.interfaces.IBundleRegistry"\n+      purge="False">\n+    <value key="last_compilation">2018-07-10 00:00:00</value>\n+  </records>\n+\n+</registry>\n'

Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2018-07-12T12:06:09+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.app.upgrade/commit/96fa24e5d78aa6278e77a45b324f42cee5399285

Merge pull request #168 from plone/frapell-5.1.x-datatables

Add upgrade steps for Datatbles on Plone 5.1.4

Files changed:
A plone/app/upgrade/v51/profiles/to_514/registry.xml
M CHANGES.rst
M plone/app/upgrade/v51/configure.zcml
M plone/app/upgrade/v51/profiles.zcml

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 6cd7462f..a2d6039e 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -10,7 +10,8 @@ Breaking changes:\n \n New features:\n \n-- *add item here*\n+- Add upgrade steps for Datatbles on Plone 5.1.4\n+  [frapell]\n \n Bug fixes:\n \ndiff --git a/plone/app/upgrade/v51/configure.zcml b/plone/app/upgrade/v51/configure.zcml\nindex 900f0905..a56c241f 100644\n--- a/plone/app/upgrade/v51/configure.zcml\n+++ b/plone/app/upgrade/v51/configure.zcml\n@@ -256,6 +256,12 @@ Add image scaling options to image handling control panel.\n         destination="5114"\n         profile="Products.CMFPlone:plone">\n \n+        <gs:upgradeDepends\n+            title="Run to514 upgrade profile."\n+            description="Update resources for Datatables"\n+            import_profile="plone.app.upgrade.v51:to514"\n+            />\n+\n         <gs:upgradeStep\n             title="Miscellaneous"\n             description=""\ndiff --git a/plone/app/upgrade/v51/profiles.zcml b/plone/app/upgrade/v51/profiles.zcml\nindex e90ab39c..1e46ddc3 100644\n--- a/plone/app/upgrade/v51/profiles.zcml\n+++ b/plone/app/upgrade/v51/profiles.zcml\n@@ -77,4 +77,13 @@\n       provides="Products.GenericSetup.interfaces.EXTENSION"\n       />\n \n+  <genericsetup:registerProfile\n+      name="to514"\n+      title="Upgrade profile for Plone 5.1.3 to Plone 5.1.4"\n+      description=""\n+      directory="profiles/to_514"\n+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      />\n+\n </configure>\ndiff --git a/plone/app/upgrade/v51/profiles/to_514/registry.xml b/plone/app/upgrade/v51/profiles/to_514/registry.xml\nnew file mode 100644\nindex 00000000..83ad3c05\n--- /dev/null\n+++ b/plone/app/upgrade/v51/profiles/to_514/registry.xml\n@@ -0,0 +1,122 @@\n+<?xml version="1.0"?>\n+<registry>\n+\n+  <records prefix="plone.resources/mockup-patterns-datatables"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++resource++mockup/datatables/pattern.js</value>\n+      <value key="css">\n+        <element>++resource++mockup/datatables/pattern.datatables.less</element>\n+      </value>\n+  </records>\n+\n+  <!-- DataTables resources -->\n+  <records prefix="plone.resources/datatables.net"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net/js/jquery.dataTables.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-bs"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-bs/js/dataTables.bootstrap.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-autofill"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-autofill/js/dataTables.autoFill.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-autofill-bs"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-autofill-bs/js/autoFill.bootstrap.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-buttons"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-buttons/js/dataTables.buttons.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-buttons-colvis"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-buttons/js/buttons.colVis.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-buttons-flash"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-buttons/js/buttons.flash.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-buttons-html5"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-buttons/js/buttons.html5.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-buttons-print"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-buttons/js/buttons.print.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-buttons-bs"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-buttons-bs/js/buttons.bootstrap.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-colreorder"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-colreorder/js/dataTables.colReorder.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-fixedcolumns"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-fixedcolumns/js/dataTables.fixedColumns.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-fixedheader"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-fixedheader/js/dataTables.fixedHeader.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-keytable"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-keytable/js/dataTables.keyTable.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-responsive"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-responsive/js/dataTables.responsive.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-responsive-bs"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-responsive-bs/js/responsive.bootstrap.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-rowreorder"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-rowreorder/js/dataTables.rowReorder.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-scroller"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-scroller/js/dataTables.scroller.min.js</value>\n+  </records>\n+\n+  <records prefix="plone.resources/datatables.net-select"\n+            interface=\'Products.CMFPlone.interfaces.IResourceRegistry\'>\n+      <value key="js">++plone++static/components/datatables.net-select/js/dataTables.select.min.js</value>\n+  </records>\n+\n+  <!-- Update ``last_compilation`` to deliver new bundles -->\n+  <records\n+      prefix="plone.bundles/plone"\n+      interface="Products.CMFPlone.interfaces.IBundleRegistry"\n+      purge="False">\n+    <value key="last_compilation">2018-07-10 00:00:00</value>\n+  </records>\n+  <records\n+      prefix="plone.bundles/plone-logged-in"\n+      interface="Products.CMFPlone.interfaces.IBundleRegistry"\n+      purge="False">\n+    <value key="last_compilation">2018-07-10 00:00:00</value>\n+  </records>\n+\n+</registry>\n'

