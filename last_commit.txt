Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2019-05-20T13:10:00+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.upgrade/commit/27c08647b3bfc07e7eac079ccd55d5076693a3a8

Reload ISecuritySchema to create plone.autologin_after_password_reset key for Plone 5.2.

Files changed:
A news/2440.bugfix
A plone/app/upgrade/v52/profiles/to_rc4/registry/security.xml
M plone/app/upgrade/v52/configure.zcml
M plone/app/upgrade/v52/profiles.zcml

b'diff --git a/news/2440.bugfix b/news/2440.bugfix\nnew file mode 100644\nindex 00000000..2784b6cb\n--- /dev/null\n+++ b/news/2440.bugfix\n@@ -0,0 +1,2 @@\n+Reload ISecuritySchema to create plone.autologin_after_password_reset key for Plone 5.2.\n+[jensens, agitator, maurits]\n\\ No newline at end of file\ndiff --git a/plone/app/upgrade/v52/configure.zcml b/plone/app/upgrade/v52/configure.zcml\nindex 3466440e..bee9988c 100644\n--- a/plone/app/upgrade/v52/configure.zcml\n+++ b/plone/app/upgrade/v52/configure.zcml\n@@ -87,10 +87,9 @@\n         destination="5205"\n         profile="Products.CMFPlone:plone">\n \n-        <gs:upgradeStep\n+        <gs:upgradeDepends\n             title="Miscellaneous"\n-            description=""\n-            handler="..utils.null_upgrade_step"\n+            import_profile="plone.app.upgrade.v52:to52rc4"\n             />\n \n     </gs:upgradeSteps>\ndiff --git a/plone/app/upgrade/v52/profiles.zcml b/plone/app/upgrade/v52/profiles.zcml\nindex a5cdc7a7..13b5e817 100644\n--- a/plone/app/upgrade/v52/profiles.zcml\n+++ b/plone/app/upgrade/v52/profiles.zcml\n@@ -29,4 +29,14 @@\n       for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"\n       provides="Products.GenericSetup.interfaces.EXTENSION"\n       />\n+\n+  <genericsetup:registerProfile\n+      name="to52rc4"\n+      title="Upgrade profile for Plone 5.2rc3 to Plone 5.2rc4"\n+      description=""\n+      directory="profiles/to_rc4"\n+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      />\n+\n </configure>\ndiff --git a/plone/app/upgrade/v52/profiles/to_rc4/registry/security.xml b/plone/app/upgrade/v52/profiles/to_rc4/registry/security.xml\nnew file mode 100644\nindex 00000000..cf0a3e7c\n--- /dev/null\n+++ b/plone/app/upgrade/v52/profiles/to_rc4/registry/security.xml\n@@ -0,0 +1,7 @@\n+<?xml version="1.0"?>\n+<registry>\n+\n+  <records interface="Products.CMFPlone.interfaces.ISecuritySchema"\n+\t           prefix="plone" />\n+\n+</registry>\n'

Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2019-05-21T23:01:06+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.upgrade/commit/cdad083b9d88e46b988c5c362c894d4626ee2047

Merge pull request #206 from plone/reload-security-schema-52rc4

Reload ISecuritySchema for plone.autologin_after_password_reset

Files changed:
A news/2440.bugfix
A plone/app/upgrade/v52/profiles/to_rc4/registry/security.xml
M plone/app/upgrade/v52/configure.zcml
M plone/app/upgrade/v52/profiles.zcml

b'diff --git a/news/2440.bugfix b/news/2440.bugfix\nnew file mode 100644\nindex 00000000..2784b6cb\n--- /dev/null\n+++ b/news/2440.bugfix\n@@ -0,0 +1,2 @@\n+Reload ISecuritySchema to create plone.autologin_after_password_reset key for Plone 5.2.\n+[jensens, agitator, maurits]\n\\ No newline at end of file\ndiff --git a/plone/app/upgrade/v52/configure.zcml b/plone/app/upgrade/v52/configure.zcml\nindex 3466440e..bee9988c 100644\n--- a/plone/app/upgrade/v52/configure.zcml\n+++ b/plone/app/upgrade/v52/configure.zcml\n@@ -87,10 +87,9 @@\n         destination="5205"\n         profile="Products.CMFPlone:plone">\n \n-        <gs:upgradeStep\n+        <gs:upgradeDepends\n             title="Miscellaneous"\n-            description=""\n-            handler="..utils.null_upgrade_step"\n+            import_profile="plone.app.upgrade.v52:to52rc4"\n             />\n \n     </gs:upgradeSteps>\ndiff --git a/plone/app/upgrade/v52/profiles.zcml b/plone/app/upgrade/v52/profiles.zcml\nindex a5cdc7a7..13b5e817 100644\n--- a/plone/app/upgrade/v52/profiles.zcml\n+++ b/plone/app/upgrade/v52/profiles.zcml\n@@ -29,4 +29,14 @@\n       for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"\n       provides="Products.GenericSetup.interfaces.EXTENSION"\n       />\n+\n+  <genericsetup:registerProfile\n+      name="to52rc4"\n+      title="Upgrade profile for Plone 5.2rc3 to Plone 5.2rc4"\n+      description=""\n+      directory="profiles/to_rc4"\n+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      />\n+\n </configure>\ndiff --git a/plone/app/upgrade/v52/profiles/to_rc4/registry/security.xml b/plone/app/upgrade/v52/profiles/to_rc4/registry/security.xml\nnew file mode 100644\nindex 00000000..cf0a3e7c\n--- /dev/null\n+++ b/plone/app/upgrade/v52/profiles/to_rc4/registry/security.xml\n@@ -0,0 +1,7 @@\n+<?xml version="1.0"?>\n+<registry>\n+\n+  <records interface="Products.CMFPlone.interfaces.ISecuritySchema"\n+\t           prefix="plone" />\n+\n+</registry>\n'

