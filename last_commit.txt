Repository: plone.app.versioningbehavior


Branch: refs/heads/master
Date: 2018-10-01T16:51:32+02:00
Author: Gil Forcada (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.versioningbehavior/commit/421966544a49b41b820c7058a792c8f0713bf0cb

Drop zope.app.intid dependency

Files changed:
M CHANGES.rst
M plone/app/versioningbehavior/tests/test_modifiers.py
M setup.py

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex 24d2105..a81df80 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -14,8 +14,8 @@ New features:\n \n Bug fixes:\n \n-- *add item here*\n-\n+- Remove (testing) dependency on zope.app.intid.\n+  [gforcada]\n \n 1.3.4 (2018-09-25)\n ------------------\ndiff --git a/plone/app/versioningbehavior/tests/test_modifiers.py b/plone/app/versioningbehavior/tests/test_modifiers.py\nindex 1a3c38e..56c27dd 100644\n--- a/plone/app/versioningbehavior/tests/test_modifiers.py\n+++ b/plone/app/versioningbehavior/tests/test_modifiers.py\n@@ -18,11 +18,11 @@\n from z3c.relationfield.schema import RelationChoice\n from z3c.relationfield.schema import RelationList\n from ZODB.interfaces import IBlob\n-from zope.app.intid.interfaces import IIntIds\n from zope.component import getUtility\n from zope.configuration import xmlconfig\n from zope.interface import alsoProvides\n from zope.interface import Interface\n+from zope.intid.interfaces import IIntIds\n \n import unittest\n \n@@ -210,10 +210,6 @@ def testRelations(self):\n         )\n         self.portal.portal_types._setObject('RelationsType', rel_fti)\n \n-        # Setup IIntIds utility which is required for relations to work\n-        from five.intid import site\n-        from zope.app.intid.interfaces import IIntIds\n-        site.add_intids(self.portal)\n         intids = getUtility(IIntIds)\n \n         source = createContentInContainer(self.portal, 'RelationsType')\n@@ -284,9 +280,6 @@ def register_RelationsType(self):\n         )\n         self.portal.portal_types._setObject('RelationsType', rel_fti)\n \n-        # Setup IIntIds utility which is required for relations to work\n-        site.add_intids(self.portal)\n-\n     def testRelationsInBehaviors(self):\n         self.register_RelationsType()\n         intids = getUtility(IIntIds)\ndiff --git a/setup.py b/setup.py\nindex e47a2b4..5e8a170 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -15,7 +15,6 @@\n     'plone.app.dexterity',\n     'plone.app.testing',\n     'plone.namedfile[blobs]',\n-    'zope.app.intid',\n ]\n \n setup(\n"

Repository: plone.app.versioningbehavior


Branch: refs/heads/master
Date: 2018-10-03T18:06:04+02:00
Author: Alessandro Pisa (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/plone.app.versioningbehavior/commit/f767bfccffa0522b772067eccec5f0d458021bee

Merge pull request #41 from plone/remove-z.a.intid-dep

Drop zope.app.intid dependency

Files changed:
M CHANGES.rst
M plone/app/versioningbehavior/tests/test_modifiers.py
M setup.py

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex 24d2105..a81df80 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -14,8 +14,8 @@ New features:\n \n Bug fixes:\n \n-- *add item here*\n-\n+- Remove (testing) dependency on zope.app.intid.\n+  [gforcada]\n \n 1.3.4 (2018-09-25)\n ------------------\ndiff --git a/plone/app/versioningbehavior/tests/test_modifiers.py b/plone/app/versioningbehavior/tests/test_modifiers.py\nindex 1a3c38e..56c27dd 100644\n--- a/plone/app/versioningbehavior/tests/test_modifiers.py\n+++ b/plone/app/versioningbehavior/tests/test_modifiers.py\n@@ -18,11 +18,11 @@\n from z3c.relationfield.schema import RelationChoice\n from z3c.relationfield.schema import RelationList\n from ZODB.interfaces import IBlob\n-from zope.app.intid.interfaces import IIntIds\n from zope.component import getUtility\n from zope.configuration import xmlconfig\n from zope.interface import alsoProvides\n from zope.interface import Interface\n+from zope.intid.interfaces import IIntIds\n \n import unittest\n \n@@ -210,10 +210,6 @@ def testRelations(self):\n         )\n         self.portal.portal_types._setObject('RelationsType', rel_fti)\n \n-        # Setup IIntIds utility which is required for relations to work\n-        from five.intid import site\n-        from zope.app.intid.interfaces import IIntIds\n-        site.add_intids(self.portal)\n         intids = getUtility(IIntIds)\n \n         source = createContentInContainer(self.portal, 'RelationsType')\n@@ -284,9 +280,6 @@ def register_RelationsType(self):\n         )\n         self.portal.portal_types._setObject('RelationsType', rel_fti)\n \n-        # Setup IIntIds utility which is required for relations to work\n-        site.add_intids(self.portal)\n-\n     def testRelationsInBehaviors(self):\n         self.register_RelationsType()\n         intids = getUtility(IIntIds)\ndiff --git a/setup.py b/setup.py\nindex 1aa4ec7..d659f80 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -15,7 +15,6 @@\n     'plone.app.dexterity',\n     'plone.app.testing',\n     'plone.namedfile[blobs]',\n-    'zope.app.intid',\n ]\n \n setup(\n"

