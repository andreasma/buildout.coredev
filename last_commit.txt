Repository: mockup


Branch: refs/heads/master
Date: 2018-10-04T14:39:36+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/mockup/commit/e1de27fda8964c172c9069d223482af0c5309e87

Structure pattern: Fix URL for current path for popovers.
Refs: https://github.com/plone/mockup/issues/857

Files changed:
M CHANGES.rst
M mockup/patterns/structure/js/views/generic-popover.js

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex 7c5ed1d11..2d1b8f679 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -14,6 +14,10 @@ New features:\n \n Bug fixes:\n \n+- Structure pattern: Fix URL for current path for popovers.\n+  Refs: https://github.com/plone/mockup/issues/857\n+  [thet]\n+\n - Structure pattern: Fix spacing for attribute-columns popover.\n   [tmassman]\n \ndiff --git a/mockup/patterns/structure/js/views/generic-popover.js b/mockup/patterns/structure/js/views/generic-popover.js\nindex f42307bd1..b2eacfdf2 100644\n--- a/mockup/patterns/structure/js/views/generic-popover.js\n+++ b/mockup/patterns/structure/js/views/generic-popover.js\n@@ -66,8 +66,9 @@ define([\n       if (self.options.form.dataUrl) {\n         self.$('.popover-content').html(_t('Loading...'));\n         self.app.loading.show();\n+        var url = self.app.getAjaxUrl(self.options.form.dataUrl);\n         $.ajax({\n-          url: self.options.form.dataUrl,\n+          url: url,\n           dataType: 'json',\n           type: 'POST',\n           cache: false,\n"

Repository: mockup


Branch: refs/heads/master
Date: 2018-10-05T16:22:11+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/mockup/commit/c1de8035f71b1e36254db32c0c0385c870228a98

Merge pull request #876 from plone/fix-857

Structure pattern: Fix URL for current path for popovers.

Files changed:
M CHANGES.rst
M mockup/patterns/structure/js/views/generic-popover.js

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex 7c5ed1d11..2d1b8f679 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -14,6 +14,10 @@ New features:\n \n Bug fixes:\n \n+- Structure pattern: Fix URL for current path for popovers.\n+  Refs: https://github.com/plone/mockup/issues/857\n+  [thet]\n+\n - Structure pattern: Fix spacing for attribute-columns popover.\n   [tmassman]\n \ndiff --git a/mockup/patterns/structure/js/views/generic-popover.js b/mockup/patterns/structure/js/views/generic-popover.js\nindex f42307bd1..b2eacfdf2 100644\n--- a/mockup/patterns/structure/js/views/generic-popover.js\n+++ b/mockup/patterns/structure/js/views/generic-popover.js\n@@ -66,8 +66,9 @@ define([\n       if (self.options.form.dataUrl) {\n         self.$('.popover-content').html(_t('Loading...'));\n         self.app.loading.show();\n+        var url = self.app.getAjaxUrl(self.options.form.dataUrl);\n         $.ajax({\n-          url: self.options.form.dataUrl,\n+          url: url,\n           dataType: 'json',\n           type: 'POST',\n           cache: false,\n"

