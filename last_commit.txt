Repository: Products.PortalTransforms


Branch: refs/heads/master
Date: 2018-03-17T09:08:45+01:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/Products.PortalTransforms/commit/d53e9bc780cabe3c7d4a1d950c30631ce8e140a9

Begin fixing startup in py3

Files changed:
M CHANGES.rst
M Products/PortalTransforms/Transform.py
M Products/PortalTransforms/chain.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 0dd98c7..30c4f79 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -22,6 +22,9 @@ Bug fixes:
 
 Bug fixes:
 
+- Start fixing startup in py3
+  [pbauer]
+
 - Add Python 2 / 3 compatibility.  [maurits]
 
 
diff --git a/Products/PortalTransforms/Transform.py b/Products/PortalTransforms/Transform.py
index 979af39..1cc9961 100644
--- a/Products/PortalTransforms/Transform.py
+++ b/Products/PortalTransforms/Transform.py
@@ -13,11 +13,13 @@
 from Products.PortalTransforms.utils import _www
 from Products.PortalTransforms.utils import log
 from Products.PortalTransforms.utils import TransformException
-from UserDict import UserDict
+from six.moves import reload_module
 from zope.interface import implementer
 
-
-from six.moves import reload_module
+try:
+    from collections import UserDict
+except ImportError:
+    from UserDict import UserDict
 
 
 def import_from_name(module_name):
@@ -57,6 +59,7 @@ def make_config_nonpersistent(kwargs):
             p_value = list(value)
             kwargs[key] = p_value
 
+
 VALIDATORS = {
     'int': int,
     'string': str,
diff --git a/Products/PortalTransforms/chain.py b/Products/PortalTransforms/chain.py
index ede5222..cadf523 100644
--- a/Products/PortalTransforms/chain.py
+++ b/Products/PortalTransforms/chain.py
@@ -11,11 +11,12 @@
 from Products.PortalTransforms.interfaces import IChain
 from Products.PortalTransforms.interfaces import ITransform
 from Products.PortalTransforms.utils import _www
-from UserList import UserList
 from zope.interface import implementer
 
-
-from six.moves import reload_module
+try:
+    from collections import UserList
+except ImportError:
+    from UserList import UserList
 
 
 @implementer(IChain, ITransform)


Repository: Products.PortalTransforms


Branch: refs/heads/master
Date: 2018-03-17T09:08:45+01:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/Products.PortalTransforms/commit/cb30a2c03ade2903a9b4f15600c26cbea4ef4c84

rename name to name_ to prevent slash with class variable in py3

Files changed:
M Products/PortalTransforms/data.py

diff --git a/Products/PortalTransforms/data.py b/Products/PortalTransforms/data.py
index 00e379b..39c21ae 100644
--- a/Products/PortalTransforms/data.py
+++ b/Products/PortalTransforms/data.py
@@ -7,11 +7,11 @@ class datastream(object):
     """A transformation datastream packet"""
 
     __slots__ = (
-        'name', '_data', '_metadata', '__name__', '_objects', '_cacheable'
+        'name_', '_data', '_metadata', '__name__', '_objects', '_cacheable'
     )
 
-    def __init__(self, name):
-        self.__name__ = name
+    def __init__(self, name_):
+        self.__name__ = name_
         self._data = ''
         self._metadata = {}
         self._objects = {}


Repository: Products.PortalTransforms


Branch: refs/heads/master
Date: 2018-03-17T09:09:17+01:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/Products.PortalTransforms/commit/39a89ccbbbb1febf207eb04b7fa2681c40ac03bc

fix changelog

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index 30c4f79..2203dca 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Start fixing startup in py3
+  [pbauer]
 
 
 3.1.2 (2018-02-05)
@@ -22,9 +23,6 @@ Bug fixes:
 
 Bug fixes:
 
-- Start fixing startup in py3
-  [pbauer]
-
 - Add Python 2 / 3 compatibility.  [maurits]
 
 


Repository: Products.PortalTransforms


Branch: refs/heads/master
Date: 2018-03-18T19:17:50+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.PortalTransforms/commit/42a836b24cd4803f16520ac79ff0f3d70f0dd8ff

Merge pull request #28 from plone/python3

Begin fixing startup in py3

Files changed:
M CHANGES.rst
M Products/PortalTransforms/Transform.py
M Products/PortalTransforms/chain.py
M Products/PortalTransforms/data.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 0dd98c7..2203dca 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Start fixing startup in py3
+  [pbauer]
 
 
 3.1.2 (2018-02-05)
diff --git a/Products/PortalTransforms/Transform.py b/Products/PortalTransforms/Transform.py
index 979af39..1cc9961 100644
--- a/Products/PortalTransforms/Transform.py
+++ b/Products/PortalTransforms/Transform.py
@@ -13,11 +13,13 @@
 from Products.PortalTransforms.utils import _www
 from Products.PortalTransforms.utils import log
 from Products.PortalTransforms.utils import TransformException
-from UserDict import UserDict
+from six.moves import reload_module
 from zope.interface import implementer
 
-
-from six.moves import reload_module
+try:
+    from collections import UserDict
+except ImportError:
+    from UserDict import UserDict
 
 
 def import_from_name(module_name):
@@ -57,6 +59,7 @@ def make_config_nonpersistent(kwargs):
             p_value = list(value)
             kwargs[key] = p_value
 
+
 VALIDATORS = {
     'int': int,
     'string': str,
diff --git a/Products/PortalTransforms/chain.py b/Products/PortalTransforms/chain.py
index ede5222..cadf523 100644
--- a/Products/PortalTransforms/chain.py
+++ b/Products/PortalTransforms/chain.py
@@ -11,11 +11,12 @@
 from Products.PortalTransforms.interfaces import IChain
 from Products.PortalTransforms.interfaces import ITransform
 from Products.PortalTransforms.utils import _www
-from UserList import UserList
 from zope.interface import implementer
 
-
-from six.moves import reload_module
+try:
+    from collections import UserList
+except ImportError:
+    from UserList import UserList
 
 
 @implementer(IChain, ITransform)
diff --git a/Products/PortalTransforms/data.py b/Products/PortalTransforms/data.py
index 00e379b..39c21ae 100644
--- a/Products/PortalTransforms/data.py
+++ b/Products/PortalTransforms/data.py
@@ -7,11 +7,11 @@ class datastream(object):
     """A transformation datastream packet"""
 
     __slots__ = (
-        'name', '_data', '_metadata', '__name__', '_objects', '_cacheable'
+        'name_', '_data', '_metadata', '__name__', '_objects', '_cacheable'
     )
 
-    def __init__(self, name):
-        self.__name__ = name
+    def __init__(self, name_):
+        self.__name__ = name_
         self._data = ''
         self._metadata = {}
         self._objects = {}


