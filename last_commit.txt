Repository: Products.CMFPlone


Branch: refs/heads/5.1.x
Date: 2018-03-30T13:12:26+02:00
Author: Dylan Jay (djay) <software@pretaweb.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/c5d478b04e74c4dc085f06e2c8b1be6d3bdce22e

fix bug in ajax standard_error_message

Files changed:
M CHANGES.rst
M Products/CMFPlone/skins/plone_templates/standard_error_message.py

diff --git a/CHANGES.rst b/CHANGES.rst
index a2e0c8896..7d8910365 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -20,7 +20,9 @@ New features:
 
 Bug fixes:
 
-- Fix controlpanel quickinstaller view: 
+- Fixed bug in ajax standard_error_message.  [djay, maurits]
+
+- Fix controlpanel quickinstaller view:
   A not yet installed product must not return any upgrade info.
   [jensens]
 
diff --git a/Products/CMFPlone/skins/plone_templates/standard_error_message.py b/Products/CMFPlone/skins/plone_templates/standard_error_message.py
index fe6e3e178..ce9c7aca8 100644
--- a/Products/CMFPlone/skins/plone_templates/standard_error_message.py
+++ b/Products/CMFPlone/skins/plone_templates/standard_error_message.py
@@ -31,7 +31,7 @@
     context.REQUEST.RESPONSE.setHeader("Content-Type", "application/json")
     # Note: using %s instead of .format to avoid possibly expensive guarded
     # attribute check.
-    return '{{"error_type": "%s"}}' % error_type
+    return '{"error_type": "%s"}' % error_type
 
 if error_log_url:
     error_log_id = error_log_url.split('?id=')[1]


Repository: Products.CMFPlone


Branch: refs/heads/5.1.x
Date: 2018-03-31T09:40:02+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/9d8b3068659111509ad46384cf2db972f8304696

Merge pull request #2367 from plone/fix-ajax-standard-error-message-51

Fixed bug in ajax standard_error_message.

Files changed:
M CHANGES.rst
M Products/CMFPlone/skins/plone_templates/standard_error_message.py

diff --git a/CHANGES.rst b/CHANGES.rst
index a2e0c8896..7d8910365 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -20,7 +20,9 @@ New features:
 
 Bug fixes:
 
-- Fix controlpanel quickinstaller view: 
+- Fixed bug in ajax standard_error_message.  [djay, maurits]
+
+- Fix controlpanel quickinstaller view:
   A not yet installed product must not return any upgrade info.
   [jensens]
 
diff --git a/Products/CMFPlone/skins/plone_templates/standard_error_message.py b/Products/CMFPlone/skins/plone_templates/standard_error_message.py
index fe6e3e178..ce9c7aca8 100644
--- a/Products/CMFPlone/skins/plone_templates/standard_error_message.py
+++ b/Products/CMFPlone/skins/plone_templates/standard_error_message.py
@@ -31,7 +31,7 @@
     context.REQUEST.RESPONSE.setHeader("Content-Type", "application/json")
     # Note: using %s instead of .format to avoid possibly expensive guarded
     # attribute check.
-    return '{{"error_type": "%s"}}' % error_type
+    return '{"error_type": "%s"}' % error_type
 
 if error_log_url:
     error_log_id = error_log_url.split('?id=')[1]


