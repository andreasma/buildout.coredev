Repository: plone.registry


Branch: refs/heads/master
Date: 2018-09-20T22:12:48+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.registry/commit/a25d8fe05b88746f3e5815447fcc403b8dea8b82

fix test for changed object field in zope4

Files changed:
M plone/registry/registry.rst
M plone/registry/tests.py

b"diff --git a/plone/registry/registry.rst b/plone/registry/registry.rst\nindex d6a1f39..5952d69 100644\n--- a/plone/registry/registry.rst\n+++ b/plone/registry/registry.rst\n@@ -142,7 +142,7 @@ Again, values are validated::\n     Traceback (most recent call last):\n     ...\n     WrongType: ('Joomla', <type 'unicode'>...)\n-    \n+\n     >>> registry['plone.registry.tests.cms'] = b'Joomla'  # doctest: +SKIP_PYTHON_2\n     Traceback (most recent call last):\n     ...\n@@ -215,7 +215,7 @@ If we have a field for which there is no ``IPersistentField`` adapter, we will g\n \n     >>> from plone.registry.tests import IMailPreferences\n     >>> IMailPreferences['settings']\n-    <zope.schema._field.Object object at ...>\n+    <zope.schema._bootstrapfields.Object object at ...>\n \n     >>> registry.registerInterface(IMailPreferences)\n     Traceback (most recent call last):\ndiff --git a/plone/registry/tests.py b/plone/registry/tests.py\nindex 626e726..d89ab62 100644\n--- a/plone/registry/tests.py\n+++ b/plone/registry/tests.py\n@@ -21,6 +21,11 @@\n \n class PolyglotOutputChecker(doctest.OutputChecker):\n     def check_output(self, want, got, optionflags):\n+        # fix changed objectfield class in zope4\n+        got = re.sub(\n+            'zope.schema._field.Object',\n+            'zope.schema._bootstrapfields.Object', got)\n+\n         if optionflags & SKIP_PYTHON_3 and sys.version_info >= (3,):\n             return True\n         elif optionflags & SKIP_PYTHON_2:\n"

Repository: plone.registry


Branch: refs/heads/master
Date: 2018-09-20T22:16:13+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.registry/commit/37a93b508fe0fa6ac06da7eeebd2e78531ba8f29

add docstring and classifiers

Files changed:
M CHANGES.rst
M setup.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 421fb1a..b6027eb 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -14,7 +14,8 @@ New features:\n \n Bug fixes:\n \n-- *add item here*\n+- Adapt test to changed object field in zope4\n+  [pbauer]\n \n \n 1.1.3 (2018-06-22)\ndiff --git a/setup.py b/setup.py\nindex 24ec8da..ae05a88 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -32,11 +32,14 @@ def read(*rnames):\n     classifiers=[\n         "Framework :: Plone",\n         "Framework :: Plone :: 5.1",\n+        "Framework :: Plone :: 5.2",\n         "License :: OSI Approved :: GNU General Public License (GPL)",\n         "Programming Language :: Python :: 2",\n         "Programming Language :: Python :: 2.7",\n         "Programming Language :: Python :: 3",\n         "Programming Language :: Python :: 3.5",\n+        "Programming Language :: Python :: 3.6",\n+        "Programming Language :: Python :: 3.7",\n         "Topic :: Software Development :: Libraries :: Python Modules",\n     ],\n     keywords=\'configuration registry\',\n'

Repository: plone.registry


Branch: refs/heads/master
Date: 2018-09-21T09:41:01+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.registry/commit/462ddd121d97a370d7e398538660615e246759a5

Merge pull request #19 from plone/zope4

fix test for changed object field in zope4

Files changed:
M CHANGES.rst
M plone/registry/registry.rst
M plone/registry/tests.py
M setup.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 421fb1a..b6027eb 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -14,7 +14,8 @@ New features:\n \n Bug fixes:\n \n-- *add item here*\n+- Adapt test to changed object field in zope4\n+  [pbauer]\n \n \n 1.1.3 (2018-06-22)\ndiff --git a/plone/registry/registry.rst b/plone/registry/registry.rst\nindex d6a1f39..5952d69 100644\n--- a/plone/registry/registry.rst\n+++ b/plone/registry/registry.rst\n@@ -142,7 +142,7 @@ Again, values are validated::\n     Traceback (most recent call last):\n     ...\n     WrongType: (\'Joomla\', <type \'unicode\'>...)\n-    \n+\n     >>> registry[\'plone.registry.tests.cms\'] = b\'Joomla\'  # doctest: +SKIP_PYTHON_2\n     Traceback (most recent call last):\n     ...\n@@ -215,7 +215,7 @@ If we have a field for which there is no ``IPersistentField`` adapter, we will g\n \n     >>> from plone.registry.tests import IMailPreferences\n     >>> IMailPreferences[\'settings\']\n-    <zope.schema._field.Object object at ...>\n+    <zope.schema._bootstrapfields.Object object at ...>\n \n     >>> registry.registerInterface(IMailPreferences)\n     Traceback (most recent call last):\ndiff --git a/plone/registry/tests.py b/plone/registry/tests.py\nindex 626e726..d89ab62 100644\n--- a/plone/registry/tests.py\n+++ b/plone/registry/tests.py\n@@ -21,6 +21,11 @@\n \n class PolyglotOutputChecker(doctest.OutputChecker):\n     def check_output(self, want, got, optionflags):\n+        # fix changed objectfield class in zope4\n+        got = re.sub(\n+            \'zope.schema._field.Object\',\n+            \'zope.schema._bootstrapfields.Object\', got)\n+\n         if optionflags & SKIP_PYTHON_3 and sys.version_info >= (3,):\n             return True\n         elif optionflags & SKIP_PYTHON_2:\ndiff --git a/setup.py b/setup.py\nindex 24ec8da..ae05a88 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -32,11 +32,14 @@ def read(*rnames):\n     classifiers=[\n         "Framework :: Plone",\n         "Framework :: Plone :: 5.1",\n+        "Framework :: Plone :: 5.2",\n         "License :: OSI Approved :: GNU General Public License (GPL)",\n         "Programming Language :: Python :: 2",\n         "Programming Language :: Python :: 2.7",\n         "Programming Language :: Python :: 3",\n         "Programming Language :: Python :: 3.5",\n+        "Programming Language :: Python :: 3.6",\n+        "Programming Language :: Python :: 3.7",\n         "Topic :: Software Development :: Libraries :: Python Modules",\n     ],\n     keywords=\'configuration registry\',\n'

