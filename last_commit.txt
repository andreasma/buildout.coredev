Repository: plone.api


Branch: refs/heads/master
Date: 2019-04-09T14:45:31+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.api/commit/c9423b1b03866a26c386edc53a896c916c7f9308

Gracefully handle missing fields on an interface

See longer description on https://github.com/plone/plone.api/issues/428

Files changed:
M src/plone/api/portal.py

b"diff --git a/src/plone/api/portal.py b/src/plone/api/portal.py\nindex 0a3e477..19bff2b 100644\n--- a/src/plone/api/portal.py\n+++ b/src/plone/api/portal.py\n@@ -297,7 +297,7 @@ def get_registry_record(name=None, interface=None, default=MISSING):\n     registry = getUtility(IRegistry)\n \n     if interface is not None:\n-        records = registry.forInterface(interface)\n+        records = registry.forInterface(interface, check=False)\n         _marker = object()\n         if getattr(records, name, _marker) != _marker:\n             return registry['{0}.{1}'.format(interface.__identifier__, name)]\n"

Repository: plone.api


Branch: refs/heads/master
Date: 2019-04-09T14:46:18+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.api/commit/95b85c6de0181f4f90e05835938deec314881fbc

Add news entry

Files changed:
A news/428.feature

b'diff --git a/news/428.feature b/news/428.feature\nnew file mode 100644\nindex 0000000..2458de1\n--- /dev/null\n+++ b/news/428.feature\n@@ -0,0 +1,2 @@\n+ Gracefully handle missing registry records on an interface.\n+ [gforcada]\n'

Repository: plone.api


Branch: refs/heads/master
Date: 2019-04-10T23:12:36+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.api/commit/b5eaefab97162e8a712d39a1b0c95ef98043c653

Merge pull request #429 from plone/gforcada-patch-1

Gracefully handle missing fields on an interface

Files changed:
A news/428.feature
M src/plone/api/portal.py

b"diff --git a/news/428.feature b/news/428.feature\nnew file mode 100644\nindex 0000000..2458de1\n--- /dev/null\n+++ b/news/428.feature\n@@ -0,0 +1,2 @@\n+ Gracefully handle missing registry records on an interface.\n+ [gforcada]\ndiff --git a/src/plone/api/portal.py b/src/plone/api/portal.py\nindex 0a3e477..19bff2b 100644\n--- a/src/plone/api/portal.py\n+++ b/src/plone/api/portal.py\n@@ -297,7 +297,7 @@ def get_registry_record(name=None, interface=None, default=MISSING):\n     registry = getUtility(IRegistry)\n \n     if interface is not None:\n-        records = registry.forInterface(interface)\n+        records = registry.forInterface(interface, check=False)\n         _marker = object()\n         if getattr(records, name, _marker) != _marker:\n             return registry['{0}.{1}'.format(interface.__identifier__, name)]\n"

