Repository: plone.releaser


Branch: refs/heads/master
Date: 2018-11-11T11:39:42+09:00
Author: esteele (esteele) <eric@esteele.net>
Commit: https://github.com/plone/plone.releaser/commit/7180c53444430b8e400ceaa535e1b387556ed2d2

Fix for Python 3 compatibility

Files changed:
M plone/releaser/pypi.py

b"diff --git a/plone/releaser/pypi.py b/plone/releaser/pypi.py\nindex b6a8a78..cbf3efa 100644\n--- a/plone/releaser/pypi.py\n+++ b/plone/releaser/pypi.py\n@@ -1,9 +1,13 @@\n # -*- coding: utf-8 -*-\n-import xmlrpclib\n+\n+try:\n+    from xmlrpclib import ServerProxy\n+except ImportError:\n+    from xmlrpc.client import ServerProxy\n \n \n def get_users_with_release_rights(package_name):\n-    client = xmlrpclib.ServerProxy('https://pypi.python.org/pypi')\n+    client = ServerProxy('https://pypi.python.org/pypi')\n     existing_admins = set([\n         user for role, user in client.package_roles(package_name)])\n     return existing_admins\n"

Repository: plone.releaser


Branch: refs/heads/master
Date: 2018-11-11T11:44:21+09:00
Author: esteele (esteele) <eric@esteele.net>
Commit: https://github.com/plone/plone.releaser/commit/da0fa8e31a230e08063814f38850609453b327fc

Add changelog entry

Files changed:
A news/21.bugfix

b'diff --git a/news/21.bugfix b/news/21.bugfix\nnew file mode 100644\nindex 0000000..3745c74\n--- /dev/null\n+++ b/news/21.bugfix\n@@ -0,0 +1,2 @@\n+Python 3 compatibility fix for xmlrpclib/xmlrpc import differences.\n+[esteele]\n\\ No newline at end of file\n'

Repository: plone.releaser


Branch: refs/heads/master
Date: 2018-11-11T07:21:55+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.releaser/commit/c58988e399ba41c4339a467e14875d2c3a0952a4

Merge pull request #21 from plone/python3

Fix for Python 3 compatibility

Files changed:
A news/21.bugfix
M plone/releaser/pypi.py

b"diff --git a/news/21.bugfix b/news/21.bugfix\nnew file mode 100644\nindex 0000000..3745c74\n--- /dev/null\n+++ b/news/21.bugfix\n@@ -0,0 +1,2 @@\n+Python 3 compatibility fix for xmlrpclib/xmlrpc import differences.\n+[esteele]\n\\ No newline at end of file\ndiff --git a/plone/releaser/pypi.py b/plone/releaser/pypi.py\nindex b6a8a78..cbf3efa 100644\n--- a/plone/releaser/pypi.py\n+++ b/plone/releaser/pypi.py\n@@ -1,9 +1,13 @@\n # -*- coding: utf-8 -*-\n-import xmlrpclib\n+\n+try:\n+    from xmlrpclib import ServerProxy\n+except ImportError:\n+    from xmlrpc.client import ServerProxy\n \n \n def get_users_with_release_rights(package_name):\n-    client = xmlrpclib.ServerProxy('https://pypi.python.org/pypi')\n+    client = ServerProxy('https://pypi.python.org/pypi')\n     existing_admins = set([\n         user for role, user in client.package_roles(package_name)])\n     return existing_admins\n"

