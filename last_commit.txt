Repository: Products.CMFPlone


Branch: refs/heads/5.1.x
Date: 2018-05-14T14:59:34+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/2b021c53f39d50a4e931250afaa8a5ce5f4f8c90

After site creation, do not render the add-site template: we redirect anyway.

See also https://github.com/plone/Products.CMFPlone/pull/2410#issuecomment-388774551

Files changed:
M CHANGES.rst
M Products/CMFPlone/browser/admin.py

diff --git a/CHANGES.rst b/CHANGES.rst
index ea7c647cd..a1122b9d8 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -18,13 +18,15 @@ New features:
 
 Bug fixes:
 
+- After site creation, do not render the add-site template: we redirect anyway.
+  [maurits]
+
 - Move forgotten 'registered' template from skins to plone.app.users, were it belongs to.
   [jensens]
 
 - Unflakied a unit test.
   [Rotonen]
 
-- *add item here*
 
 5.1.2 (2018-04-08)
 ------------------
diff --git a/Products/CMFPlone/browser/admin.py b/Products/CMFPlone/browser/admin.py
index bfc324a46..ee9681ac2 100644
--- a/Products/CMFPlone/browser/admin.py
+++ b/Products/CMFPlone/browser/admin.py
@@ -272,6 +272,7 @@ def __call__(self):
                 portal_timezone=form.get('portal_timezone', 'UTC')
             )
             self.request.response.redirect(site.absolute_url())
+            return u''
 
         return self.index()
 


Repository: Products.CMFPlone


Branch: refs/heads/5.1.x
Date: 2018-05-14T17:00:44+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/dc27a823164c6bebd23ca5e67168e51426fd55b8

Merge pull request #2414 from plone/add-plonesite-no-useless-render-51

After site creation, do not render a template: we redirect anyway [5.1]

Files changed:
M CHANGES.rst
M Products/CMFPlone/browser/admin.py

diff --git a/CHANGES.rst b/CHANGES.rst
index ea7c647cd..a1122b9d8 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -18,13 +18,15 @@ New features:
 
 Bug fixes:
 
+- After site creation, do not render the add-site template: we redirect anyway.
+  [maurits]
+
 - Move forgotten 'registered' template from skins to plone.app.users, were it belongs to.
   [jensens]
 
 - Unflakied a unit test.
   [Rotonen]
 
-- *add item here*
 
 5.1.2 (2018-04-08)
 ------------------
diff --git a/Products/CMFPlone/browser/admin.py b/Products/CMFPlone/browser/admin.py
index bfc324a46..ee9681ac2 100644
--- a/Products/CMFPlone/browser/admin.py
+++ b/Products/CMFPlone/browser/admin.py
@@ -272,6 +272,7 @@ def __call__(self):
                 portal_timezone=form.get('portal_timezone', 'UTC')
             )
             self.request.response.redirect(site.absolute_url())
+            return u''
 
         return self.index()
 


