Repository: plone.schemaeditor


Branch: refs/heads/master
Date: 2019-08-06T14:56:25+02:00
Author: Manuel Reinhardt (reinhardt) <reinhardt@syslab.com>
Commit: https://github.com/plone/plone.schemaeditor/commit/86121730c21306d5d9be8f5ad1a68b1a274564ce

Ignore validation errors for "required" when saving defaults.
Also added a "Done" button that leaves the field edit view.
Refs #71

Files changed:
A news/71.bugfix
M plone/schemaeditor/browser/schema/listing.py

b'diff --git a/news/71.bugfix b/news/71.bugfix\nnew file mode 100644\nindex 0000000..7a629b8\n--- /dev/null\n+++ b/news/71.bugfix\n@@ -0,0 +1 @@\n+Don\'t show an error when a "required" field doesn\'t have a default. Also added a "Done" button.\ndiff --git a/plone/schemaeditor/browser/schema/listing.py b/plone/schemaeditor/browser/schema/listing.py\nindex ac05e85..55e2cc1 100644\n--- a/plone/schemaeditor/browser/schema/listing.py\n+++ b/plone/schemaeditor/browser/schema/listing.py\n@@ -104,11 +104,19 @@ def delete_url(self, field):\n             url = addTokenToUrl(url, self.request)\n         return url\n \n+    @button.buttonAndHandler(\n+        _(u\'Done\'),\n+    )\n+    def handleDone(self, action):\n+        return self.request.RESPONSE.redirect(self.context.absolute_url())\n+\n     @button.buttonAndHandler(\n         _(u\'Save Defaults\'),\n         condition=lambda form: getattr(form.context, \'showSaveDefaults\', True)\n     )\n     def handleSaveDefaults(self, action):\n+        for group in self.groups:\n+            group.ignoreRequiredOnExtract = self.ignoreRequiredOnExtract\n         data, errors = self.extractData()\n         if errors:\n             self.status = self.formErrorsMessage\n'

Repository: plone.schemaeditor


Branch: refs/heads/master
Date: 2019-08-14T00:08:16+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.schemaeditor/commit/a7d737b5bc80ab4f11ba1c70abbb128d90f7ff2b

Merge pull request #72 from plone/71-save-defaults

Ignore validation errors for "required" when saving defaults

Files changed:
A news/71.bugfix
M plone/schemaeditor/browser/schema/listing.py

b'diff --git a/news/71.bugfix b/news/71.bugfix\nnew file mode 100644\nindex 0000000..7a629b8\n--- /dev/null\n+++ b/news/71.bugfix\n@@ -0,0 +1 @@\n+Don\'t show an error when a "required" field doesn\'t have a default. Also added a "Done" button.\ndiff --git a/plone/schemaeditor/browser/schema/listing.py b/plone/schemaeditor/browser/schema/listing.py\nindex ac05e85..55e2cc1 100644\n--- a/plone/schemaeditor/browser/schema/listing.py\n+++ b/plone/schemaeditor/browser/schema/listing.py\n@@ -104,11 +104,19 @@ def delete_url(self, field):\n             url = addTokenToUrl(url, self.request)\n         return url\n \n+    @button.buttonAndHandler(\n+        _(u\'Done\'),\n+    )\n+    def handleDone(self, action):\n+        return self.request.RESPONSE.redirect(self.context.absolute_url())\n+\n     @button.buttonAndHandler(\n         _(u\'Save Defaults\'),\n         condition=lambda form: getattr(form.context, \'showSaveDefaults\', True)\n     )\n     def handleSaveDefaults(self, action):\n+        for group in self.groups:\n+            group.ignoreRequiredOnExtract = self.ignoreRequiredOnExtract\n         data, errors = self.extractData()\n         if errors:\n             self.status = self.formErrorsMessage\n'

