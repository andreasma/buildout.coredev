Repository: plone.registry


Branch: refs/heads/master
Date: 2018-06-19T16:19:30+01:00
Author: Matthew Wilkes (MatthewWilkes) <git@matthewwilkes.name>
Commit: https://github.com/plone/plone.registry/commit/bc13c371e09010ccb97487cd6cdd5ecfb72365cb

Improve performance of RecordsProxy.__iter__

Files changed:
M CHANGES.rst
M plone/registry/recordsproxy.py

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex 862a57e..bfb876a 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -14,7 +14,9 @@ New features:\n \n Bug fixes:\n \n-- *add item here*\n+- Improve performance of RecordsProxy.__iter__ which is now invoked more in\n+  core Plone as part of the requireJS configuration\n+  [MatthewWilkes]\n \n \n 1.1.2 (2016-12-06)\ndiff --git a/plone/registry/recordsproxy.py b/plone/registry/recordsproxy.py\nindex 58a541b..06c39ac 100644\n--- a/plone/registry/recordsproxy.py\n+++ b/plone/registry/recordsproxy.py\n@@ -115,7 +115,7 @@ def __iter__(self):\n             if '.' not in name:\n                 yield name\n             else:\n-                key = '.'.join(name.split('.')[:-1])\n+                key = name.rsplit('.', 1)[0]\n                 if key != last:\n                     yield key\n                     last = key\n"

Repository: plone.registry


Branch: refs/heads/master
Date: 2018-06-20T08:39:31+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.registry/commit/ca12637ab52dcd3f252012ecf2046cf26202b43b

Merge pull request #15 from plone/wilkes-performance-improvement

Improve performance of RecordsProxy.__iter__

Files changed:
M CHANGES.rst
M plone/registry/recordsproxy.py

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex 862a57e..bfb876a 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -14,7 +14,9 @@ New features:\n \n Bug fixes:\n \n-- *add item here*\n+- Improve performance of RecordsProxy.__iter__ which is now invoked more in\n+  core Plone as part of the requireJS configuration\n+  [MatthewWilkes]\n \n \n 1.1.2 (2016-12-06)\ndiff --git a/plone/registry/recordsproxy.py b/plone/registry/recordsproxy.py\nindex 58a541b..06c39ac 100644\n--- a/plone/registry/recordsproxy.py\n+++ b/plone/registry/recordsproxy.py\n@@ -115,7 +115,7 @@ def __iter__(self):\n             if '.' not in name:\n                 yield name\n             else:\n-                key = '.'.join(name.split('.')[:-1])\n+                key = name.rsplit('.', 1)[0]\n                 if key != last:\n                     yield key\n                     last = key\n"

