Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2019-05-22T20:08:55+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.upgrade/commit/45193ab29e663eb50e7f96d49c88c0884b3b2666

fix upgrades from Plone 4.3 to 5.2

Files changed:
M plone/app/upgrade/v43/final.py

b'diff --git a/plone/app/upgrade/v43/final.py b/plone/app/upgrade/v43/final.py\nindex d503ecab..f4b85199 100644\n--- a/plone/app/upgrade/v43/final.py\n+++ b/plone/app/upgrade/v43/final.py\n@@ -272,7 +272,10 @@ def removeFakeKupu(context):\n         tool = getToolByName(portal, tool_id, None)\n         if tool is None:\n             continue\n-        resources = tool.getResourcesDict()\n+        try:\n+            resources = tool.getResourcesDict()\n+        except AttributeError:\n+            continue\n         for resource_id, resource in resources.items():\n             expression = resource.getExpression()\n             if expression.startswith(bad_expr):\n'

Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2019-06-13T12:50:58+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.upgrade/commit/aa27f74cafab46a23b6f6a49d983c3ba68cf754c

add changenote

Files changed:
A news/207.bugfix

b'diff --git a/news/207.bugfix b/news/207.bugfix\nnew file mode 100644\nindex 00000000..72a0fe99\n--- /dev/null\n+++ b/news/207.bugfix\n@@ -0,0 +1,2 @@\n+Fix upgrades from Plone 4.3 to 5.2.\n+[pbauer]\n\\ No newline at end of file\n'

Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2019-06-15T20:06:43+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.upgrade/commit/2fbe849004773453f0ee23673d7de869d846f95b

Merge pull request #207 from plone/fix_upgrade_from_p4

Fix upgrades from Plone 4.3 to 5.2

Files changed:
A news/207.bugfix
M plone/app/upgrade/v43/final.py

b'diff --git a/news/207.bugfix b/news/207.bugfix\nnew file mode 100644\nindex 00000000..72a0fe99\n--- /dev/null\n+++ b/news/207.bugfix\n@@ -0,0 +1,2 @@\n+Fix upgrades from Plone 4.3 to 5.2.\n+[pbauer]\n\\ No newline at end of file\ndiff --git a/plone/app/upgrade/v43/final.py b/plone/app/upgrade/v43/final.py\nindex d503ecab..f4b85199 100644\n--- a/plone/app/upgrade/v43/final.py\n+++ b/plone/app/upgrade/v43/final.py\n@@ -272,7 +272,10 @@ def removeFakeKupu(context):\n         tool = getToolByName(portal, tool_id, None)\n         if tool is None:\n             continue\n-        resources = tool.getResourcesDict()\n+        try:\n+            resources = tool.getResourcesDict()\n+        except AttributeError:\n+            continue\n         for resource_id, resource in resources.items():\n             expression = resource.getExpression()\n             if expression.startswith(bad_expr):\n'

