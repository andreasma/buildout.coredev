Repository: Products.CMFPlone


Branch: refs/heads/5.1.x
Date: 2018-09-19T12:16:04+02:00
Author: Sune Broendum Woeller (sunew) <sune@woeller.dk>
Commit: https://github.com/plone/Products.CMFPlone/commit/c171c1f62333445785a20612a13c759c4e6e4922

upgrade grunt + plugins to same versions as in mockup https://github.com/plone/mockup/pull/870
Freeze less - this is the version actually used, pulled in by grunt-contrib-less 1.4.1 as can be seen in package-lock.json

Files changed:
M Products/CMFPlone/_scripts/compile_resources.py

b'diff --git a/Products/CMFPlone/_scripts/compile_resources.py b/Products/CMFPlone/_scripts/compile_resources.py\nindex 784ab50a8..f1247e397 100644\n--- a/Products/CMFPlone/_scripts/compile_resources.py\n+++ b/Products/CMFPlone/_scripts/compile_resources.py\n@@ -11,14 +11,15 @@\n   "version": "1.1.3",\n   "private": true,\n   "devDependencies": {\n-    "grunt": "~1.0.1",\n-    "grunt-cli": "~1.2.0",\n+    "grunt": "~1.0.3",\n+    "grunt-cli": "~1.3.1",\n     "grunt-contrib-less": "~1.4.1",\n     "grunt-contrib-requirejs": "~1.0.0",\n-    "grunt-contrib-uglify": "~3.1.0",\n-    "grunt-contrib-watch": "~1.0.0",\n-    "grunt-sed": "collective/grunt-sed#e625902539f5c29f1246228270a0330c1097b1e4", \n+    "grunt-contrib-uglify": "~4.0.0",\n+    "grunt-contrib-watch": "~1.1.0",\n+    "grunt-sed": "collective/grunt-sed#e625902539f5c29f1246228270a0330c1097b1e4",\n     "less-plugin-inline-urls": "^1.2.0"\n+    "less": "~2.7.3"\n   }\n }"""  # noqa\n \n'

Repository: Products.CMFPlone


Branch: refs/heads/5.1.x
Date: 2018-09-19T12:18:12+02:00
Author: Sune Broendum Woeller (sunew) <sune@woeller.dk>
Commit: https://github.com/plone/Products.CMFPlone/commit/84b7fb442da0e53c7563985c0004a7b46cd45cd9

Update version; reorder lines so a diff with mockup is easier; remove the devdependencies - they are just used for running tests in mockup, not here.

Files changed:
M Products/CMFPlone/static/bower.json

b'diff --git a/Products/CMFPlone/static/bower.json b/Products/CMFPlone/static/bower.json\nindex 65f982bf2..e10598987 100644\n--- a/Products/CMFPlone/static/bower.json\n+++ b/Products/CMFPlone/static/bower.json\n@@ -1,6 +1,6 @@\n {\n   "name": "Products.CMFPlone",\n-  "version": "5.0b2",\n+  "version": "5.1.4",\n   "description": "CMFPlone Javascript Bundle",\n   "dependencies": {\n     "ace-builds": "1.2.6",\n@@ -50,18 +50,14 @@\n     "requirejs": "",\n     "less": "2.1.2",\n     "r.js": "2.1.15",\n-    "cs-jqtree-contextmenu": "^0.1.0",\n-    "js-shortcuts": "^1.0.1"\n-  },\n-  "devDependencies": {\n-    "expect": "0.3.1",\n-    "sinonjs": "1.17.1"\n+    "js-shortcuts": "^1.0.1",\n+    "cs-jqtree-contextmenu": "^0.1.0"\n   },\n   "resolutions": {\n     "bootstrap": "3.3.6",\n     "jquery": "1.11.3",\n+    "jquery-form": "3.51",\n     "select2": "3.5.4",\n-    "moment": "2.10.6",\n-    "jquery-form": "3.51"\n+    "moment": "2.10.6"\n   }\n }\n'

Repository: Products.CMFPlone


Branch: refs/heads/5.1.x
Date: 2018-09-19T12:58:45+02:00
Author: Sune Broendum Woeller (sunew) <sune@woeller.dk>
Commit: https://github.com/plone/Products.CMFPlone/commit/326b9d4dfaaef64e81086cd92c3587b02aa1e5fc

upgrade less in bower.json to the same version as already
used in the generated gruntfile in compile_resources.py.
compile_resources.py has a dependency on grunt-contrib-less,
and that depends on less, at the time of writing pulling in 2.7.3

Files changed:
M CHANGES.rst
M Products/CMFPlone/static/bower.json

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 316efa223..275329139 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -14,14 +14,31 @@ Breaking changes:\n \n New features:\n \n+- Upgrade grunt + plugins to same versions as in\n+  mockup https://github.com/plone/mockup/pull/870\n+  [sunew]\n+\n+- Upgrade less in bower.json to the same version as already used\n+  in the generated package.json in compile_resources.py.\n+  [sunew]\n+\n - Include TinyMCE 4.7.13\n   [erral]\n \n - Update mockup to latest version.\n   [frapell]\n \n+\n Bug fixes:\n \n+- Freeze `less` in `package.json` generated by `compile_resources.py`.\n+  `less` is pulled in by `grunt-contrib-less`, but explicitly freeze it to\n+  the version that is actually used at the time of writing, 2.7.3\n+  [sunew]\n+\n+- Remove the devdependencies from bower.json - they are just used for running tests in mockup, not here.\n+  [sunew]\n+\n - Let the ``combine-bundles`` import step also work when the ``IBundleRegistry`` keyword is not in ``registry.xml``, but in a ``registry`` directory.\n   `Issue 2520 <https://github.com/plone/Products.CMFPlone/issues/2502>`_.\n   [maurits]\ndiff --git a/Products/CMFPlone/static/bower.json b/Products/CMFPlone/static/bower.json\nindex e10598987..d4a5e0c8a 100644\n--- a/Products/CMFPlone/static/bower.json\n+++ b/Products/CMFPlone/static/bower.json\n@@ -48,7 +48,7 @@\n     "selectivizr": "1.0.2",\n     "tinymce-builded": "4.7.13",\n     "requirejs": "",\n-    "less": "2.1.2",\n+    "less": "2.7.3",\n     "r.js": "2.1.15",\n     "js-shortcuts": "^1.0.1",\n     "cs-jqtree-contextmenu": "^0.1.0"\n'

Repository: Products.CMFPlone


Branch: refs/heads/5.1.x
Date: 2018-09-19T19:32:17+02:00
Author: Sune Broendum Woeller (sunew) <sune@woeller.dk>
Commit: https://github.com/plone/Products.CMFPlone/commit/a3f2bc2a9ce0cd791f6aa431078bd8e9232c545f

Drop the syncing of less at this time, it becomes too complex. Need another PR for the syncing and upgrading of less (it is monkey patched, see src/Products.CMFPlone/Products/CMFPlone/static/README.rst )

Files changed:
M CHANGES.rst
M Products/CMFPlone/_scripts/compile_resources.py
M Products/CMFPlone/static/bower.json

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 275329139..c7bbc8443 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -18,10 +18,6 @@ New features:\n   mockup https://github.com/plone/mockup/pull/870\n   [sunew]\n \n-- Upgrade less in bower.json to the same version as already used\n-  in the generated package.json in compile_resources.py.\n-  [sunew]\n-\n - Include TinyMCE 4.7.13\n   [erral]\n \n@@ -31,11 +27,6 @@ New features:\n \n Bug fixes:\n \n-- Freeze `less` in `package.json` generated by `compile_resources.py`.\n-  `less` is pulled in by `grunt-contrib-less`, but explicitly freeze it to\n-  the version that is actually used at the time of writing, 2.7.3\n-  [sunew]\n-\n - Remove the devdependencies from bower.json - they are just used for running tests in mockup, not here.\n   [sunew]\n \ndiff --git a/Products/CMFPlone/_scripts/compile_resources.py b/Products/CMFPlone/_scripts/compile_resources.py\nindex f1247e397..99a53e0b0 100644\n--- a/Products/CMFPlone/_scripts/compile_resources.py\n+++ b/Products/CMFPlone/_scripts/compile_resources.py\n@@ -19,7 +19,6 @@\n     "grunt-contrib-watch": "~1.1.0",\n     "grunt-sed": "collective/grunt-sed#e625902539f5c29f1246228270a0330c1097b1e4",\n     "less-plugin-inline-urls": "^1.2.0"\n-    "less": "~2.7.3"\n   }\n }"""  # noqa\n \ndiff --git a/Products/CMFPlone/static/bower.json b/Products/CMFPlone/static/bower.json\nindex d4a5e0c8a..e10598987 100644\n--- a/Products/CMFPlone/static/bower.json\n+++ b/Products/CMFPlone/static/bower.json\n@@ -48,7 +48,7 @@\n     "selectivizr": "1.0.2",\n     "tinymce-builded": "4.7.13",\n     "requirejs": "",\n-    "less": "2.7.3",\n+    "less": "2.1.2",\n     "r.js": "2.1.15",\n     "js-shortcuts": "^1.0.1",\n     "cs-jqtree-contextmenu": "^0.1.0"\n'

Repository: Products.CMFPlone


Branch: refs/heads/5.1.x
Date: 2018-09-20T09:30:20+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/6ce91306eef7f080273204bc23ea3c8a63723355

Merge pull request #2517 from plone/sunew-upgrade-grunt-less3

Upgrade grunt etc.

Files changed:
M CHANGES.rst
M Products/CMFPlone/_scripts/compile_resources.py
M Products/CMFPlone/static/bower.json

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 316efa223..c7bbc8443 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -14,14 +14,22 @@ Breaking changes:\n \n New features:\n \n+- Upgrade grunt + plugins to same versions as in\n+  mockup https://github.com/plone/mockup/pull/870\n+  [sunew]\n+\n - Include TinyMCE 4.7.13\n   [erral]\n \n - Update mockup to latest version.\n   [frapell]\n \n+\n Bug fixes:\n \n+- Remove the devdependencies from bower.json - they are just used for running tests in mockup, not here.\n+  [sunew]\n+\n - Let the ``combine-bundles`` import step also work when the ``IBundleRegistry`` keyword is not in ``registry.xml``, but in a ``registry`` directory.\n   `Issue 2520 <https://github.com/plone/Products.CMFPlone/issues/2502>`_.\n   [maurits]\ndiff --git a/Products/CMFPlone/_scripts/compile_resources.py b/Products/CMFPlone/_scripts/compile_resources.py\nindex 784ab50a8..99a53e0b0 100644\n--- a/Products/CMFPlone/_scripts/compile_resources.py\n+++ b/Products/CMFPlone/_scripts/compile_resources.py\n@@ -11,13 +11,13 @@\n   "version": "1.1.3",\n   "private": true,\n   "devDependencies": {\n-    "grunt": "~1.0.1",\n-    "grunt-cli": "~1.2.0",\n+    "grunt": "~1.0.3",\n+    "grunt-cli": "~1.3.1",\n     "grunt-contrib-less": "~1.4.1",\n     "grunt-contrib-requirejs": "~1.0.0",\n-    "grunt-contrib-uglify": "~3.1.0",\n-    "grunt-contrib-watch": "~1.0.0",\n-    "grunt-sed": "collective/grunt-sed#e625902539f5c29f1246228270a0330c1097b1e4", \n+    "grunt-contrib-uglify": "~4.0.0",\n+    "grunt-contrib-watch": "~1.1.0",\n+    "grunt-sed": "collective/grunt-sed#e625902539f5c29f1246228270a0330c1097b1e4",\n     "less-plugin-inline-urls": "^1.2.0"\n   }\n }"""  # noqa\ndiff --git a/Products/CMFPlone/static/bower.json b/Products/CMFPlone/static/bower.json\nindex 65f982bf2..e10598987 100644\n--- a/Products/CMFPlone/static/bower.json\n+++ b/Products/CMFPlone/static/bower.json\n@@ -1,6 +1,6 @@\n {\n   "name": "Products.CMFPlone",\n-  "version": "5.0b2",\n+  "version": "5.1.4",\n   "description": "CMFPlone Javascript Bundle",\n   "dependencies": {\n     "ace-builds": "1.2.6",\n@@ -50,18 +50,14 @@\n     "requirejs": "",\n     "less": "2.1.2",\n     "r.js": "2.1.15",\n-    "cs-jqtree-contextmenu": "^0.1.0",\n-    "js-shortcuts": "^1.0.1"\n-  },\n-  "devDependencies": {\n-    "expect": "0.3.1",\n-    "sinonjs": "1.17.1"\n+    "js-shortcuts": "^1.0.1",\n+    "cs-jqtree-contextmenu": "^0.1.0"\n   },\n   "resolutions": {\n     "bootstrap": "3.3.6",\n     "jquery": "1.11.3",\n+    "jquery-form": "3.51",\n     "select2": "3.5.4",\n-    "moment": "2.10.6",\n-    "jquery-form": "3.51"\n+    "moment": "2.10.6"\n   }\n }\n'

