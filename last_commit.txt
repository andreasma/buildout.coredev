Repository: Products.PlonePAS


Branch: refs/heads/master
Date: 2019-07-09T19:48:08+02:00
Author: Andreas Jung (zopyx) <info@zopyx.com>
Commit: https://github.com/plone/Products.PlonePAS/commit/0e7651dc049a67cf6a6e4623948a2ba197c0b5f2

log exception in pas.logout()

Files changed:
M src/Products/PlonePAS/tools/membership.py

b'diff --git a/src/Products/PlonePAS/tools/membership.py b/src/Products/PlonePAS/tools/membership.py\nindex 4f5c2b09..857a2e00 100644\n--- a/src/Products/PlonePAS/tools/membership.py\n+++ b/src/Products/PlonePAS/tools/membership.py\n@@ -705,10 +705,8 @@ def logoutUser(self, REQUEST=None):\n             pas = getToolByName(self, \'acl_users\')\n             try:\n                 pas.logout(REQUEST)\n-            except:\n-                # XXX Bare except copied from logout.cpy. This should be\n-                # changed in the next Plone release.\n-                pass\n+            except Exception as e:\n+                logger.error(\'Error in PAS logout()\', exc_info=True)\n \n             # Expire the skin cookie if it is not configured to persist\n             st = getToolByName(self, "portal_skins")\n'

Repository: Products.PlonePAS


Branch: refs/heads/master
Date: 2019-07-09T20:04:29+02:00
Author: Andreas Jung (zopyx) <info@zopyx.com>
Commit: https://github.com/plone/Products.PlonePAS/commit/85ef18388547bbe696bc247925e8331f65dc6f26

added

Files changed:
A news/50.bugfix

b'diff --git a/news/50.bugfix b/news/50.bugfix\nnew file mode 100644\nindex 00000000..160e733e\n--- /dev/null\n+++ b/news/50.bugfix\n@@ -0,0 +1,2 @@\n+Log exception from PAS logout() instead of swallowing them\n+[ajung]\n'

Repository: Products.PlonePAS


Branch: refs/heads/master
Date: 2019-11-11T22:57:55+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.PlonePAS/commit/dfb2a72d526217898feb8a0f8465be6c82ccc94b

Merge pull request #49 from plone/log-logout-exception

log exception in pas.logout()

Files changed:
A news/50.bugfix
M src/Products/PlonePAS/tools/membership.py

b'diff --git a/news/50.bugfix b/news/50.bugfix\nnew file mode 100644\nindex 00000000..160e733e\n--- /dev/null\n+++ b/news/50.bugfix\n@@ -0,0 +1,2 @@\n+Log exception from PAS logout() instead of swallowing them\n+[ajung]\ndiff --git a/src/Products/PlonePAS/tools/membership.py b/src/Products/PlonePAS/tools/membership.py\nindex 4f5c2b09..857a2e00 100644\n--- a/src/Products/PlonePAS/tools/membership.py\n+++ b/src/Products/PlonePAS/tools/membership.py\n@@ -705,10 +705,8 @@ def logoutUser(self, REQUEST=None):\n             pas = getToolByName(self, \'acl_users\')\n             try:\n                 pas.logout(REQUEST)\n-            except:\n-                # XXX Bare except copied from logout.cpy. This should be\n-                # changed in the next Plone release.\n-                pass\n+            except Exception as e:\n+                logger.error(\'Error in PAS logout()\', exc_info=True)\n \n             # Expire the skin cookie if it is not configured to persist\n             st = getToolByName(self, "portal_skins")\n'

