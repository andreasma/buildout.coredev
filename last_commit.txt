Repository: plone.app.layout


Branch: refs/heads/2.7.x
Date: 2018-04-12T05:02:49+10:00
Author: Tom Gross (tomgross) <itconsense@gmail.com>
Commit: https://github.com/plone/plone.app.layout/commit/07ac48dcac1efaf69ca133657b1d8e20e2f39a55

Make it easier to override title seperator

Files changed:
M CHANGES.rst
M plone/app/layout/viewlets/common.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 1ba5122..3c374d5 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,8 @@ Breaking changes:
 
 New features:
 
-- *add item here*
+- Make it easier to override seperator in title viewlet
+  [tomgross]
 
 Bug fixes:
 
diff --git a/plone/app/layout/viewlets/common.py b/plone/app/layout/viewlets/common.py
index eacb81d..9e21081 100644
--- a/plone/app/layout/viewlets/common.py
+++ b/plone/app/layout/viewlets/common.py
@@ -66,6 +66,9 @@ def index(self):
 class TitleViewlet(ViewletBase):
     index = ViewPageTemplateFile('title.pt')
 
+    # seperator of page- and portal-title
+    sep = u' &mdash; '
+
     @property
     @memoize
     def site_title_setting(self):
@@ -121,8 +124,7 @@ def update(self):
         if self.page_title == portal_title:
             self.site_title = portal_title
         else:
-            self.site_title = u"%s &mdash; %s" % (self.page_title,
-                                                  portal_title)
+            self.site_title = self.sep.join([self.page_title, portal_title])
 
 
 class DublinCoreViewlet(ViewletBase):


Repository: plone.app.layout


Branch: refs/heads/2.7.x
Date: 2018-04-11T22:02:20+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.layout/commit/4a1d84e8181ad186986df4d5c63e2842d7920bef

Merge pull request #145 from plone/tomgross_title_sep_27x

Make it easier to override title seperator

Files changed:
M CHANGES.rst
M plone/app/layout/viewlets/common.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 1ba5122..3c374d5 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,8 @@ Breaking changes:
 
 New features:
 
-- *add item here*
+- Make it easier to override seperator in title viewlet
+  [tomgross]
 
 Bug fixes:
 
diff --git a/plone/app/layout/viewlets/common.py b/plone/app/layout/viewlets/common.py
index eacb81d..9e21081 100644
--- a/plone/app/layout/viewlets/common.py
+++ b/plone/app/layout/viewlets/common.py
@@ -66,6 +66,9 @@ def index(self):
 class TitleViewlet(ViewletBase):
     index = ViewPageTemplateFile('title.pt')
 
+    # seperator of page- and portal-title
+    sep = u' &mdash; '
+
     @property
     @memoize
     def site_title_setting(self):
@@ -121,8 +124,7 @@ def update(self):
         if self.page_title == portal_title:
             self.site_title = portal_title
         else:
-            self.site_title = u"%s &mdash; %s" % (self.page_title,
-                                                  portal_title)
+            self.site_title = self.sep.join([self.page_title, portal_title])
 
 
 class DublinCoreViewlet(ViewletBase):


