Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2019-02-12T11:49:23+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.upgrade/commit/e5599ad2341f29151ae4790588b095a920cc11b1

Added URL Management controlpanel and object_button action.

PLIP https://github.com/plone/Products.CMFPlone/issues/1486

Files changed:
A news/1486.feature
A plone/app/upgrade/v52/profiles/to_beta1/actions.xml
A plone/app/upgrade/v52/profiles/to_beta1/controlpanel.xml
A plone/app/upgrade/v52/profiles/to_beta1/rolemap.xml
A plone/app/upgrade/v52/profiles/to_beta1/toolset.xml

b'diff --git a/news/1486.feature b/news/1486.feature\nnew file mode 100644\nindex 00000000..58a7bbbc\n--- /dev/null\n+++ b/news/1486.feature\n@@ -0,0 +1 @@\n+Added URL Management controlpanel and object_button action.  [maurits]\ndiff --git a/plone/app/upgrade/v52/profiles/to_beta1/actions.xml b/plone/app/upgrade/v52/profiles/to_beta1/actions.xml\nnew file mode 100644\nindex 00000000..6bcd53b4\n--- /dev/null\n+++ b/plone/app/upgrade/v52/profiles/to_beta1/actions.xml\n@@ -0,0 +1,23 @@\n+<?xml version="1.0"?>\n+<object name="portal_actions" meta_type="Plone Actions Tool"\n+   xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+   i18n:domain="RedirectionTool">\n+ <object name="object" meta_type="CMF Action Category">\n+  <!-- Remove old Products.RedirectionTool tab -->\n+  <object name="redirection" remove="true" />\n+ </object>\n+ <object name="object_buttons" meta_type="CMF Action Category">\n+  <object name="redirection" meta_type="CMF Action" i18n:domain="plone">\n+   <property name="title" i18n:translate="">URL Management</property>\n+   <property name="description" i18n:translate=""></property>\n+   <property\n+      name="url_expr">string: ${object_url}/@@manage-aliases</property>\n+   <property name="icon_expr"></property>\n+   <property name="available_expr">python:not globals_view.isPortalOrPortalDefaultPage()</property>\n+   <property name="permissions">\n+    <element value="Manage Context Aliases"/>\n+   </property>\n+   <property name="visible">True</property>\n+  </object>\n+ </object>\n+</object>\ndiff --git a/plone/app/upgrade/v52/profiles/to_beta1/controlpanel.xml b/plone/app/upgrade/v52/profiles/to_beta1/controlpanel.xml\nnew file mode 100644\nindex 00000000..b6893fff\n--- /dev/null\n+++ b/plone/app/upgrade/v52/profiles/to_beta1/controlpanel.xml\n@@ -0,0 +1,14 @@\n+<?xml version="1.0"?>\n+<object name="portal_controlpanel" meta_type="Plone Control Panel Tool"\n+   xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+   i18n:domain="plone">\n+ <configlet title="URL Management" action_id="RedirectionTool"\n+    icon_expr="string:$portal_url/action_icon.png"\n+    appId="Plone" category="plone-general"\n+    condition_expr=""\n+    url_expr="string:${portal_url}/@@redirection-controlpanel"\n+    visible="True"\n+    i18n:attributes="title">\n+  <permission>Manage Portal Aliases</permission>\n+ </configlet>\n+</object>\ndiff --git a/plone/app/upgrade/v52/profiles/to_beta1/rolemap.xml b/plone/app/upgrade/v52/profiles/to_beta1/rolemap.xml\nnew file mode 100644\nindex 00000000..239adc0e\n--- /dev/null\n+++ b/plone/app/upgrade/v52/profiles/to_beta1/rolemap.xml\n@@ -0,0 +1,15 @@\n+<?xml version="1.0"?>\n+<rolemap>\n+  <permissions>\n+    <permission name="Manage Context Aliases" acquire="True">\n+      <role name="Manager"/>\n+      <role name="Site Administrator"/>\n+      <role name="Owner"/>\n+      <role name="Editor"/>\n+    </permission>\n+    <permission name="Manage Portal Aliases" acquire="True">\n+      <role name="Manager"/>\n+      <role name="Site Administrator"/>\n+    </permission>\n+  </permissions>\n+</rolemap>\ndiff --git a/plone/app/upgrade/v52/profiles/to_beta1/toolset.xml b/plone/app/upgrade/v52/profiles/to_beta1/toolset.xml\nnew file mode 100644\nindex 00000000..4cf57920\n--- /dev/null\n+++ b/plone/app/upgrade/v52/profiles/to_beta1/toolset.xml\n@@ -0,0 +1,5 @@\n+<?xml version="1.0"?>\n+<tool-setup>\n+  <!-- Remove old tool with class Products.RedirectionTool.RedirectionTool.RedirectionTool -->\n+ <forbidden tool_id="portal_redirection" />\n+</tool-setup>\n\\ No newline at end of file\n'

Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2019-02-12T17:09:32+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.upgrade/commit/9ad89bacdf83a8cf91f131c2cd1d5c35ec0808b3

Merge pull request #196 from plone/plip-1486-redirection

Added URL Management controlpanel and object_button action.

Files changed:
A news/1486.feature
A plone/app/upgrade/v52/profiles/to_beta1/actions.xml
A plone/app/upgrade/v52/profiles/to_beta1/controlpanel.xml
A plone/app/upgrade/v52/profiles/to_beta1/rolemap.xml
A plone/app/upgrade/v52/profiles/to_beta1/toolset.xml

b'diff --git a/news/1486.feature b/news/1486.feature\nnew file mode 100644\nindex 00000000..58a7bbbc\n--- /dev/null\n+++ b/news/1486.feature\n@@ -0,0 +1 @@\n+Added URL Management controlpanel and object_button action.  [maurits]\ndiff --git a/plone/app/upgrade/v52/profiles/to_beta1/actions.xml b/plone/app/upgrade/v52/profiles/to_beta1/actions.xml\nnew file mode 100644\nindex 00000000..6bcd53b4\n--- /dev/null\n+++ b/plone/app/upgrade/v52/profiles/to_beta1/actions.xml\n@@ -0,0 +1,23 @@\n+<?xml version="1.0"?>\n+<object name="portal_actions" meta_type="Plone Actions Tool"\n+   xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+   i18n:domain="RedirectionTool">\n+ <object name="object" meta_type="CMF Action Category">\n+  <!-- Remove old Products.RedirectionTool tab -->\n+  <object name="redirection" remove="true" />\n+ </object>\n+ <object name="object_buttons" meta_type="CMF Action Category">\n+  <object name="redirection" meta_type="CMF Action" i18n:domain="plone">\n+   <property name="title" i18n:translate="">URL Management</property>\n+   <property name="description" i18n:translate=""></property>\n+   <property\n+      name="url_expr">string: ${object_url}/@@manage-aliases</property>\n+   <property name="icon_expr"></property>\n+   <property name="available_expr">python:not globals_view.isPortalOrPortalDefaultPage()</property>\n+   <property name="permissions">\n+    <element value="Manage Context Aliases"/>\n+   </property>\n+   <property name="visible">True</property>\n+  </object>\n+ </object>\n+</object>\ndiff --git a/plone/app/upgrade/v52/profiles/to_beta1/controlpanel.xml b/plone/app/upgrade/v52/profiles/to_beta1/controlpanel.xml\nnew file mode 100644\nindex 00000000..b6893fff\n--- /dev/null\n+++ b/plone/app/upgrade/v52/profiles/to_beta1/controlpanel.xml\n@@ -0,0 +1,14 @@\n+<?xml version="1.0"?>\n+<object name="portal_controlpanel" meta_type="Plone Control Panel Tool"\n+   xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+   i18n:domain="plone">\n+ <configlet title="URL Management" action_id="RedirectionTool"\n+    icon_expr="string:$portal_url/action_icon.png"\n+    appId="Plone" category="plone-general"\n+    condition_expr=""\n+    url_expr="string:${portal_url}/@@redirection-controlpanel"\n+    visible="True"\n+    i18n:attributes="title">\n+  <permission>Manage Portal Aliases</permission>\n+ </configlet>\n+</object>\ndiff --git a/plone/app/upgrade/v52/profiles/to_beta1/rolemap.xml b/plone/app/upgrade/v52/profiles/to_beta1/rolemap.xml\nnew file mode 100644\nindex 00000000..239adc0e\n--- /dev/null\n+++ b/plone/app/upgrade/v52/profiles/to_beta1/rolemap.xml\n@@ -0,0 +1,15 @@\n+<?xml version="1.0"?>\n+<rolemap>\n+  <permissions>\n+    <permission name="Manage Context Aliases" acquire="True">\n+      <role name="Manager"/>\n+      <role name="Site Administrator"/>\n+      <role name="Owner"/>\n+      <role name="Editor"/>\n+    </permission>\n+    <permission name="Manage Portal Aliases" acquire="True">\n+      <role name="Manager"/>\n+      <role name="Site Administrator"/>\n+    </permission>\n+  </permissions>\n+</rolemap>\ndiff --git a/plone/app/upgrade/v52/profiles/to_beta1/toolset.xml b/plone/app/upgrade/v52/profiles/to_beta1/toolset.xml\nnew file mode 100644\nindex 00000000..4cf57920\n--- /dev/null\n+++ b/plone/app/upgrade/v52/profiles/to_beta1/toolset.xml\n@@ -0,0 +1,5 @@\n+<?xml version="1.0"?>\n+<tool-setup>\n+  <!-- Remove old tool with class Products.RedirectionTool.RedirectionTool.RedirectionTool -->\n+ <forbidden tool_id="portal_redirection" />\n+</tool-setup>\n\\ No newline at end of file\n'

