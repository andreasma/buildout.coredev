Repository: Products.CMFPlone


Branch: refs/heads/5.1.x
Date: 2019-02-05T17:50:34+01:00
Author: Markus Hilbert (iham) <markus.hilbert@iham.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/c0bf56e76738c59b7306dce5134ed693fe4eba28

fixed typo

Files changed:
M Products/CMFPlone/WorkflowTool.py

b"diff --git a/Products/CMFPlone/WorkflowTool.py b/Products/CMFPlone/WorkflowTool.py\nindex a94ce4359..0335e8777 100644\n--- a/Products/CMFPlone/WorkflowTool.py\n+++ b/Products/CMFPlone/WorkflowTool.py\n@@ -231,7 +231,14 @@ def getWorklistsResults(self):\n                     # Support LinguaPlone review situations, you want to see\n                     # content in *all* languages\n                     if 'Language' not in catalog_vars:\n+<<<<<<< HEAD\n                         catalog_vars['Language'] = 'all'\n+=======\n+                        if has_new_lang_bypass:\n+                            catalog_vars['path'] = '/'\n+                        elif has_new_lang_bypass:\n+                            catalog_vars['Language'] = 'all'\n+>>>>>>> bdfde497c... fixed typo\n                     # Include inactive content in result list. This is\n                     # especially important for content scheduled to go public\n                     # in the future, but needs to be reviewed before this.\n"

Repository: Products.CMFPlone


Branch: refs/heads/5.1.x
Date: 2019-02-05T17:52:28+01:00
Author: Markus Hilbert (iham) <markus.hilbert@iham.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/33363381ba1f6a9c4da21337952a6d2d55bf2c5b

Review list portlet showed nothing to review with plone.app.multilingual, As WorkflowTool bypassed languages only for p.a.m&lt;2.x or linguaplone. fixed and now compatible to both lang-bypassing methods.

Files changed:
A news/2595.bugfix
M Products/CMFPlone/WorkflowTool.py

b"diff --git a/Products/CMFPlone/WorkflowTool.py b/Products/CMFPlone/WorkflowTool.py\nindex 0335e8777..bd39d3f2c 100644\n--- a/Products/CMFPlone/WorkflowTool.py\n+++ b/Products/CMFPlone/WorkflowTool.py\n@@ -13,6 +13,16 @@\n from Products.DCWorkflow.Transitions import TRIGGER_USER_ACTION\n from Products.CMFPlone.PloneBaseTool import PloneBaseTool\n \n+import pkg_resources\n+\n+try:\n+    pkg_resources.get_distribution('plone.app.multilingual')\n+except pkg_resources.DistributionNotFound:\n+    has_new_lang_bypass = False\n+else:\n+    has_new_lang_bypass = int(pkg_resources.get_distribution(\n+        'plone.app.multilingual').version.split('.')[0]) > 1\n+\n \n class WorkflowTool(PloneBaseTool, BaseTool):\n \n@@ -231,6 +241,7 @@ def getWorklistsResults(self):\n                     # Support LinguaPlone review situations, you want to see\n                     # content in *all* languages\n                     if 'Language' not in catalog_vars:\n+<<<<<<< HEAD\n <<<<<<< HEAD\n                         catalog_vars['Language'] = 'all'\n =======\n@@ -240,6 +251,12 @@ def getWorklistsResults(self):\n                             catalog_vars['Language'] = 'all'\n >>>>>>> bdfde497c... fixed typo\n                     # Include inactive content in result list. This is\n+=======\n+                        if has_new_lang_bypass:\n+                            catalog_vars['path'] = '/'\n+                        elif has_new_lang_bypass:\n+                            catalog_vars['Language'] = 'all'                    # Include inactive content in result list. This is\n+>>>>>>> 9859b483e... Review list portlet showed nothing to review with plone.app.multilingual, As WorkflowTool bypassed languages only for p.a.m<2.x or linguaplone. fixed and now compatible to both lang-bypassing methods.\n                     # especially important for content scheduled to go public\n                     # in the future, but needs to be reviewed before this.\n                     catalog_vars['show_inactive'] = True\ndiff --git a/news/2595.bugfix b/news/2595.bugfix\nnew file mode 100644\nindex 000000000..5aa8b69ba\n--- /dev/null\n+++ b/news/2595.bugfix\n@@ -0,0 +1,2 @@\n+Review list portlet showed nothing to review with plone.app.multilingual, As WorkflowTool bypassed languages only for p.a.m<2.x or linguaplone. fixed and now compatible to both lang-bypassing methods.\n+[iham]\n"

Repository: Products.CMFPlone


Branch: refs/heads/5.1.x
Date: 2019-02-05T17:57:38+01:00
Author: Markus Hilbert (iham) <markus.hilbert@iham.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/d8792f3c6ac742b16e69b1a9487e20390075ae3d

fixed review list portlet result.

Files changed:
M Products/CMFPlone/WorkflowTool.py

b"diff --git a/Products/CMFPlone/WorkflowTool.py b/Products/CMFPlone/WorkflowTool.py\nindex bd39d3f2c..d71d11c8e 100644\n--- a/Products/CMFPlone/WorkflowTool.py\n+++ b/Products/CMFPlone/WorkflowTool.py\n@@ -241,22 +241,11 @@ def getWorklistsResults(self):\n                     # Support LinguaPlone review situations, you want to see\n                     # content in *all* languages\n                     if 'Language' not in catalog_vars:\n-<<<<<<< HEAD\n-<<<<<<< HEAD\n-                        catalog_vars['Language'] = 'all'\n-=======\n                         if has_new_lang_bypass:\n                             catalog_vars['path'] = '/'\n                         elif has_new_lang_bypass:\n                             catalog_vars['Language'] = 'all'\n->>>>>>> bdfde497c... fixed typo\n                     # Include inactive content in result list. This is\n-=======\n-                        if has_new_lang_bypass:\n-                            catalog_vars['path'] = '/'\n-                        elif has_new_lang_bypass:\n-                            catalog_vars['Language'] = 'all'                    # Include inactive content in result list. This is\n->>>>>>> 9859b483e... Review list portlet showed nothing to review with plone.app.multilingual, As WorkflowTool bypassed languages only for p.a.m<2.x or linguaplone. fixed and now compatible to both lang-bypassing methods.\n                     # especially important for content scheduled to go public\n                     # in the future, but needs to be reviewed before this.\n                     catalog_vars['show_inactive'] = True\n"

Repository: Products.CMFPlone


Branch: refs/heads/5.1.x
Date: 2019-02-05T19:49:44+01:00
Author: Markus Hilbert (iham) <markus.hilbert@iham.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/3da57f252d7b5fe976c7a38833bb0fd55dc3d657

Merge pull request #2718 from plone/issue_review_portlet

fixing review portlet

Files changed:
A news/2595.bugfix
M Products/CMFPlone/WorkflowTool.py

b"diff --git a/Products/CMFPlone/WorkflowTool.py b/Products/CMFPlone/WorkflowTool.py\nindex a94ce4359..d71d11c8e 100644\n--- a/Products/CMFPlone/WorkflowTool.py\n+++ b/Products/CMFPlone/WorkflowTool.py\n@@ -13,6 +13,16 @@\n from Products.DCWorkflow.Transitions import TRIGGER_USER_ACTION\n from Products.CMFPlone.PloneBaseTool import PloneBaseTool\n \n+import pkg_resources\n+\n+try:\n+    pkg_resources.get_distribution('plone.app.multilingual')\n+except pkg_resources.DistributionNotFound:\n+    has_new_lang_bypass = False\n+else:\n+    has_new_lang_bypass = int(pkg_resources.get_distribution(\n+        'plone.app.multilingual').version.split('.')[0]) > 1\n+\n \n class WorkflowTool(PloneBaseTool, BaseTool):\n \n@@ -231,7 +241,10 @@ def getWorklistsResults(self):\n                     # Support LinguaPlone review situations, you want to see\n                     # content in *all* languages\n                     if 'Language' not in catalog_vars:\n-                        catalog_vars['Language'] = 'all'\n+                        if has_new_lang_bypass:\n+                            catalog_vars['path'] = '/'\n+                        elif has_new_lang_bypass:\n+                            catalog_vars['Language'] = 'all'\n                     # Include inactive content in result list. This is\n                     # especially important for content scheduled to go public\n                     # in the future, but needs to be reviewed before this.\ndiff --git a/news/2595.bugfix b/news/2595.bugfix\nnew file mode 100644\nindex 000000000..5aa8b69ba\n--- /dev/null\n+++ b/news/2595.bugfix\n@@ -0,0 +1,2 @@\n+Review list portlet showed nothing to review with plone.app.multilingual, As WorkflowTool bypassed languages only for p.a.m<2.x or linguaplone. fixed and now compatible to both lang-bypassing methods.\n+[iham]\n"

