Repository: mockup


Branch: refs/heads/master
Date: 2020-01-21T15:12:28+01:00
Author: Cillian de Roiste (cillianderoiste) <deroiste@syslab.com>
Commit: https://github.com/plone/mockup/commit/c4c06f8cb9b2af51e86f522257b2de4735b2e927

TinyMCE: fix positioning of sub-menus in a modal

Closes #867

Files changed:
A news/867.bugfix
M mockup/patterns/tinymce/pattern.js

b'diff --git a/mockup/patterns/tinymce/pattern.js b/mockup/patterns/tinymce/pattern.js\nindex 0039faa31..d8bf58984 100644\n--- a/mockup/patterns/tinymce/pattern.js\n+++ b/mockup/patterns/tinymce/pattern.js\n@@ -416,6 +416,17 @@ define([\n           }\n         }\n \n+        /* If TinyMCE is rendered inside of a modal, set an ID on\n+         * .plone-modal-dialog and use that as the ui_container\n+         * setting for TinyMCE to anchor it there. This ensures that\n+         * sub-menus are displayed relative to the modal rather than\n+         * the document body. */\n+        var modal_container = self.$el.parents(".plone-modal-dialog")\n+\n+        if (modal_container.length > 0) {\n+            modal_container.attr("id", "tiny-ui-container");\n+            tinyOptions["ui_container"] = "#tiny-ui-container";\n+        }\n         tinymce.init(tinyOptions);\n         self.tiny = tinymce.get(self.tinyId);\n \ndiff --git a/news/867.bugfix b/news/867.bugfix\nnew file mode 100644\nindex 000000000..739c3cd8b\n--- /dev/null\n+++ b/news/867.bugfix\n@@ -0,0 +1 @@\n+TinyMCE: fix the position of menu dropdowns when in a modal\n\\ No newline at end of file\n'

Repository: mockup


Branch: refs/heads/master
Date: 2020-01-21T15:13:40+01:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/mockup/commit/d245512cd313c3cc6cde05f8feb6670dc00e4a80

Merge pull request #920 from plone/tinymce-modal-menu-position

TinyMCE: fix positioning of sub-menus in a modal

Files changed:
A news/867.bugfix
M mockup/patterns/tinymce/pattern.js

b'diff --git a/mockup/patterns/tinymce/pattern.js b/mockup/patterns/tinymce/pattern.js\nindex 0039faa31..d8bf58984 100644\n--- a/mockup/patterns/tinymce/pattern.js\n+++ b/mockup/patterns/tinymce/pattern.js\n@@ -416,6 +416,17 @@ define([\n           }\n         }\n \n+        /* If TinyMCE is rendered inside of a modal, set an ID on\n+         * .plone-modal-dialog and use that as the ui_container\n+         * setting for TinyMCE to anchor it there. This ensures that\n+         * sub-menus are displayed relative to the modal rather than\n+         * the document body. */\n+        var modal_container = self.$el.parents(".plone-modal-dialog")\n+\n+        if (modal_container.length > 0) {\n+            modal_container.attr("id", "tiny-ui-container");\n+            tinyOptions["ui_container"] = "#tiny-ui-container";\n+        }\n         tinymce.init(tinyOptions);\n         self.tiny = tinymce.get(self.tinyId);\n \ndiff --git a/news/867.bugfix b/news/867.bugfix\nnew file mode 100644\nindex 000000000..739c3cd8b\n--- /dev/null\n+++ b/news/867.bugfix\n@@ -0,0 +1 @@\n+TinyMCE: fix the position of menu dropdowns when in a modal\n\\ No newline at end of file\n'

