Repository: plone.versioncheck


Branch: refs/heads/master
Date: 2018-08-20T16:21:08+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.versioncheck/commit/435e89c60d03d4c8e5257fc670d9f96c932273e5

fixes another bug in find_relative

Files changed:
M CHANGES.rst
M src/plone/versioncheck/utils.py

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex 259bdd1..f4d6106 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -4,7 +4,8 @@ Changelog\n 1.6.10 (unreleased)\n -------------------\n \n-- Nothing changed yet.\n+- Fixes another bug in ``find_relative``.\n+  [jensens]\n \n \n 1.6.9 (2018-08-20)\ndiff --git a/src/plone/versioncheck/utils.py b/src/plone/versioncheck/utils.py\nindex 925da73..f84f433 100644\n--- a/src/plone/versioncheck/utils.py\n+++ b/src/plone/versioncheck/utils.py\n@@ -97,9 +97,12 @@ def find_relative(extend, relative=''):\n         parts[2] = '/'.join(path[:-1])\n         return urlunparse(parts), path[-1]\n     if '://' in relative:\n-        return '/'.join([relative.strip('/'), extend.strip('/')])\n+            return (\n+                relative.strip('/'),\n+                extend.strip('/'),\n+            )\n     if relative:\n-        extend = os.path.join([relative, extend])\n+        extend = os.path.join(relative, extend)\n     return (\n         os.path.dirname(os.path.abspath(extend)),\n         os.path.basename(extend),\n"

