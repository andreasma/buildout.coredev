Repository: plone.releaser


Branch: refs/heads/master
Date: 2018-09-27T21:34:16+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.releaser/commit/ec1c7589760ed11a37f1503269b5e45b285a8adb

Read versions.cfg in non-strict mode.

Needed for Plone 4.3 due to duplicate babel/Babel pins.

Files changed:
M plone/releaser/buildout.py

b'diff --git a/plone/releaser/buildout.py b/plone/releaser/buildout.py\nindex b67500d..13476fe 100644\n--- a/plone/releaser/buildout.py\n+++ b/plone/releaser/buildout.py\n@@ -57,7 +57,15 @@ def __init__(self, file_location):\n \n     @property\n     def versions(self):\n-        config = ConfigParser(interpolation=ExtendedInterpolation())\n+        """Read the versions config.\n+\n+        We use strict=False to avoid a DuplicateOptionError.\n+        This happens in coredev 4.3 because we pin \'babel\' and \'Babel\'.\n+        """\n+        config = ConfigParser(\n+            interpolation=ExtendedInterpolation(),\n+            strict=False,\n+            )\n         with open(self.file_location) as f:\n             config.read_file(f)\n         return config[\'versions\']\n'

