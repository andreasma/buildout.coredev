Repository: collective.monkeypatcher


Branch: refs/heads/master
Date: 2018-10-03T03:28:44Z
Author: Franco Pellegrini (frapell) <frapell@gmail.com>
Commit: https://github.com/plone/collective.monkeypatcher/commit/68596635ca2aa4c3a857a2bf5d850a2fb41f87c1

Update classifiers and add six as dependency

Files changed:
M setup.py

b'diff --git a/setup.py b/setup.py\nindex 6ebdeee..e594ee0 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -18,6 +18,8 @@\n         "Programming Language :: Python",\n         "Programming Language :: Python :: 2.6",\n         "Programming Language :: Python :: 2.7",\n+        "Programming Language :: Python :: 3.6",\n+        "Programming Language :: Python :: 3.7",\n         ],\n     keywords=\'zope monkey patch\',\n     author=\'Martin Aspeli\',\n@@ -30,5 +32,6 @@\n     zip_safe=False,\n     install_requires=[\n         \'setuptools\',\n+        \'six\',\n     ],\n     )\n'

Repository: collective.monkeypatcher


Branch: refs/heads/master
Date: 2018-10-03T03:29:03Z
Author: Franco Pellegrini (frapell) <frapell@gmail.com>
Commit: https://github.com/plone/collective.monkeypatcher/commit/a665b5a489b4f415c9d5c24d686c4a866a69640e

Prepare for Python 2 / 3 compatibility

Files changed:
M CHANGES.rst
M collective/monkeypatcher/meta.py

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex 2ca1443..a3dbc33 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -14,7 +14,8 @@ New features:\n \n Bug fixes:\n \n-- *add item here*\n+- Prepare for Python 2 / 3 compatibility\n+  [frapell]\n \n \n 1.1.5 (2018-06-18)\ndiff --git a/collective/monkeypatcher/meta.py b/collective/monkeypatcher/meta.py\nindex a8405b9..e270fee 100644\n--- a/collective/monkeypatcher/meta.py\n+++ b/collective/monkeypatcher/meta.py\n@@ -11,6 +11,7 @@\n import logging\n import pkg_resources\n import re\n+from six.moves import map\n \n \n log = logging.getLogger('collective.monkeypatcher')\n@@ -111,8 +112,8 @@ def _preconditions_matching(preconditions):\n \n         # fill versions - we assume having s/th like\n         # 1.2.3a2 or 1.2a1 or 1.2.0 - look at regexp\n-        p_v = map(int, filter(lambda x: x and int(x) or 0, version_r.search(version).groups()))\n-        p_i = map(int, filter(lambda y: y and int(y) or 0, version_r.search(dp[0].version).groups()))\n+        p_v = list(map(int, [x for x in version_r.search(version).groups() if x and int(x) or 0]))\n+        p_i = list(map(int, [y for y in version_r.search(dp[0].version).groups() if y and int(y) or 0]))\n \n         if not p_v or not p_i:\n             log.error('Could not patch because version not recognized. Wanted: %s, Installed: %s' % (p_v, p_i))\n"

Repository: collective.monkeypatcher


Branch: refs/heads/master
Date: 2018-10-03T13:16:58-03:00
Author: Franco Pellegrini (frapell) <frapell@gmail.com>
Commit: https://github.com/plone/collective.monkeypatcher/commit/ec18e9873e85f6e60f1c9c35c4d71edda35ccc8a

Merge pull request #11 from plone/python3

Python3

Files changed:
M CHANGES.rst
M collective/monkeypatcher/meta.py
M setup.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 2ca1443..a3dbc33 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -14,7 +14,8 @@ New features:\n \n Bug fixes:\n \n-- *add item here*\n+- Prepare for Python 2 / 3 compatibility\n+  [frapell]\n \n \n 1.1.5 (2018-06-18)\ndiff --git a/collective/monkeypatcher/meta.py b/collective/monkeypatcher/meta.py\nindex a8405b9..e270fee 100644\n--- a/collective/monkeypatcher/meta.py\n+++ b/collective/monkeypatcher/meta.py\n@@ -11,6 +11,7 @@\n import logging\n import pkg_resources\n import re\n+from six.moves import map\n \n \n log = logging.getLogger(\'collective.monkeypatcher\')\n@@ -111,8 +112,8 @@ def _preconditions_matching(preconditions):\n \n         # fill versions - we assume having s/th like\n         # 1.2.3a2 or 1.2a1 or 1.2.0 - look at regexp\n-        p_v = map(int, filter(lambda x: x and int(x) or 0, version_r.search(version).groups()))\n-        p_i = map(int, filter(lambda y: y and int(y) or 0, version_r.search(dp[0].version).groups()))\n+        p_v = list(map(int, [x for x in version_r.search(version).groups() if x and int(x) or 0]))\n+        p_i = list(map(int, [y for y in version_r.search(dp[0].version).groups() if y and int(y) or 0]))\n \n         if not p_v or not p_i:\n             log.error(\'Could not patch because version not recognized. Wanted: %s, Installed: %s\' % (p_v, p_i))\ndiff --git a/setup.py b/setup.py\nindex 6ebdeee..e594ee0 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -18,6 +18,8 @@\n         "Programming Language :: Python",\n         "Programming Language :: Python :: 2.6",\n         "Programming Language :: Python :: 2.7",\n+        "Programming Language :: Python :: 3.6",\n+        "Programming Language :: Python :: 3.7",\n         ],\n     keywords=\'zope monkey patch\',\n     author=\'Martin Aspeli\',\n@@ -30,5 +32,6 @@\n     zip_safe=False,\n     install_requires=[\n         \'setuptools\',\n+        \'six\',\n     ],\n     )\n'

