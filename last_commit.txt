Repository: Products.CMFDiffTool


Branch: refs/heads/master
Date: 2018-10-04T11:46:25+02:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/Products.CMFDiffTool/commit/065fab2e7db7a104fbdc246799a05085fbb17f52

fix AT testlayer

Files changed:
M CHANGES.rst
M Products/CMFDiffTool/testing.py
M Products/CMFDiffTool/tests/BaseTestCase.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 7bcc6bc..d293246 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -10,6 +10,8 @@ Bug fixes:\n   [sgeulette]\n - Flake8 corrections\n   [sgeulette]\n+- fix AT tests\n+  [petschki]\n \n 3.2.1 (2018-09-23)\n ------------------\ndiff --git a/Products/CMFDiffTool/testing.py b/Products/CMFDiffTool/testing.py\nindex b183c9f..36cf2ab 100644\n--- a/Products/CMFDiffTool/testing.py\n+++ b/Products/CMFDiffTool/testing.py\n@@ -100,7 +100,11 @@ def setUpPloneSite(self, portal):\n PACKAGE_DX_FIXTURE = DXLayer()\n \n if six.PY2:\n-    from plone.app.testing.bbb import PTC_FIXTURE\n+    try:\n+        from plone.app.testing.bbb_at import PTC_FIXTURE\n+    except ImportError:\n+        # plone.app.testing 5 or earlier\n+        from plone.app.testing.bbb import PTC_FIXTURE\n \n     class ATLayer(PloneSandboxLayer):\n \ndiff --git a/Products/CMFDiffTool/tests/BaseTestCase.py b/Products/CMFDiffTool/tests/BaseTestCase.py\nindex 4ee11dc..cbc0a62 100644\n--- a/Products/CMFDiffTool/tests/BaseTestCase.py\n+++ b/Products/CMFDiffTool/tests/BaseTestCase.py\n@@ -18,7 +18,11 @@ def setUp(self):\n \n \n if six.PY2:\n-    from plone.app.testing.bbb import PloneTestCase\n+    try:\n+        from plone.app.testing.bbb_at import PloneTestCase\n+    except ImportError:\n+        # plone.app.testing 5 or earlier\n+        from plone.app.testing.bbb import PloneTestCase\n     from Products.CMFDiffTool.testing import CMFDiffToolATLayer\n \n     class BaseATTestCase(PloneTestCase):\n'

Repository: Products.CMFDiffTool


Branch: refs/heads/master
Date: 2018-10-04T14:23:40+02:00
Author: Peter Mathis (petschki) <petschki@users.noreply.github.com>
Commit: https://github.com/plone/Products.CMFDiffTool/commit/6ce0dd4a826a4bcee103ba9d078dbeb7343fed57

Merge pull request #35 from plone/attestlayer

fix AT testlayer

Files changed:
M CHANGES.rst
M Products/CMFDiffTool/testing.py
M Products/CMFDiffTool/tests/BaseTestCase.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 7bcc6bc..d293246 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -10,6 +10,8 @@ Bug fixes:\n   [sgeulette]\n - Flake8 corrections\n   [sgeulette]\n+- fix AT tests\n+  [petschki]\n \n 3.2.1 (2018-09-23)\n ------------------\ndiff --git a/Products/CMFDiffTool/testing.py b/Products/CMFDiffTool/testing.py\nindex b183c9f..36cf2ab 100644\n--- a/Products/CMFDiffTool/testing.py\n+++ b/Products/CMFDiffTool/testing.py\n@@ -100,7 +100,11 @@ def setUpPloneSite(self, portal):\n PACKAGE_DX_FIXTURE = DXLayer()\n \n if six.PY2:\n-    from plone.app.testing.bbb import PTC_FIXTURE\n+    try:\n+        from plone.app.testing.bbb_at import PTC_FIXTURE\n+    except ImportError:\n+        # plone.app.testing 5 or earlier\n+        from plone.app.testing.bbb import PTC_FIXTURE\n \n     class ATLayer(PloneSandboxLayer):\n \ndiff --git a/Products/CMFDiffTool/tests/BaseTestCase.py b/Products/CMFDiffTool/tests/BaseTestCase.py\nindex 4ee11dc..cbc0a62 100644\n--- a/Products/CMFDiffTool/tests/BaseTestCase.py\n+++ b/Products/CMFDiffTool/tests/BaseTestCase.py\n@@ -18,7 +18,11 @@ def setUp(self):\n \n \n if six.PY2:\n-    from plone.app.testing.bbb import PloneTestCase\n+    try:\n+        from plone.app.testing.bbb_at import PloneTestCase\n+    except ImportError:\n+        # plone.app.testing 5 or earlier\n+        from plone.app.testing.bbb import PloneTestCase\n     from Products.CMFDiffTool.testing import CMFDiffToolATLayer\n \n     class BaseATTestCase(PloneTestCase):\n'

